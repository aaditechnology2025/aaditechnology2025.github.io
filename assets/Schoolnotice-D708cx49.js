import{h as L,S as A,u as F,c as i,r as s,i as B,k,l as d,m,j as o,B as h,n as v}from"./index-d5YOjbb6.js";import{B as y}from"./BackButton-BE5_8L9j.js";import{L as E}from"./List1-CMmC98bZ.js";import{S as T}from"./SchoolNoticeHeader-DDgvQcuh.js";import"./Attachment-DgcWq5kr.js";import"./ChevronRightTwoTone-BefBLSd_.js";import"./HomeTwoTone-14QqW0Yy.js";function Y(){L(),A();const n=F(),u=i(t=>t.Schoolnotice.SchoolNoticeData),c=i(t=>t.SchoolNoticeBoard.AllActiveNotices),l=localStorage.getItem("localSchoolId"),r=sessionStorage.getItem("Id"),I=i(t=>t.Schoolnotice.Loading),S={asSchoolId:l,asNoticeId:0,asUserId:r},g={asSchoolId:l,asUserId:r};s.useEffect(()=>{sessionStorage.getItem("Id")!==null&&localStorage.setItem("url",window.location.pathname),n(B(S))},[]);const[p,C]=s.useState("");s.useEffect(()=>{n(k(g))},[]),c.filter((t,e)=>p==t.id?t.FileName:"");const x=u.map((t,e)=>{const a=t.Date,f=new Date(a).getDate(),D=new Date(a).toLocaleString("default",{month:"short"}),j=new Date(a).getFullYear(),w=`${f} ${D} ${j}`;return{id:e,header:d(t.Name),text1:w,text2:"",linkPath:"/Common/Viewschoolnotice/"+m(t.Id),FileName:t.FileName}}),[R,N]=s.useState([]);return s.useEffect(()=>{let t=[];localStorage.getItem("ImportantNotices")!==null&&(t=localStorage.getItem("ImportantNotices").split(",")),N(c.filter(e=>!t.includes(e.Id)).map((e,a)=>({id:e.Id,header:d(e.Name),text2:"",linkPath:"/Common/Viewschoolnotice/"+m(e.Id),FileName:e.FileName,IsText:e.IsText,IsImageNotice:e.IsImageNotice,isActive:!1})))},[c]),o.jsxs(h,{sx:{px:4},children:[o.jsx(T,{navLinks:[{title:"School Notice",path:""}]}),o.jsxs(h,{sx:{background:"white",py:2},children:[sessionStorage.getItem("Id")===null&&o.jsx(y,{FromRoute:"/schoolList"}),I?o.jsx(v,{}):o.jsx(o.Fragment,{children:o.jsx(E,{items:x})})]})]})}export{Y as default};
