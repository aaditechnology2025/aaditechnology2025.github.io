import{u as w,c as d,r as t,dQ as R,t as D,dR as A,j as e,B as l,a2 as L,a3 as T,bl as G,T as b,a5 as H,n as W,bQ as Y,q as P,a7 as Q,G as E,a8 as j,as as q,L as z,dS as N}from"./index-d5YOjbb6.js";import{E as $}from"./Errormessage-RPRSgLGN.js";import{B as J}from"./BackButton-BE5_8L9j.js";import{H as K}from"./Hidden-CZZHX81z.js";const O=({open:C,setOpen:i})=>{const n=w(),a=d(s=>s.MessageCenter.EmailSettings),c=d(s=>s.MessageCenter.UpdationMessage),S=d(s=>s.MessageCenter.Loading),[o,m]=t.useState(""),[u,r]=t.useState(!1),g=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,[I,h]=t.useState(!0),[x,p]=t.useState(!1);t.useState(!1);const k={asSchoolId:localStorage.getItem("localSchoolId"),asUserId:sessionStorage.getItem("Id")},v={asSchoolId:localStorage.getItem("localSchoolId"),asUserId:sessionStorage.getItem("Id"),asCanReceiveMail:x?"Y":"N",asEmailAddress:o};t.useEffect(()=>{n(R(k))},[]),t.useEffect(()=>{m(a==null?void 0:a.EmailAddress),p((a==null?void 0:a.CanReceiveMail)==="Y")},[a]),t.useEffect(()=>{c!==""&&(D.success("Email setting saved successfully."),i(!1),n(A()))},[c,n,i]);const U=()=>{if(o===""){r(!0);return}if(!g.test(o)){r(!0);return}u||n(N(v))},y=s=>{s.target.checked&&h(!1),s.target.checked||h(!0),p(s.target.checked)},B=s=>{if(m(s),s.length===0){r(!0);return}const M=g.test(s);r(!M)},F=s=>{r(!1)},f=()=>{i(!1)};return e.jsx(l,{children:e.jsxs(L,{open:C,onClose:()=>i(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(T,{sx:{bgcolor:"#223354"},children:e.jsx(G,{onClick:f,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(b,{variant:"h3",sx:{pt:1,pl:4},children:"Email Setting"}),e.jsx(H,{children:e.jsxs(l,{sx:{px:2},children:[e.jsx(K,{smUp:!0,children:e.jsx(J,{FromRoute:"/MessageCenter/msgCenter"})}),S&&e.jsx(W,{}),e.jsxs(l,{sx:{display:"flex"},mb:2,children:[e.jsx(Y,{size:"small",name:"IsChecked",checked:x,onChange:s=>y(s),sx:{"& .MuiSvgIcon-root":{borderRadius:"4px"}}}),e.jsx(b,{variant:"body2",component:l,p:1,children:"Yes, I want to receive messages on the below email address."})]}),e.jsx(P,{fullWidth:!0,label:"Email Id",value:o,onChange:s=>B(s.target.value),onFocus:F,type:"email"}),u&&e.jsx(l,{sx:{my:1},children:e.jsx($,{Error:o===""?"Email should not be blank.":'Email should be in valid format. (for example: "john.smith@yahoo.com").'})})]})}),e.jsx(Q,{children:e.jsx(E,{item:!0,xs:12,md:12,children:e.jsxs(E,{direction:"row",gap:2,alignItems:"center",sx:{ml:43,pb:2},children:[e.jsx(j,{sx:{ml:2,color:"red",":hover":{backgroundColor:q[100]}},onClick:f,children:"Cancel"}),e.jsx(j,{sx:{color:"green",":hover":{backgroundColor:z[100]}},onClick:U,disabled:I,children:"Confirm"})]})})})]})})};export{O as default};
