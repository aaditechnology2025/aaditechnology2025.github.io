import{u as Y,r as o,c as g,dU as z,j as t,B as j,n as O,bb as $,t as H,dV as V,dW as W}from"./index-d5YOjbb6.js";import{d as q}from"./Delete-CrUR97S5.js";import{d as J}from"./KeyboardArrowUpRounded-Ddmjzrt1.js";import{d as K}from"./Replay-BNkOI0gZ.js";import{M as Q}from"./MoveToTrash-CffFWm0b.js";import{E as X}from"./ErrorMessages-D1wiRwH0.js";import{L as Z}from"./List3-DyfSymjJ.js";import{B as T}from"./ButtonStyle-DaPKUawX.js";import"./CheckboxImg-DSBDgE-_.js";import"./RadioButtonUnchecked-DyWPxD5p.js";const ee=2;function ge(){const f=Y(),[x,b]=o.useState(ee),[n,E]=o.useState(),[s,te]=o.useState([]),[R,c]=o.useState("none"),[I,y]=o.useState(!1),C=window.location.pathname.replace("/RITeSchool/MessageCenter/msgCenter/",""),l=g(e=>e.Sent__Message.SentList),k=g(e=>e.Sent__Message.Loading),w=g(e=>e.Sent__Message.FilterData);l!=null&&(s.length==0&&I==!1&&l.forEach(e=>{e!=null&&s.push(e)}),w==!0?s.length!=0&&l.length!=0?(s.length=0,l.forEach(e=>{e!=null&&s.push(e)})):s.length=0:n!=null&&s.length!=0&&I==!0&&n.GetScheduledSMSResult!=null&&n.GetScheduledSMSResult.length!=0&&n.GetScheduledSMSResult[0].DetailsId!=s[0].DetailsId&&n.GetScheduledSMSResult.forEach(e=>{e!=null&&s.push(e)}));const d=localStorage.getItem("localSchoolId"),S=sessionStorage.getItem("Id"),u=sessionStorage.getItem("RoleId"),m=sessionStorage.getItem("AcademicYearId"),D={asUserId:S,asAcademicYearId:m,asUserRoleId:u,asSchoolId:d,abIsSMSCenter:"0",asFilter:"",asPageIndex:1,asMonthId:"0",asOperator:"",asDate:""};o.useEffect(()=>{f(z(D))},[]);const[A,h]=o.useState(!0),[p,i]=o.useState({DetailInfo:[]}),F=e=>{h(!0);const{value:a,name:M,checked:G}=e,{DetailInfo:v}=p;i(G?{DetailInfo:[...v,a]}:{DetailInfo:v.filter(N=>N!==a)})},L=()=>{const e=p.DetailInfo.join(";"),a={asSchoolId:d,asMessageRecieverDetailsId:e,asMessageDetailsId:e,asIsArchive:"Y",asIsCompeteDelete:0,asFlag:"Sent"};Q.MoveToTrash(a).then(M=>{C=="Sent"&&(H.success("Message has been moved to the trash."),f(V(D))),h(!1),i({DetailInfo:[]})}).catch(M=>{alert("error network")})},U=()=>{h(!1),i({DetailInfo:[]})},r=document.getElementById("ScrollableDiv"),_=()=>{b(x+1)},B=()=>{if(r.scrollTop>=400&&c("flex"),r.scrollTop<400&&c("none"),r.scrollHeight-r.scrollTop<=570){y(!0);const e={asUserId:S,asAcademicYearId:m,asUserRoleId:u,asSchoolId:d,abIsSMSCenter:"0",asFilter:"",asPageIndex:x,asMonthId:"0",asOperator:"",asDate:""};W.GetSentMessageList(e).then(a=>{E(a.data)}).catch(a=>{alert("error network")}),_()}},P=e=>{r.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c("none")},10)};return t.jsxs(t.Fragment,{children:[p.DetailInfo.length!==0?t.jsxs(t.Fragment,{children:[t.jsx(j,{sx:{px:2},children:t.jsxs(j,{display:"flex",flexDirection:"row",justifyContent:"flex-end",children:[t.jsx(T,{color:"primary",endIcon:t.jsx(q,{}),onClick:()=>L(),children:"DELETE"}),"  ",t.jsx(T,{color:"secondary",endIcon:t.jsx(K,{}),onClick:()=>U(),children:"RESET"})]})}),t.jsx("br",{})]}):null,t.jsxs("div",{id:"ScrollableDiv",onScroll:B,style:{position:"absolute",width:"100%",paddingBottom:"100px",height:"570px",overflow:"auto"},children:[k?t.jsx(O,{}):s===null||s.length==0?t.jsx(X,{Error:"No message found"}):t.jsx(t.Fragment,{children:s.map((e,a)=>t.jsx(Z,{data:e,handleChange:F,check:A,Attachments:e.Attachment,FromRoute:"/Sent"},a))}),t.jsx($,{sx:{display:R,position:"fixed",bottom:"95px",zIndex:"4",left:"15px",p:"2px",width:50,height:50,backgroundColor:"white",boxShadow:"5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.3) !important"},onClick:P,children:t.jsx(J,{fontSize:"large",color:"success"})})]})]})}export{ge as default};
