import{U as se,V as te,j as e,q as oe,S as L,u as ae,A as re,r as d,c as T,W as ie,X as ne,Y as B,Z as le,_ as m,$ as de,G as i,a0 as ce,a1 as me,I as F,a2 as Se,a3 as ge,a4 as ue,o as he,B as M,T as w,a5 as Ie,a6 as xe,a7 as E,a8 as fe,a9 as pe,D as Ne,t as we}from"./index-CpZD2H93.js";import{u as De}from"./formik.esm-Crucl9hw.js";import{r as O}from"./regulas-DwywiG5v.js";import{B as je}from"./ButtonStyle-DAEB_dBE.js";import{U as _,I as V,c as ve,d as D}from"./CardStyle-CBuNm0_N.js";import"./Card-B0aZ7mGs.js";var j={},be=te;Object.defineProperty(j,"__esModule",{value:!0});var k=j.default=void 0,Ce=be(se()),ye=e,Ae=(0,Ce.default)((0,ye.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");k=j.default=Ae;function Fe(){const{SchoolId:S,UserId:g,Password:u}=oe(),Y=L(),v=L(),p=ae(),I=re(),z=localStorage.getItem("SchoolName"),[J,b]=d.useState(""),h=S??localStorage.getItem("localSchoolId"),q={username:g??"",password:u??"",showPassword:!1},[x,W]=d.useState(q),[C,c]=d.useState(!0),[n,N]=d.useState(),[G,$]=d.useState(""),f=T(o=>o.SchoolList.SchoolList),y=T(o=>o.SchoolSettings.SchoolSettings),A=localStorage.getItem("auth");d.useEffect(()=>{localStorage.setItem("SchoolSettingsValue",JSON.stringify(y))},[y]),d.useEffect(()=>{var t;h!=null&&h!=null&&(A===null?(p(ie({asSchoolId:h})),c(!1)):P(JSON.parse(A))),p(ne({asSchoolId:"Default"})),b(B+((t=localStorage.getItem("TermsSchoolName"))==null?void 0:t.split(" ").join("%20"))+"_logo.png")},[]),d.useEffect(()=>{var o;n!=null&&(window.sessionStorage.setItem("authenticateuser",JSON.stringify(n)),sessionStorage.setItem("SchoolId",n.SchoolId),localStorage.setItem("localSchoolId",n.SchoolId),localStorage.setItem("SchoolName",n.SchoolName),localStorage.setItem("SiteURL",n.SiteURL),localStorage.setItem("TermsSchoolName",n.TermsSchoolName),localStorage.setItem("FolderName",n.FolderName),b(B+((o=n.TermsSchoolName)==null?void 0:o.split(" ").join("%20"))+"_logo.png"),g!=null&&u!=null&&U())},[n]),d.useEffect(()=>{f.length>0&&S!=null&&N(f.filter(o=>o.SchoolId==S)[0])},[f]);const R=o=>{we.error(o,{toastId:"error1"}),setTimeout(()=>{},3e3)},P=async o=>{const t=await o.data.AuthenticateUserResult,s=await o.data.StudentDetails,a=await o.data.TeacherDetails,l=await o.data.AdminStaffDetails.GetAdminStaffResult,ee={asSchoolId:h,asUserId:t.Id};p(le(ee)),t.RoleName==="Student"&&(sessionStorage.setItem("AuthenticateUserResult",JSON.stringify(t)),sessionStorage.setItem("DivisionId",s.DivisionId),sessionStorage.setItem("Class",s.Class),sessionStorage.setItem("StandardId",s.StandardId),sessionStorage.setItem("RollNo",s.RollNo),sessionStorage.setItem("AcademicYearId",s.AcademicYearId),sessionStorage.setItem("AcademicYear",s.AcademicYear),sessionStorage.setItem("StudentId",s.StudentId),sessionStorage.setItem("StandardDivisionId",s.StandardDivisionId),sessionStorage.setItem("Address",s.Address),sessionStorage.setItem("ResidencePhoneNumber",s.ResidencePhoneNumber),sessionStorage.setItem("CasteAndSubCaste",s.CasteAndSubCaste),sessionStorage.setItem("UDISENumber",s.UDISENumber),sessionStorage.setItem("BirthPlace",s.BirthPlace),sessionStorage.setItem("Nationality",s.Nationality),sessionStorage.setItem("MotherTongue",s.MotherTongue),sessionStorage.setItem("Blood_Group",s.Blood_Group),sessionStorage.setItem("EndDate",m(s.EndDate)),sessionStorage.setItem("StartDate",m(s.StartDate)),sessionStorage.setItem("Language",s.asLanguage),sessionStorage.setItem("ParentStaffID",s.aiParentStaffId),sessionStorage.setItem("StartRowIndex",s.aiStartRowIndex),sessionStorage.setItem("SortRowIndexExpression",s.asSortExpression),sessionStorage.setItem("BookTittleName",s.asBookTitle),sessionStorage.setItem("UserName",s.asUserName),sessionStorage.setItem("ExamID",s.asExamId),sessionStorage.setItem("DOB",s.DOB),sessionStorage.setItem("MobileNumber",s.MobileNumber),sessionStorage.setItem("MobileNumber2",s.MobileNumber2),sessionStorage.setItem("Religion",s.Religion),sessionStorage.setItem("CategoryName",s.CategoryName),sessionStorage.setItem("FamilyPhotoFilePath",s.FamilyPhotoFilePath),sessionStorage.setItem("SchoolwiseStudentId",s.SchoolwiseStudentId),sessionStorage.setItem("StudentSiblingList",s.StudentSiblingList===void 0?"":JSON.stringify(s.StudentSiblingList))),t.RoleName==="Teacher"&&(sessionStorage.setItem("AuthenticateUserResult",JSON.stringify(t)),sessionStorage.setItem("TeacherId",a.TeacherId),sessionStorage.setItem("Address",a.Address),sessionStorage.setItem("IsClassTeacher",a.IsClassTeacher),sessionStorage.setItem("DesignationName",a.DesignationName),sessionStorage.setItem("DivisionId",a.DivisionId),sessionStorage.setItem("StandardId",a.StandardId),sessionStorage.setItem("StandardDivisionId",a.StandardDivisionId),sessionStorage.setItem("ClassName",a.ClassName),sessionStorage.setItem("AcademicYearId",a.AcademicYearId),sessionStorage.setItem("EndDate",m(a.EndDate)),sessionStorage.setItem("StartDate",m(a.StartDate)),sessionStorage.setItem("SchoolName",a.asSchoolName),sessionStorage.setItem("DOB",a.DOB),sessionStorage.setItem("MobileNumber",a.MobileNumber),sessionStorage.setItem("SchoolConfiguration",JSON.stringify(a.SchoolConfiguration))),t.RoleName==="Admin Staff"&&(sessionStorage.setItem("AcademicYearId",l.AcademicYearId),sessionStorage.setItem("Address",l.Address),sessionStorage.setItem("DesignationName",l.DesignationName),sessionStorage.setItem("EndDate",m(l.EndDate)),sessionStorage.setItem("StartDate",m(l.StartDate)),sessionStorage.setItem("DOB",l.DOB),sessionStorage.setItem("SchoolName",l.SchoolName),sessionStorage.setItem("asSchoolName",l.asSchoolName),sessionStorage.setItem("MobileNumber",l.MobileNumber)),sessionStorage.setItem("Id",t.Id),sessionStorage.setItem("RoleId",t.RoleId),sessionStorage.setItem("StudentName",t.Name),sessionStorage.setItem("PhotoFilePath",t.PhotoFilePath),sessionStorage.setItem("Userlogin",t.UserLogin),sessionStorage.setItem("TermsAccepted",t.TermsAccepted),sessionStorage.setItem("LastPasswordChangeDate",t.LastPasswordChangeDate),localStorage.setItem("UserId",t.Id),localStorage.setItem("RoleName",t.RoleName),localStorage.getItem("url"),I("/RITeSchool/landing/landing",{state:{fromInternal:!0}})},r=De({initialValues:{userName:g??"",password:u??""},onSubmit:o=>{U()},validate:o=>{const t={};return o.userName||(t.userName="Username is Required "),o.password||(t.password="Password is Required "),t}}),H=()=>{c(!0),N(null);let o=localStorage.getItem("LoginVersion");localStorage.clear(),localStorage.setItem("LoginVersion",o)},X=()=>{I("/forgotPassword",{state:{fromInternal:!0}})},Z=()=>{I("/schoolNotice",{state:{fromInternal:!0}})},K=()=>{W({...x,showPassword:!x.showPassword})},Q=o=>{o.preventDefault()},U=async()=>{const o={asUserName:r.values.userName,asPassword:r.values.password,asSchoolId:h,asIsSiblingLogin:!1},t=await de.AuthenticateUser(o);if(t.data!=null)if(t.data.AuthenticateUserResult.Message===""||t.data.AuthenticateUserResult.Message===null){const s=await t.data.AuthenticateUserResult,a=s.TermsAccepted;sessionStorage.setItem("TermsAccepted",s.TermsAccepted),a!=="Y"?(sessionStorage.setItem("Id",s.Id),sessionStorage.setItem("RoleId",s.RoleId),sessionStorage.setItem("Userlogin",s.UserLogin),I("/TermAndCondition",{state:{fromInternal:!0}})):(localStorage.setItem("auth",JSON.stringify(t)),P(t))}else R(t.data.AuthenticateUserResult.Message);else R("Invalid Username or Password")};return e.jsxs(i,{children:[C&&e.jsxs(ce,{open:C,onClose:()=>{c(!1)},fullWidth:!0,maxWidth:"xs",sx:{"& .MuiDialog-paper":{height:"50%"}},children:[e.jsxs(me,{variant:"h4",sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:["Select or Switch School",e.jsx(F,{size:"small",onClick:()=>{c(!1)},children:e.jsx(Se,{fontSize:"small"})})]}),e.jsx(ge,{dividers:!0,children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(ue,{value:n,onChange:(o,t)=>{N(t),n==null&&c(!1)},inputValue:G,onInputChange:(o,t)=>{$(t)},id:"controllable-states-demo",options:f,getOptionLabel:o=>o.SchoolName,renderInput:o=>e.jsx(he,{...o,className:Y.root,label:"Select School",required:!0,variant:"standard"})})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx("a",{href:"https://www.regulusit.net",target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:O})}),e.jsxs(w,{fontSize:12,sx:{pb:"8px"},children:["Copyright © ",new Date().getFullYear()," RegulusIT.net. All rights reserved."]})]})})]})}),e.jsx(Ie,{children:e.jsx(xe,{variant:"contained",size:"small",color:"error",onClick:()=>{c(!1)},children:"Cancel"})})]}),S==null&&e.jsxs(i,{container:!0,spacing:0,direction:"column",alignItems:"center",style:{minHeight:"100vh"},columns:{xs:12,md:12},children:[e.jsx(i,{item:!0,xs:12,sx:{mt:"30px"},children:e.jsx("img",{src:J,width:"100%",style:{maxHeight:200}})}),e.jsx(i,{item:!0,xs:12,sx:{px:2},children:e.jsx(w,{variant:"h4",sx:{textAlign:"center"},children:z})}),e.jsx(M,{sx:{maxWidth:"90%"},children:e.jsx("form",{onSubmit:r.handleSubmit,noValidate:!0,autoComplete:"off",children:e.jsxs(i,{item:!0,xs:12,children:[e.jsxs(E,{fullWidth:!0,sx:{mr:1},variant:"standard",children:[e.jsx(_,{htmlFor:"username",children:"User Name"}),e.jsx(V,{id:"username",color:"secondary",name:"userName",value:r.values.userName,onChange:r.handleChange,onBlur:r.handleBlur}),r.touched.userName&&r.errors.userName?e.jsx("div",{className:v.error,children:r.errors.userName}):null]}),e.jsxs(E,{fullWidth:!0,sx:{mr:1,mt:1},variant:"standard",children:[e.jsx(_,{htmlFor:"standard-adornment-password",children:"Password"}),e.jsx(V,{color:"secondary",id:"standard-adornment-password",type:x.showPassword?"text":"password",name:"password",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur,endAdornment:e.jsx(fe,{position:"end",children:e.jsx(F,{"aria-label":"toggle password visibility",onClick:K,onMouseDown:Q,children:x.showPassword?e.jsx(k,{}):e.jsx(pe,{})})})})]}),r.touched.password&&r.errors.password?e.jsx("div",{className:v.error,children:r.errors.password}):null,e.jsxs(i,{sx:{pt:1,pb:3},children:[e.jsx(je,{color:"primary",type:"submit",onChange:r.handleChange,children:"Login"}),e.jsxs(ve,{onClick:X,style:{cursor:"pointer"},children:[" ","Forgot Password"," "]})]})]})})}),e.jsx(i,{children:e.jsx(D,{onClick:H,sx:{cursor:"pointer"},children:"Change School For Login"})}),e.jsx(i,{children:e.jsx(D,{onClick:Z,sx:{cursor:"pointer"},children:"School Notices"})}),e.jsx("br",{}),e.jsx(i,{item:!0,xs:12,textAlign:"center",children:e.jsx(D,{children:e.jsx("a",{href:"https://www.riteschool.in/privacy-policy",children:"Privacy Policy"})})}),e.jsx("br",{}),e.jsx(Ne,{sx:{background:"#5b5258",mx:"30px"}}),e.jsxs(i,{container:!0,textAlign:"center",children:[e.jsx(i,{item:!0,xs:12,children:e.jsx("a",{href:"https://www.regulusit.net",target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:O})})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(w,{fontSize:12,sx:{pb:"8px"},children:["Copyright © ",new Date().getFullYear()," RegulusIT.net. All rights reserved."]})})]})]})]})}export{Fe as default};
