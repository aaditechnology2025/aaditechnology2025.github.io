import{j as e,ai as $,B as l,aj as K,ak as Z,al as A,am as x,an as ee,H as v,I as te,as as se,at as oe,r as o,u as ne,E as ae,c as d,hn as re,t as U,ho as le,n1 as S,hp as ie,hq as ce,a2 as de,a3 as me,J as ue,bl as xe,a5 as pe,T as L,G as p,q as P,aJ as he,a7 as ge,a8 as E,L as Ie,hr as De,hs as be}from"./index-d5YOjbb6.js";import{S as je}from"./SingleFile-BT4Sw5XK.js";import{V as fe}from"./Visibility-C0VMNowd.js";import{Q as Se}from"./QuestionMark-C2Y4lgD8.js";import"./CloudUpload-DJN1zp2n.js";import"./Errormessage-RPRSgLGN.js";function ve({ItemList:a,clickView:h,clickDelete:g,HeaderArray:I}){return e.jsx("div",{children:e.jsx($,{component:l,children:e.jsxs(K,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx(Z,{children:e.jsx(A,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:I.map((s,m)=>e.jsx(x,{sx:{textTransform:"capitalize",color:"white"},align:s.align?s.align:"left",children:e.jsx("b",{children:s.Header})},m))})}),e.jsx(ee,{children:a.map(s=>e.jsxs(A,{children:[e.jsx(x,{sx:{textTransform:"capitalize",textAlign:"left",paddingTop:"2.5px",paddingBottom:"2.5px"},children:s.Text1}),e.jsx(x,{sx:{textTransform:"capitalize",paddingTop:"2.5px",paddingBottom:"2.5px"},align:"center",children:e.jsx(v,{title:"View",children:e.jsx(fe,{onClick:()=>h(s.Text1),sx:{color:"#223354","&:hover":{color:"#223354",bgcolor:"grey.300",cursor:"pointer"}}})})}),e.jsx(x,{sx:{textTransform:"capitalize",paddingTop:"2.5px",paddingBottom:"2.5px"},align:"center",children:e.jsx(te,{sx:{color:"#223354","&:hover":{color:"red",backgroundColor:se[100]}},onClick:()=>g(s.Id),children:e.jsx(v,{title:"Delete",children:e.jsx(oe,{})})})})]},s.Id))})]})})})}const Ne=({Id:a,UserName:h,DocumentName:g,open:I,handleClose:s,RefreshList:m})=>{o.useState("");const n=ne(),R=[{Id:1,Header:"File Name"},{Id:2,Header:"View",align:"center"},{Id:3,Header:"Delete",align:"center"}],C=localStorage.getItem("SiteURL");C.split("/")[C.split("/").length-1];const G=["BMP","PNG","DOC","DOCX","JPG","JPEG","PDF","XLS","XLSX"],M=5e6,{showAlert:H,closeAlert:F}=o.useContext(ae),[i,y]=o.useState(""),[T,D]=o.useState("");o.useState("");const[V,k]=o.useState(""),c=Number(localStorage.getItem("localSchoolId")),z=localStorage.getItem("FolderName");sessionStorage.getItem("FinancialYearId");const w=Number(sessionStorage.getItem("AcademicYearId")),r=Number(localStorage.getItem("UserId"));d(t=>t.AddInvestmentDetailsDoc.ISCheckPublishUnpublishDocument);const b=d(t=>t.AddInvestmentDetailsDoc.ISSaveInvestmentDocument),u=d(t=>t.AddInvestmentDetailsDoc.ISGetAllDocumentsList);d(t=>t.AddInvestmentDetailsDoc.ISGetInvestmentDocumentFile);const N=d(t=>t.AddInvestmentDetailsDoc.ISDeleteInvestmentDocument),Y={asSchoolId:c,asFinancialYearId:1,asUserId:r},J={asSchoolId:c,asAcademicYearId:w,asFinancialYearId:1,asDocumentId:Number(a),asFileName:i==""?null:i,asUserId:r,asInsertedById:r,asDocumnetTypeId:1,asReportingUserId:0,asSaveFeature:"Investment Declarations",asFolderName:z,asBase64String:V},j={asSchoolId:c,asUserId:r,asFinancialYearId:1,asDocumentTypeId:1,asAcademicYearId:w,asDocumentId:Number(a),asReportingUserId:0,asLoginUserId:r},O={asSchoolId:c,asId:Number(a)};o.useEffect(()=>{n(re(Y))},[]);const W=()=>{let t=!1;!i||i===""?(D("Select file to upload."),t=!0):D(""),t||(n(De(J)),B())};o.useEffect(()=>{b!=""&&(U.success(b),n(le()),n(S(j)),m())},[b]),o.useEffect(()=>{n(S(j))},[a]),o.useEffect(()=>{n(ie(O))},[]);const X=t=>{y(t.Name),k(t.Value),D(t.ErrorMsg)},B=()=>{y(""),k("")},q=t=>{const _={asSchoolId:c,asFinancialYearId:1,asUpdatedById:r,asDocumentId:Number(t),asDocumnetTypeId:1};H({title:"Please Confirm",message:"Are you sure you want to delete this record?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{F()},onConfirm:()=>{n(be(_)),F()}})};o.useEffect(()=>{N!==""&&(U.success("Document deleted successfully."),n(ce()),n(S(j)),m())},[N]);const Q=t=>{window.open(localStorage.getItem("SiteURL")+"RITeSchool//downloads//Investment Declarations/"+t)},f=()=>{B(),s()};return e.jsxs(de,{open:I,maxWidth:"md",fullWidth:!0,onClose:f,PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(me,{sx:{bgcolor:"#223354"},children:[e.jsx(v,{title:"Upload / delete documents.",placement:"bottom-end",children:e.jsx(Se,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:ue[600]}}})}),e.jsx(xe,{onClick:f,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(pe,{children:e.jsxs(l,{children:[e.jsx(L,{variant:"h2",sx:{pt:2,pl:1},children:"Documents"}),e.jsx(l,{sx:{background:"white",top:"1px",alignItems:"center",pl:1,pr:2,pt:2},children:e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:12,sm:4,md:4,lg:4,children:e.jsx(P,{fullWidth:!0,label:e.jsxs(e.Fragment,{children:["User Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),InputLabelProps:{shrink:!0},sx:{width:"100%",bgcolor:"#F0F0F0","& .MuiInputBase-input":{cursor:"default"}},value:h,size:"medium",InputProps:{readOnly:!0}})}),e.jsx(p,{item:!0,xs:12,sm:4,md:4,lg:4,children:e.jsx(P,{fullWidth:!0,label:e.jsxs(e.Fragment,{children:["Document Name  ",e.jsx("span",{style:{color:"red"},children:"*"})]}),InputLabelProps:{shrink:!0},sx:{width:"100%",bgcolor:"#F0F0F0","& .MuiInputBase-input":{cursor:"default"}},value:g,size:"medium",InputProps:{readOnly:!0}})}),e.jsx(p,{item:!0,xs:12,sm:4,md:4,lg:4,children:e.jsxs(l,{sx:{display:"flex",alignItems:"center",width:"calc(100% + 1px)",position:"relative"},children:[e.jsx(je,{ValidFileTypes:G,MaxfileSize:M,FileName:i,ChangeFile:X,FileLabel:"Attachment",width:"100%",height:"52px",FilePath:u.length>0?u.FileName:"",errorMessage:"",isMandatory:!0}),T&&e.jsx(l,{sx:{mt:1,position:"absolute",bottom:"-25px"},children:e.jsx(he,{Error:T})})]})})]})})]})}),e.jsx(l,{sx:{backgroundColor:"white",pl:3.8,pr:3.8,mt:2},children:u.length>0?e.jsx(ve,{HeaderArray:R,ItemList:u,clickDelete:q,clickView:Q}):e.jsx(L,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."})}),e.jsxs(ge,{sx:{py:2,px:3},children:[e.jsx(E,{color:"error",onClick:f,children:"Cancel"}),e.jsx(E,{onClick:W,sx:{color:"green","&:hover":{color:"green",backgroundColor:Ie[100]}},children:"Save"})]})]})};export{Ne as default};
