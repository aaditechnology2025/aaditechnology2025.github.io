import{u as V,h as J,c as K,r,w as q,x as G,c1 as Q,S as W,j as e,B as n,F as X,H as Z,I as ee,J as x,K as te,T as se,ai as ae,aj as oe,ak as re,al as b,am as o,an as ne,bb as ie}from"./index-d5YOjbb6.js";import{h as s}from"./moment-CaEEsv53.js";import{M as ce}from"./MonthSelector-CcQskbx0.js";import{L as le}from"./Legend-p9-_07Am.js";import{D as w}from"./DotLegendStyled-B7Xptujc.js";import"./ArrowRight-DTTKgIal.js";function De(){const S=V(),C=J(),i=K(t=>t.Dashboard.staffBirthdayData);r.useEffect(()=>{console.log("staffBirthdayList",i)},[i]);const B=sessionStorage.getItem("AcademicYearId"),T=localStorage.getItem("localSchoolId"),[l,k]=r.useState({selectedDate:""}),[A,g]=r.useState(),[I,N]=r.useState(),[m,Y]=r.useState(),v=new Date().getMonth()+1;function d(t){const a=t||new Date,j=s(a).format("MMMM"),O=s(a).month(),h=s(a).year();g(h);const U=`${j}-${h}`;k({selectedDate:U}),g(h),N(j),Y(O+1)}r.useEffect(()=>{d()},[]);const L=()=>{const{selectedDate:t}=l,a=s(t,"MMMM-YYYY").subtract(1,"month");d(a.toDate())},E=()=>{const{selectedDate:t}=l,a=s(t,"MMMM-YYYY").add(1,"month");d(a.toDate())},F={asMonth:m,asAcademicyearId:B,asSchoolId:T,year:A};r.useState(!0);let{assignedDate:p}=q();p=G(p);const[f,de]=r.useState([]);i.map((t,a)=>{f.push(t.BirthDate)}),s().format("DD MMM");const D=s().toDate();s().format("DD"),s(D).format("MMM"),s(D).format("MMM");const u=s().format("DD MMM"),P=s(u,"DD MMM").valueOf(),z=1e3*60*60*24,H=P+z,M=s(H);M.format("DD"),M.format("MMM");const _=f,$=u;let c;_.map(t=>{s(t).diff(s($,"DD MMM"),"days")>0&&(c?s(t).diff(s(c),"days")<2&&(c=t):c=t)}),r.useEffect(()=>{S(Q(F))},[I]);const y=W(),R=[{id:1,Name:"Upcoming Birthday",Value:e.jsx(n,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(w,{className:y.border,style:{background:"#e9a69a"}})})},{id:2,Name:"Past Birthday",Value:e.jsx(n,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(w,{className:y.border,style:{background:"#C0C0C0"}})})}];return e.jsxs(n,{sx:{px:2},children:[e.jsx(X,{navLinks:[{title:"Staff Birthdays",path:" "}],rightActions:e.jsx(n,{children:e.jsx(Z,{title:"List of the school staff birthdays.",children:e.jsx(ee,{sx:{color:"white",backgroundColor:x[500],height:"36px !important",":hover":{backgroundColor:x[600]}},children:e.jsx(te,{})})})})}),m==v&&e.jsx(n,{sx:{background:"white",p:1,mb:2},children:e.jsx(le,{LegendArray:R})}),e.jsx(ce,{date:l.selectedDate,PrevDate:L,NextDate:E,Close:void 0}),i.length===0?e.jsx(n,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(se,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No birthdays are available."})}):e.jsx(e.Fragment,{children:e.jsx(n,{sx:{backgroundColor:"white",p:2},children:e.jsx(ae,{component:n,children:e.jsxs(oe,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:[e.jsx(re,{children:e.jsxs(b,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsx(o,{sx:{textTransform:"capitalize",color:"white",py:1.5},children:e.jsx("strong",{children:"Name"})}),e.jsx(o,{sx:{textAlign:"center",textTransform:"capitalize",color:"white",py:1.5},children:e.jsx("strong",{children:"DOB"})}),e.jsx(o,{sx:{textAlign:"center",textTransform:"capitalize",color:"white",py:1.5},children:e.jsx("strong",{children:"Designation"})}),e.jsx(o,{sx:{textTransform:"capitalize",color:"white",py:1.5},children:e.jsx("strong",{children:"Email Address"})}),e.jsx(o,{sx:{whiteSpace:"nowrap",textAlign:"center",textTransform:"capitalize",color:"white",py:1.5},children:e.jsx("strong",{children:"Mobile Number"})})]})}),i.map((t,a)=>e.jsx(ne,{children:e.jsxs(b,{sx:{background:t.IsHighlight===1?"#EFDCC9":t.IsHighlight===2?"#d3d3d3":`${C.colors.gradients.pink1}`},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",py:.5},children:[e.jsx(ie,{alt:t.Name,src:`data:image/png;base64,${t.BinaryPhotoImage}`,sx:{backgroundColor:x[500],width:40,height:40,"& img":{objectFit:"contain"},mr:1}}),e.jsx("span",{style:{whiteSpace:"nowrap"},children:t.Name})]}),e.jsx(o,{sx:{py:.5,textAlign:"center",whiteSpace:"nowrap"},children:t.BirthDate}),e.jsx(o,{sx:{py:.5,textAlign:"center"},children:t.Designation}),e.jsx(o,{sx:{py:.5},children:t.EmailAddress}),e.jsx(o,{sx:{py:.5,textAlign:"center"},children:t.MobileNumber})]})}))]})})})})]})}export{De as default};
