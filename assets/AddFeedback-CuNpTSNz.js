import{j as e,a9 as L,B as t,cf as T,u as D,r as d,c as j,t as V,fx as z,fy as M,n as Y,q as I,fz as G,G as x,fA as P}from"./index-d5YOjbb6.js";import{u as U}from"./formik.esm-DT8TU67t.js";import{E as p}from"./Errormessage-RPRSgLGN.js";import{N as W}from"./Note-DS5-MtV-.js";import{F as q,B as S}from"./ButtonStyle-DaPKUawX.js";import{R as H}from"./RadioGroup-CytjzwBe.js";import{R as O}from"./Radio-CCPcjMAp.js";import{B as $}from"./BackButton-BE5_8L9j.js";import{D as J}from"./Dropdown-Bt3qBn1S.js";import{P as K}from"./PageHeader-DqqjGq3-.js";import{L as Q}from"./CardStyle-B9qFmFtz.js";import"./FormGroup-XtcIGgvX.js";import"./Card-BrM9kpJu.js";const X=({Array:n,ClickRadio:m,defaultValue:c="1",Label:u})=>e.jsx(e.Fragment,{children:e.jsx(L,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"row"},children:[e.jsx(T,{id:"demo-controlled-radio-buttons-group",children:u}),e.jsx(H,{value:c,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",onChange:o=>m(o.target.value),children:e.jsx(t,{sx:{display:"flex",flexDirection:"row",ml:"10px",mt:"-10px"},children:n.map((o,i)=>e.jsx(q,{value:o.Value,control:e.jsx(O,{size:"small"}),label:o.Name},i))})})]})})}),ce=()=>{const n=D(),m=localStorage.getItem("SchoolName"),c=sessionStorage.getItem("AcademicYearId"),u=localStorage.getItem("localSchoolId"),o=sessionStorage.getItem("Id"),[i,g]=d.useState("1"),[f,b]=d.useState("1"),[C,k]=d.useState(""),h=j(s=>s.FeedBack.AddFeedbackList),y=j(s=>s.FeedBack.Loading),v=[{Name:"School",Value:"1"},{Name:"Software",Value:"2"}],F=[{Name:"General Feedback",Value:"1"},{Name:"Concern or Issue",Value:"2"},{Name:"Testimonial",Value:"3"}],N=["Dear User,","Thank you for using Software for "+m+". You are a valued user, and we are committed to providing the best possible services that will fulfill the need of our users. Your valuable feedback is very important to us which encourage gets us to serve you better! If you have any suggestions related to school or software, queries, or even a testimonial you would like to share, please submit them below."],E=s=>{b(s)},B=s=>{g(s)},w=s=>{const r=s.target.value.replace(/[^a-z]/gi,"");k(r)},a=U({initialValues:{EmailId:"",Name:"",Comments:"",SchoolSoftware:"1"},onReset:()=>{g("1"),b("1")},onSubmit:(s,{resetForm:r})=>{A(),r()},validate:s=>{const r=/^\S+@\S+\.\S+$/,l={};return s.Comments||(l.Comments="Please enter feedback message."),s.Name||(l.Name="Name should not be blank."),s.EmailId?r.test(s.EmailId)||(l.EmailId="Invalid email address"):l.EmailId="Email Id should not be blank.",l}}),R={aiSchoolId:u,aiAcademicYrId:c,aiFeedbackfor:i=="1"?"School":"Software",aiUserId:o,aiFeedbackDescription:a.values.Comments,aiFeedbackTypeId:f,aiInsertedById:o,aiemail:a.values.EmailId,aiUserName:a.values.Name,asMailSubject:"",asAdminMailAddress:"",asLogin:""};d.useEffect(()=>{h!==null&&V.success(h.Message,{toastId:"success1"}),n(z())},[h.Message]);const A=()=>{n(P(R))};return e.jsxs(e.Fragment,{children:[e.jsx(K,{heading:"Add Feedback",subheading:""}),e.jsx($,{FromRoute:"/Student/Feedback"}),e.jsx(t,{sx:{px:2},children:e.jsx(M,{in:!0,timeout:1500,children:e.jsxs(Q,{children:[e.jsx(W,{NoteDetail:N}),y&&e.jsx(Y,{}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsx(X,{Array:v,ClickRadio:B,defaultValue:i,Label:"Feedback for :"}),e.jsx(J,{Array:F,handleChange:E,defaultValue:f}),e.jsx(I,{id:"standard-basic",name:"Name",variant:"standard",fullWidth:!0,label:"Name",onBlur:a.handleBlur,value:C&&a.values.Name,onChangeCapture:w,onChange:a.handleChange,sx:{mt:"5px"}}),e.jsx(t,{sx:{mt:"10px"},children:a.touched.Name&&a.errors.Name?e.jsx(p,{Error:a.errors.Name}):null}),e.jsx(I,{fullWidth:!0,margin:"normal",label:"Email Id",name:"EmailId",type:"text",variant:"standard",value:a.values.EmailId,onChange:a.handleChange,onBlur:a.handleBlur,sx:{mt:"5px"}}),e.jsxs(t,{sx:{mt:"3px"},children:[" ",a.touched.EmailId&&a.errors.EmailId?e.jsx(p,{Error:a.errors.EmailId}):null]}),e.jsx(G,{name:"Comments",value:a.values.Comments,onChange:a.handleChange,onBlur:a.handleBlur,"aria-label":"empty textarea",placeholder:"Comments",minRows:4,style:{width:"100%",marginTop:"5px"},nonce:void 0,onResize:null,onResizeCapture:void 0}),e.jsxs(t,{sx:{mt:"3px"},children:[" ",a.touched.Comments&&a.errors.Comments?e.jsx(p,{Error:a.errors.Comments}):null]}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,sx:{marginTop:"4px"},children:e.jsx(S,{onChange:a.handleChange,type:"submit",fullWidth:!0,color:"primary",children:"Submit"})}),e.jsx(x,{item:!0,xs:6,sx:{marginTop:"4px"},children:e.jsx(S,{fullWidth:!0,color:"secondary",type:"reset",onClick:a.handleReset,children:"Reset"})})]})]})]})})})]})};export{ce as default};
