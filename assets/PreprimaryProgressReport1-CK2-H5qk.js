import{u as Pe,r as a,A as Ce,ag as De,au as we,c as i,ly as Ye,ll as Re,no as ve,np as Te,ns as ke,j as e,B as m,n as Oe,F as Fe,p as w,G as x,bR as p,H as b,I,bv as S,ab as Ne,J as Y,K as B,aJ as N,T as G,ai as Ge,aj as z,ak as Ue,al as U,am as j,an as V}from"./index-d5YOjbb6.js";import{d as H}from"./Print-BBUJr72l.js";import{T as Ee}from"./TAttendanceCommonPageheader-Ba_1Sm6K.js";import{S as We,a as Xe,C as Le,N as Be,X as ze}from"./XseedRemarks-C0M1Agl6.js";const qe=()=>{const h=Pe(),[o,_]=a.useState("-1"),[y,R]=a.useState(),[d,v]=a.useState(),M=Ce(),$=De(),{state:t}=$,[J,A]=a.useState(""),[K,P]=a.useState("");let l=we(164);const C=Number(sessionStorage.getItem("AcademicYearId")),f=Number(localStorage.getItem("localSchoolId"));Number(localStorage.getItem("UserId"));const T=Number(sessionStorage.getItem("StandardDivisionId")),q=i(s=>s.PreprimaryProgressReport.ISAllPrimaryClassTeacherss).filter(s=>s.Is_PrePrimary==="Y"),c=i(s=>s.PreprimaryProgressReport.ISlistStudentNameDetails),n=i(s=>s.PreprimaryProgressReport.ISlistAssessmentDetailss),Q=i(s=>s.PreprimaryProgressReport.Loading),E=i(s=>s.PreprimaryProgressReport.ISAssessmentPublishStatus),Z=E.map(s=>s.AssessmentPublishStatus),ee=E.map(s=>s.StudentWiseAssessmentPublishStatus);i(s=>s.PreprimaryProgressReport.ISFillStandardwiseSubjects);const se=i(s=>s.PreprimaryProgressReport.ISFillSubjectSections),te=i(s=>s.PreprimaryProgressReport.ISFillSchoolDetails),re=i(s=>s.PreprimaryProgressReport.ISFillGradeDetails),ae=i(s=>s.PreprimaryProgressReport.ISFillXseedRemarks),ie=i(s=>s.PreprimaryProgressReport.ISFillNonXseedSubjectGrades),k=i(s=>s.PreprimaryProgressReport.ISFillStudentDetails),W=i(s=>s.PreprimaryProgressReport.ISFillStudentAttendance),le=re.filter(s=>s.ConsideredAsAbsent!=="1"&&s.ConsideredAsExempted!=="1").sort((s,r)=>parseInt(s.SortOrder)-parseInt(r.SortOrder)),ne=i(s=>s.PreprimaryProgressReport.ISFillStudentsLearningOutcomes),oe=i(s=>s.PreprimaryProgressReport.ISFillStudentsLearningOutcomeObservations),de=i(s=>s.ProgressReportNew.IsAcademicYearsOfStudent),ce={asSchoolId:f,asAcadmicYearId:t.AcademicYear?t.AcademicYear:C,asTeacher_id:0},ue={asSchoolId:f,asAcademicYearId:t.AcademicYear?t.AcademicYear:C,asStandardDivId:l=="Y"?o:t.GetOldStudentDetails.StandardDivisionId?t.GetOldStudentDetails.StandardDivisionId:T,asStudentId:Number(t.GetOldStudentDetails.StudentId)?Number(t.GetOldStudentDetails.StudentId):0},me={asSchoolId:f,asAcademicYearId:t.AcademicYear?t.AcademicYear:C,asStandardDivisionId:l=="Y"?o:t.GetOldStudentDetails.StandardDivisionId?t.GetOldStudentDetails.StandardDivisionId:T,asYearwiseStudentId:Number(t.GetOldStudentDetails.StudentId)?Number(t.GetOldStudentDetails.StudentId):y,asAssessmentId:d},xe={aiSchoolId:f.toString(),asAcademicYearId:C.toString(),aiStudentId:t.StudentId},[D,pe]=a.useState(t.AcademicYear),Se=s=>{pe(s)};a.useEffect(()=>{h(Ye(xe))},[t.StudentId]);const X=i(s=>s.ProgressReportNew.IsXseedApplicable),he={asSchoolId:Number(f),asAcadmicYearId:Number(D),asStandardDivisionId:t.GetOldStudentDetails.StandardDivisionId,asStandardId:t.GetOldStudentDetails.StandardId},fe=t.StudentId,ge=t.selectTeacher,be=t==null?void 0:t.standardId;a.useEffect(()=>{h(Re(he))},[D,t.GetOldStudentDetails.StandardDivisionId,t.GetOldStudentDetails.StandardId]);const Ie=!0;a.useEffect(()=>{X||M("/RITeSchool/Teacher/ProgressReportNew",{state:{AcademicYear:D,newstudntid:fe,Newvalue:Ie,TeacherID:ge,receivedStandardID:be,fromInternal:!0}})},[X]);const[He,u]=a.useState(!!t.USIsXseedApplicable),je=s=>{_(s),P(""),u(!1)},ye=s=>{R(s),u(!1)},O=s=>{v(s),A(""),u(!1)},Ae=s=>{u(!0),d=="0"&&A("Assessment should be selected."),o=="-1"&&l=="Y"&&P("Class teacher should be selected."),o!=="0"&&l=="Y"&&P(""),o==""&&u(!1),d==""&&u(!1),y==""&&u(!1),d!=="0"&&A("")},F=a.useRef(null),L=()=>{let s=!1;if(d==="0"&&(A("Assessment should be selected."),s=!0),o==="-1"&&l==="Y"&&(P("Class teacher should be selected."),s=!0),F.current&&!s){const r=F.current.innerHTML,g=window.open("","","height=600,width=800");g.document.write("<html><head><title>Print</title>"+`
                <style>
                  body {
                    font-family: 'Roboto', sans-serif;
                    margin: 0;
                    padding: 20px;
                  }
                  h1, h2, h3, h4 {
                    margin: 0 0 10px;
                    font-family: 'Roboto', sans-serif;
                  }
                  table {
                    width: 100%;
                    border-collapse: collapse;
                  }
                  table, th, td {
                    border: 1px solid black;
                  }
                  th, td {
                    padding: 8px;
                    text-align: center;
                  }
                  .MuiTypography-root {
                    font-family: 'Roboto', sans-serif;
                    font-size: 16px;
                    margin-bottom: 8px;
                  }
                  .MuiTableCell-root {
                    font-family: 'Roboto', sans-serif;
                  }
                  .custom-typography {
                    font-family: 'Roboto', sans-serif;
                    color: #38548a;
                    font-size: 24px;
                    margin-top: 16px;
                    text-align: left;
                  }
                </style>
            `+"</head><body>"),g.document.write(r),g.document.write("</body></html>"),g.document.close(),g.print()}};return a.useEffect(()=>{h(ve(ce))},[t.AcademicYear]),a.useEffect(()=>{h(Te(ue))},[o,t.AcademicYear,t.GetOldStudentDetails.StudentId,t.GetOldStudentDetails.StandardDivisionId]),a.useEffect(()=>{h(ke(me))},[d,y,o,T,t.GetOldStudentDetails.StandardDivisionId,t.GetOldStudentDetails.StudentId,t.AcademicYear]),a.useEffect(()=>{c.length>0&&R(c[0].Value)},[c]),a.useEffect(()=>{c.length>0&&t.USIsXseedApplicable&&R(c[1].Value)},[c]),a.useEffect(()=>{n.length>0&&(t.USIsXseedApplicable?v(n[n.length-1].Value):v(n[0].Value))},[n,t.USIsXseedApplicable]),e.jsxs(m,{sx:{px:2},children:[Q&&e.jsx(Oe,{}),!t.USIsXseedApplicable&&e.jsx(Fe,{navLinks:[{title:"Pre Primary Progress Report",path:"/RITeSchool/Teacher/PreprimaryProgressReport"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(w,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(x,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:l=="Y"?e.jsx(p,{ItemList:q,sx:{minWidth:"250px"},onChange:je,defaultValue:o,label:"Class Teacher ",size:"small",mandatory:!0}):e.jsx("span",{})}),e.jsx(x,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(p,{ItemList:c,sx:{minWidth:"250px"},onChange:ye,defaultValue:y,label:"Student ",size:"small"})}),e.jsx(x,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:l=="Y"?e.jsx(p,{ItemList:n,sx:{minWidth:"250px"},onChange:O,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{})}),e.jsx(x,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:l=="N"&&n.length>1?e.jsx(p,{ItemList:n,sx:{minWidth:"250px"},onChange:O,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{})}),e.jsxs(w,{direction:{xs:"row",sm:"row"},spacing:1,alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsx(m,{children:e.jsx(b,{title:"Show",children:e.jsx(I,{sx:{color:"white",backgroundColor:S[500],"&:hover":{backgroundColor:S[600]}},onClick:Ae,children:e.jsx(Ne,{})})})}),e.jsx(b,{title:"Displays xseed progress report of selected assessment.",children:e.jsx(I,{sx:{color:"white",backgroundColor:Y[500],height:"36px !important",":hover":{backgroundColor:Y[600]}},children:e.jsx(B,{})})}),e.jsx(m,{children:e.jsx(b,{title:"Print Preview",children:e.jsx(I,{sx:{color:"white",backgroundColor:S[500],"&:hover":{backgroundColor:S[600]}},onClick:L,children:e.jsx(H,{})})})})]})]})})}),t.USIsXseedApplicable&&e.jsx(Ee,{navLinks:[{title:"Progress Report",path:"/RITeSchool/Teacher/ProgressReportNew"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(w,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",spacing:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(x,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(p,{ItemList:de,sx:{minWidth:"200px"},onChange:Se,defaultValue:D,label:"Academic Years ",size:"small"})}),e.jsx(x,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:l=="N"&&n.length>1?e.jsx(p,{ItemList:n,sx:{minWidth:"200px"},onChange:O,defaultValue:d,label:"Assessment ",size:"small",mandatory:!0}):e.jsx("span",{})}),e.jsxs(w,{direction:{xs:"row",sm:"row"},spacing:1,alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsx(b,{title:"Displays xseed progress report of selected assessment.",children:e.jsx(I,{sx:{color:"white",backgroundColor:Y[500],height:"36px !important",":hover":{backgroundColor:Y[600]}},children:e.jsx(B,{})})}),e.jsx(b,{title:"Print Preview",children:e.jsx(I,{sx:{color:"white",backgroundColor:S[500],"&:hover":{backgroundColor:S[600]}},onClick:L,children:e.jsx(H,{})})})]})]})})}),e.jsx(N,{Error:J}),e.jsx(N,{Error:K}),t.USIsXseedApplicable&&e.jsx(N,{Error:`You are viewing data of old academic year ${t.Acadamicyearname}.`}),e.jsx("br",{}),l=="Y"&&o=="0"||d=="0"?e.jsx("div",{}):Z=="N"&&ee=="N"?e.jsx(G,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"Assessment result is not available for this student."})}):e.jsx(m,{ref:F,children:k.length>0?k.map(s=>e.jsxs(m,{border:"1px solid grey",mb:4,sx:{px:2,background:"white"},children:[e.jsx(We,{USFillSchoolDetails:te}),e.jsx(Xe,{USFillStudentDetails:k.filter(r=>r.YearWiseStudentId==s.YearWiseStudentId),presentCount:W.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId&&r.IsPresent=="true").length,totalCount:W.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId).length}),e.jsxs("div",{children:[e.jsx(G,{variant:"h4",textAlign:"left",color:"#38548a",mt:2,children:"Key to Curricular and Co-Curricular"}),e.jsx(Ge,{component:m,children:e.jsxs(z,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:[e.jsx(Ue,{children:e.jsxs(U,{sx:{background:r=>r.palette.secondary.main,color:r=>r.palette.common.white},children:[e.jsx(j,{sx:{textTransform:"capitalize",color:r=>r.palette.common.white,py:1},children:"Grade Name"}),e.jsx(j,{sx:{textTransform:"capitalize",color:r=>r.palette.common.white,py:1},children:"Description"})]})}),e.jsx(V,{children:le.map(r=>e.jsxs(U,{children:[e.jsx(j,{sx:{py:1},children:r.Name}),e.jsx(j,{sx:{py:1},children:r.Description})]},r.GradeId))})]})}),e.jsx(m,{mt:1,children:e.jsx(z,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:e.jsx(V,{children:e.jsx(U,{sx:{bgcolor:"#F0F0F0",border:"1px solid lightgrey"},children:e.jsxs(j,{sx:{textAlign:"left",py:1,color:"black",p:1},children:[e.jsx("b",{children:"Note :  "})," Ab - Absent        Ex - Exempted "]})})})})})]}),e.jsx(Le,{USFillStudentsLearningOutcomes:ne.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId),USFillSubjectSections:se,FillStudentsLearningOutcomeObservations:oe}),e.jsx(Be,{USFillNonXseedSubjectGrades:ie.filter(r=>r.YearwiseStudentId==s.YearWiseStudentId)}),e.jsx(ze,{USFillXseedRemarks:ae.filter(r=>r.YearWiseStudentId==s.YearWiseStudentId)})]},s.YearWiseStudentId)):null}),l=="N"&&n.length<2?e.jsx(G,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"Published assessments are not available."})}):e.jsx("span",{})]})};export{qe as default};
