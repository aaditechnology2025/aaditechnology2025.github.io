import{c6 as ce,c7 as de,s as me,aP as T,r as o,c9 as he,aO as xe,j as e,ca as ge,cb as ue,u as pe,ag as Ce,E as je,h as ye,bt as fe,c as S,p6 as U,p7 as $,t as H,p8 as be,p9 as Ie,B as c,F as Pe,H as u,I as p,J as L,bv as Q,pa as we,L as q,G as f,q as J,T as E,az as Y,as as K,at as X,ai as Me,aj as Se,ak as Te,al as Z,am as d,an as Ge,ay as ke,pb as ve,pc as Ae}from"./index-d5YOjbb6.js";import{d as _e}from"./SaveAs-CsLzPj7T.js";import{Q as Ne}from"./QuestionMark-C2Y4lgD8.js";import{C as De}from"./Card-BrM9kpJu.js";import{C as Ue}from"./CardContent-CKN_wOTn.js";function Ee(s){return ce("MuiCardMedia",s)}de("MuiCardMedia",["root","media","img"]);const Re=["children","className","component","image","src","style"],ze=s=>{const{classes:a,isMediaComponent:m,isImageComponent:n}=s;return ue({root:["root",m&&"media",n&&"img"]},Ee,a)},Be=me("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(s,a)=>{const{ownerState:m}=s,{isMediaComponent:n,isImageComponent:r}=m;return[a.root,n&&a.media,r&&a.img]}})(({ownerState:s})=>T({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},s.isMediaComponent&&{width:"100%"},s.isImageComponent&&{objectFit:"cover"})),Oe=["video","audio","picture","iframe","img"],Ve=["picture","img"],Fe=o.forwardRef(function(a,m){const n=he({props:a,name:"MuiCardMedia"}),{children:r,className:G,component:h="div",image:l,src:k,style:b}=n,I=xe(n,Re),x=Oe.indexOf(h)!==-1,C=!x&&l?T({backgroundImage:`url("${l}")`},b):b,P=T({},n,{component:h,isMediaComponent:x,isImageComponent:Ve.indexOf(h)!==-1}),i=ze(P);return e.jsx(Be,T({className:ge(i.root,G),as:h,role:!x&&l?"img":void 0,ref:m,style:C,ownerState:P,src:x?l||k:void 0},I,{children:r}))}),We=Fe,Je=()=>{const s=pe(),a=Ce(),{showAlert:m,closeAlert:n}=o.useContext(je),[r,G]=o.useState(""),[h,l]=o.useState(""),[k,b]=o.useState(""),[I,x]=o.useState(!0),[C,P]=o.useState(!1),[i,ee]=o.useState(20),[v,R]=o.useState(1),te=[20,50,100,200],se=ye(),oe=fe(se.breakpoints.down("sm")),w=Number(localStorage.getItem("localSchoolId")),g=S(t=>t.PhotoGalllary.IGetAllImages),M=S(t=>t.PhotoGalllary.IGetPhotoCount),A=S(t=>t.PhotoGalllary.IUpdateCommentMsg),_=S(t=>t.PhotoGalllary.IDeletePhotoMsg);o.useEffect(()=>{const t=a.state;t!=null&&t.galleryName&&G(t.galleryName)},[a.state]);const N=(v-1)*i,z=N+i,D={asSchool_Id:w,asGallery_Name:r,asstartIndex:N,asendIndex:z};o.useEffect(()=>{s(U(D))},[r,N,z]);const B={asSchool_Id:w,asGallery_Name:r};o.useEffect(()=>{s($(B))},[r]);const ae=()=>{const t={asSchool_Id:w,asGallery_Id:Number(k),ascomment:h};s(ve(t)),x(!0),l("")};o.useEffect(()=>{A!==""&&(H.success(A),s(be()),s(U(D)))},[A,g]);const O=t=>{if(!t)return;const y={asSchool_Id:w,asGallery_Id:t};m({title:"Please Confirm",message:"Are you sure you want to delete this photo?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{n()},onConfirm:()=>{s(Ae(y)),n()}})};o.useEffect(()=>{_!==""&&(H.success(_),s(Ie()),s(U(D)),s($(B)))},[_,g,M]);const V=(t,y)=>{l(t),b(y),x(!1)},j=o.useMemo(()=>Array.isArray(M)?M.reduce((t,y)=>{const W=Number(y.Cnt);return isNaN(W)?t:t+W},0):0,[M]),ne=t=>{R(t)},re=t=>{ee(parseInt(t.target.value,10)),R(1)},le=(v-1)*i+1,F=Math.min(v*i,j),ie=Math.ceil(j/i);return e.jsxs(c,{px:2,children:[e.jsx(Pe,{navLinks:[{title:"Photo Video Gallery",path:"/RITeSchool/Teacher/PhotoVideoGalleryBaseScreen"},{title:" View Photo Gallery",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(u,{title:"Create new photo galleries or add photos to existing gallery. You can also view all gallery photos by clicking on Slideshow.",children:e.jsx(p,{sx:{color:"white",backgroundColor:L[500],"&:hover":{backgroundColor:L[600]}},children:e.jsx(Ne,{})})}),e.jsx(u,{title:C?"Switch to Card View":"Switch to Table View",children:e.jsx(p,{onClick:()=>P(!C),sx:{color:"white",backgroundColor:Q[500],"&:hover":{backgroundColor:Q[600]}},children:e.jsx(we,{})})}),e.jsx(u,{title:"Update",children:e.jsx(p,{onClick:ae,disabled:I,sx:{color:"white",backgroundColor:q[500],"&:hover":{backgroundColor:q[600]}},children:e.jsx(_e,{})})})]})}),e.jsxs(c,{sx:{backgroundColor:"white"},p:2,children:[e.jsxs(f,{container:!0,spacing:2,sx:{backgroundColor:"white"},alignItems:"center",justifyContent:"space-between",children:[e.jsx(f,{item:!0,xs:12,sm:6,md:4,children:e.jsx(J,{value:r,variant:"outlined",fullWidth:!0,label:"Gallery Name"})}),e.jsx(f,{item:!0,xs:8,children:e.jsx(J,{label:"Comment",variant:"outlined",fullWidth:!0,value:h,onChange:t=>l(t.target.value),disabled:I})})]}),j>0?e.jsx(c,{style:{flex:1,textAlign:"center"},children:e.jsxs(E,{variant:"subtitle1",sx:{margin:"16px 0",textAlign:"center"},children:[e.jsxs(c,{component:"span",fontWeight:"fontWeightBold",children:[le," to ",F]})," ","out of"," ",e.jsx(c,{component:"span",fontWeight:"fontWeightBold",children:j})," ",j===1?"record":"records"]})}):e.jsx("span",{children:" "}),g&&g.length===0?e.jsx(c,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(E,{variant:"h6",align:"center",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No photo available."})}):e.jsx(c,{children:oe||!C?e.jsx(f,{container:!0,spacing:2,mt:1,children:g.map(t=>e.jsx(f,{item:!0,xs:12,sm:4,children:e.jsxs(De,{children:[e.jsx(We,{component:"img",height:"140",image:t.Image_Path,alt:t.title}),e.jsxs(Ue,{children:[e.jsx(E,{variant:"body2",color:"text.secondary",children:e.jsx("strong",{children:t.Comment})}),e.jsxs(c,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsx(u,{title:"Edit",children:e.jsx(p,{color:"primary",onClick:()=>V(t.Comment,t.Gallery_Id),children:e.jsx(Y,{})})}),e.jsx(u,{title:"Delete",children:e.jsx(p,{sx:{color:"primary","&:hover":{color:"red",backgroundColor:K[100]}},onClick:()=>O(t.Gallery_Id),children:e.jsx(X,{})})})]})]})]})},t.Image_Path))}):e.jsx(Me,{sx:{mt:2},children:e.jsxs(Se,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:[e.jsx(Te,{children:e.jsxs(Z,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsxs(d,{sx:{textTransform:"capitalize",color:"white",py:2},children:[e.jsx("strong",{children:"Images"})," "]}),e.jsx(d,{sx:{textTransform:"capitalize",color:"white",py:2},children:e.jsx("strong",{children:"Comments"})}),e.jsx(d,{sx:{textTransform:"capitalize",color:"white",py:2,textAlign:"center"},children:e.jsx("strong",{children:"Edit"})}),e.jsx(d,{sx:{textTransform:"capitalize",color:"white",py:2,textAlign:"center"},children:e.jsx("strong",{children:"Delete"})})]})}),e.jsx(Ge,{children:g.map(t=>e.jsxs(Z,{children:[e.jsx(d,{sx:{textTransform:"capitalize",py:1},children:e.jsx("img",{src:t.Image_Path,alt:t.title,style:{width:50,height:50}})}),e.jsx(d,{sx:{textTransform:"capitalize",py:1},children:t.Comment}),e.jsx(d,{sx:{textTransform:"capitalize",py:1,textAlign:"center"},children:e.jsx(u,{title:"Edit",children:e.jsx(p,{color:"primary",onClick:()=>V(t.Comment,t.Gallery_Id),children:e.jsx(Y,{})})})}),e.jsx(d,{sx:{textTransform:"capitalize",py:1,textAlign:"center"},children:e.jsx(u,{title:"Delete",children:e.jsx(p,{sx:{color:"primary","&:hover":{color:"red",backgroundColor:K[100]}},onClick:()=>O(t.Gallery_Id),children:e.jsx(X,{})})})})]},t.id))})]})})}),(F>19||g.length>19)&&C&&e.jsx(ke,{rowsPerPage:i,ChangeRowsPerPage:re,rowsPerPageOptions:te,PageChange:ne,pagecount:ie})]})]})};export{Je as default};
