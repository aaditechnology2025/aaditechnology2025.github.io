import{j as e,de as C,ai as A,B as c,aj as k,ak as v,al as f,am as a,an as M,as as i,u as U,w as z,x as F,r as p,aB as g,c as h,k3 as O,F as B,H as G,I as N,J as D,K as P,G as o,q as u}from"./index-d5YOjbb6.js";import{R as Q}from"./Requisioneditlist-B57dZprV.js";const E=({DateValue:r,onDateChange:n,label:t,size:d})=>e.jsx(e.Fragment,{children:e.jsx(C,{value:r?new Date(r):null,onChange:n,format:"dd MMM yyyy",label:t?e.jsx(e.Fragment,{children:t}):"Select Date",views:["year","month","day"],slotProps:{textField:{variant:"outlined",fullWidth:!0,size:d||"medium"}}})});function L({ItemList:r,HeaderArray:n}){return e.jsx(A,{component:c,children:e.jsxs(k,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:[e.jsx(v,{sx:{overflow:"auto"},children:e.jsx(f,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:n.map((t,d)=>e.jsx(a,{sx:{textTransform:"capitalize",color:x=>x.palette.common.white,py:1},children:e.jsx("div",{style:{display:"flex",alignItems:"left",gap:1,justifyContent:t.Header.includes("Remark Template")?"flex-start":"left"},children:e.jsx("b",{children:t.Header})})},d))})}),e.jsx(M,{children:r.map(t=>e.jsxs(f,{children:[e.jsx(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:t.ItemCode}),e.jsx(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:t.ItemName}),e.jsx(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:t.CurrentStock}),e.jsxs(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:[t.ItemQty," ",t.UOMUnit]}),e.jsxs(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:[t.ItemOrgQty," ",t.UOMUnit]}),e.jsxs(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:[t.IssueQty," ",t.UOMUnit]}),e.jsxs(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:[t.ReturnQty," ",t.UOMUnit]}),e.jsxs(a,{sx:{textTransform:"capitalize",textAlign:"left",color:t.ItemStatus==="Denied"?i[500]:""},children:[t.CancelQty," ",t.UOMUnit]})]},t.ItemID))})]})})}const J=()=>{const r=U(),{ViewId:n}=z(),t=F(n),[d,x]=p.useState(g(new Date)),b=(s,m)=>{const j=new Date(s);return j.setDate(s.getDate()+m),g(j)};p.useEffect(()=>{const m=b(new Date,10);x(m)},[]),Number(sessionStorage.getItem("AcademicYearId"));const y=Number(localStorage.getItem("localSchoolId"));Number(localStorage.getItem("UserId"));const l=h(s=>s.SliceAddRequisition.ISGetRequisitionDetails),I=h(s=>s.SliceAddRequisition.ISGetRequisitionDetails1);h(s=>s.SliceAddRequisition.ISGetRequisitionDetails2);const R=l.map(s=>s.RequisitionName),S=l.map(s=>s.RequisitionDescription),q=l.map(s=>s.ActionComment),w=[{Id:1,Header:"Item Code"},{Id:2,Header:"Item Name"},{Id:3,Header:"Current Stock"},{Id:4,Header:"Item Quantity"},{Id:5,Header:"Original Qty"},{Id:6,Header:"Issued Qty"},{Id:7,Header:"Returned Qty"},{Id:8,Header:"Cancelled Qty"}],T=[{Id:1,Header:"Status Changed by"},{Id:2,Header:"Request Status"},{Id:3,Header:"Date"}],H={asSchoolId:y,asRequisitionId:Number(t),asMode:"View"};return p.useEffect(()=>{r(O(H))},[atob(n)]),e.jsxs(c,{sx:{px:2},children:[e.jsx(B,{navLinks:[{title:"Requisition",path:"/RITeSchool/Teacher/Requisition"},{title:"Requisition Details",path:"/RITeSchool/Teacher/AddRequisition"}],rightActions:e.jsx(e.Fragment,{children:e.jsx(G,{title:"Here you can create, modify, view, approve, denied requisition.",children:e.jsx(N,{sx:{color:"white",backgroundColor:D[500],height:"36px !important",":hover":{backgroundColor:D[600]}},children:e.jsx(P,{})})})})}),e.jsx(o,{item:!0,xs:12,sm:3,mb:2,children:e.jsx(u,{sx:{minWidth:{xs:"40vw",sm:"15vw"},"& .MuiInputBase-root":{height:"35px",color:"black"},"& .MuiInputLabel-root":{top:"-6px",color:"black"}},label:"Is General Requisition ? :",InputProps:{readOnly:!0,disabled:!0},variant:"outlined"})}),l.length>0?e.jsxs(c,{mb:1,sx:{p:2,background:"white"},children:[e.jsx(L,{ItemList:l,HeaderArray:w}),e.jsx("br",{}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{label:e.jsx("span",{children:"Requisition Name"}),sx:{bgcolor:"#F0F0F0",width:"100%","& .MuiInputBase-input":{cursor:"default"}},rows:3,value:R[0],fullWidth:!0,InputProps:{readOnly:!0}})}),e.jsx("br",{}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{label:e.jsx("span",{children:"Requisition Description"}),multiline:!0,rows:3,value:S[0],fullWidth:!0,sx:{"& .MuiInputBase-input":{cursor:"default"}},InputProps:{readOnly:!0}})}),e.jsx("br",{}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{label:e.jsx("span",{children:"Comment"}),multiline:!0,rows:3,value:q[0],fullWidth:!0,sx:{"& .MuiInputBase-input":{cursor:"default"}},InputProps:{readOnly:!0}})}),e.jsx("br",{}),e.jsx(o,{container:!0,spacing:2,children:e.jsx(o,{item:!0,xs:6,sm:2,md:2,lg:2,children:e.jsx(E,{DateValue:d,onDateChange:"",label:"Expiry Date",size:"small"})})})]}):null,I!=""&&l.length>0?e.jsx(c,{mb:1,sx:{p:2,background:"white"},children:e.jsx(Q,{ItemList:I,HeaderArray:T})}):e.jsx("span",{})]})};export{J as default};
