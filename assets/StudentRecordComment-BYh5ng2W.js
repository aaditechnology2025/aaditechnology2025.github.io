import{j as e,de as te,r as s,q as se,u as oe,A as ae,aB as U,E as re,c as h,iW as ne,t as E,j3 as ce,iV as G,j4 as le,j5 as me,a2 as ie,a3 as de,bl as ue,T as z,a5 as xe,G as i,aJ as Se,B as he,iU as Y,a7 as Ce,p as ge,a8 as j,as as H,L as $,j6 as be,j7 as pe,j8 as fe}from"./index-d5YOjbb6.js";const je=({DateValue:d,onDateChange:c,label:a,size:r})=>e.jsx(e.Fragment,{children:e.jsx(te,{value:d?new Date(d):null,onChange:c,format:"dd MMM yyyy",label:a?e.jsx(e.Fragment,{children:a}):"Select Date",views:["year","month","day"],slotProps:{textField:{variant:"outlined",size:r||"small"}}})}),De=({Item:d,ClickItem:c,label:a,size:r,isMandatory:l=!0})=>{const[o,u]=s.useState("");s.useEffect(()=>{const n=new Date,C=n.getHours().toString().padStart(2,"0"),g=n.getMinutes().toString().padStart(2,"0");u(`${C}:${g}`)},[]),s.useEffect(()=>{c(o)},[o,c]);const m=n=>{u(n.target.value)};return e.jsx("div",{children:e.jsx(se,{label:a?e.jsxs(e.Fragment,{children:[a," ",l&&e.jsx("span",{style:{color:"red"},children:"*"})]}):"Select Time",type:"time",value:o,onChange:m,fullWidth:!0,size:r||"medium"})})},we=({open:d,setOpen:c,ClickCloseDialogbox:a,CommentId:r,SchoolWiseStudentIdparam:l})=>{const o=oe();ae();const u=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),[m,n]=s.useState(""),[C,g]=s.useState(""),[b,D]=s.useState(""),[y,T]=s.useState(""),[v,k]=s.useState(U(new Date));s.useState(U(new Date));const[q,ve]=s.useState(""),[A,R]=s.useState(u),[L,M]=s.useState(""),{showAlert:J,closeAlert:P}=s.useContext(re),x=Number(localStorage.getItem("localSchoolId")),p=Number(sessionStorage.getItem("AcademicYearId")),f=Number(localStorage.getItem("UserId")),I=h(t=>t.StudentRecordCommentPopup.DeleteCommentMsg),N=h(t=>t.StudentRecordCommentPopup.SaveComment),w=h(t=>t.StudentRecordCommentPopup.SaveandSubmitComment),S=h(t=>t.AddStudentRecords.getstudentrecordcomment),V=h(t=>t.AddStudentRecords.listCommentDetails),B={asSchoolId:x,asSchoolwiseStudentId:Number(l),asAcademicYearId:p,asIsReadMode:"false",asUserId:f};s.useEffect(()=>{S!=null&&(k(S.Date),n(S.Comment),D(S.LectureName))},[S]),s.useEffect(()=>{if(r!=""){const t={asSchoolId:x,asSchoolwiseStudentId:Number(l),asCommentId:Number(r)};o(ne(t))}},[r]);const K=()=>{const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:Number(r),asUpdatedById:Number(f),asIsDeleteAction:!1,asAllowSubmit:!0};J({title:"Please Confirm",message:"Are you sure you want to delete this comment?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{P()},onConfirm:()=>{o(be(t)),P()}}),a()};s.useEffect(()=>{I!=""&&(E.success(I),o(ce()),o(G(B)))},[I]),s.useEffect(()=>{N!=""&&(E.success(N),o(le()),o(G(B)))},[N]),s.useEffect(()=>{w!=""&&(E.success(w),o(me()))},[w]);const O=t=>{k(t)},Q=t=>{R(t)},W=()=>{n(""),D(""),R(u)},X=()=>{W(),a()},Z=()=>{c(!1)},F=()=>{let t=!0;return m===""?(g("Comment should not be blank."),t=!1):g(""),b===""?(T("Lecture Name should not be blank."),t=!1):T(""),/^([01]\d|2[0-3]):([0-5]\d)$/.test(A)?M(""):(M("Time should be in HH:MM AM/PM format (e.g 10:00 AM)."),t=!1),t},_=()=>{if(F()){const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:0,asDate:v,asComment:m,asLectureName:b,asUpdatedById:Number(f),asIsDeleteAction:!1,asAllowSubmit:!1,asStdDivId:1344};o(pe(t))}},ee=()=>{if(F()){const t={asSchoolId:Number(x),asAcademicYearId:Number(p),asSchoolwiseStudentId:Number(l),asCommentId:0,asDate:v,asComment:m,asLectureName:b,asUpdatedById:Number(f),asIsDeleteAction:0,asAllowSubmit:1,asStdDivId:1344};o(fe(t))}};return e.jsxs(ie,{open:d,onClose:()=>c(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(de,{sx:{backgroundColor:"#324b84",position:"relative"},children:e.jsx(ue,{onClick:Z,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(z,{variant:"h3",sx:{pt:1,pl:2},children:"Student Record Comment"}),e.jsxs(xe,{children:[e.jsxs(i,{container:!0,spacing:1,alignItems:"center",children:[e.jsxs(i,{item:!0,xs:6,md:6,children:[e.jsx(je,{DateValue:v,onDateChange:O,label:"Date",size:"medium"}),e.jsx(Se,{Error:q})]}),e.jsxs(i,{item:!0,xs:6,md:6,children:[e.jsx(De,{Item:A,label:"Time",ClickItem:Q,size:"medium"}),L&&e.jsx(z,{color:"error",children:L})]})]}),e.jsxs(he,{sx:{pt:2,background:"white"},children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(Y,{rows:3,value:m,label:e.jsxs(e.Fragment,{children:["Comment ",e.jsx("span",{style:{color:"red"},children:"*"})]}),onChange:t=>n(t.target.value),sx:{width:"100%"},error:C!=="",helperText:C,inputProps:{maxLength:100}})}),e.jsx(i,{item:!0,xs:12,sx:{pt:2},children:e.jsx(Y,{rows:1,value:b,label:e.jsxs(e.Fragment,{children:["Lecture Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),onChange:t=>D(t.target.value),sx:{width:"100%"},error:y!=="",helperText:y,inputProps:{maxLength:50}})})]})]}),e.jsx(Ce,{sx:{py:2,px:3},children:e.jsx(i,{item:!0,xs:12,md:12,children:e.jsxs(ge,{direction:"row",gap:2,alignItems:"center",children:[V.length>0&&e.jsx(j,{sx:{color:"red",":hover":{backgroundColor:H[100]}},onClick:K,children:"Delete"}),e.jsx(j,{sx:{color:"red",":hover":{backgroundColor:H[100]}},onClick:X,children:"Cancel"}),e.jsx(j,{sx:{color:"green",":hover":{backgroundColor:$[100]}},onClick:ee,children:"Save and Submit"}),e.jsx(j,{sx:{color:"green",":hover":{backgroundColor:$[100]}},onClick:_,children:"Save"})]})})})]})};export{we as default};
