import{V as G,W as Q,j as e,u as E,c as P,r as o,fc as ne,fd as ie,bb as V,G as r,q as R,ai as le,aj as de,ak as ce,al as M,am as x,an as ue,B as $,T as h,P as b,h as xe,S as he,ae as Z,cI as ge,M as me,O as je,a2 as pe,Q as be,t as q,fe,ff as Se,A as ke,fg as Ie,I as ve,n as Be,m as ye}from"./index-d5YOjbb6.js";import{d as Ae}from"./ArrowCircleRightRounded-C20SA5ip.js";import{d as Ce}from"./Close-DJWwbmdJ.js";import{d as Te}from"./Replay-BNkOI0gZ.js";import{D as z}from"./DropdownAllSelect-C1tJr2m-.js";import{B as H,b as O}from"./ButtonStyle-DaPKUawX.js";import{L as _e}from"./CardStyle-B9qFmFtz.js";import{H as D}from"./Hidden-CZZHX81z.js";import{C as J}from"./Card-BrM9kpJu.js";import{P as we}from"./PageHeader-DqqjGq3-.js";import{E as Le}from"./ErrorMessages-D1wiRwH0.js";import{e as De,f as Pe}from"./AccordianStyled-BS_ED8m5.js";import"./NativeSelect-Dod2zX5v.js";var U={},Fe=Q;Object.defineProperty(U,"__esModule",{value:!0});var K=U.default=void 0,Re=Fe(G()),Ne=e,He=(0,Re.default)((0,Ne.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");K=U.default=He;var W={},Ee=Q;Object.defineProperty(W,"__esModule",{value:!0});var X=W.default=void 0,$e=Ee(G()),Ue=e,We=(0,$e.default)((0,Ue.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");X=W.default=We;function Y({clickFilter:l,clickCloseIcon:d}){const s=E(),i=P(t=>t.library.LanguageList),g=P(t=>t.library.Standards);sessionStorage.getItem("Class");const u=localStorage.getItem("localSchoolId"),c=sessionStorage.getItem("AcademicYearId"),m=sessionStorage.getItem("StandardId"),[j,a]=o.useState(""),[n,f]=o.useState(""),[B,S]=o.useState(""),[y,T]=o.useState(""),[_,k]=o.useState(""),[I,A]=o.useState(m),p=()=>{l({bookTitle:j,accessionNo:n,author:B,publisher:y,Standard:I,Language:_})},C=()=>{F(),d()},v={aiSchoolId:u},w={aiSchoolId:u,aiAcademicYrId:c};o.useEffect(()=>{s(ne(v))},[]),o.useEffect(()=>{s(ie(w))},[]);const L=t=>{k(t)},N=t=>{A(t)},F=()=>{a(""),f(""),S(""),T(""),k("")};return e.jsx("div",{children:e.jsxs(_e,{children:[e.jsx(D,{mdUp:!0,children:e.jsx(V,{onClick:C,sx:{position:"absolute",top:"-10px",zIndex:"4",right:"-5px",p:"2px",width:25,height:25,backgroundColor:"white",boxShadow:"5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.3) !important"},children:e.jsx(Ce,{fontSize:"small",color:"error"})})}),e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(R,{id:"standard-basic",label:"Book Title:",variant:"standard",fullWidth:!0,value:j,onChange:t=>{a(t.target.value)}})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(R,{id:"standard-basic",label:"Accession Number:",variant:"standard",fullWidth:!0,value:n,onChange:t=>{f(t.target.value)}})}),e.jsx(r,{item:!0,xs:6,sx:{mt:"-8px"},children:e.jsx(R,{id:"standard-basic",label:"Author:",variant:"standard",fullWidth:!0,value:B,onChange:t=>{S(t.target.value)}})}),e.jsx(r,{item:!0,xs:6,sx:{mt:"-8px"},children:e.jsx(R,{id:"standard-basic",label:"Publisher:",variant:"standard",fullWidth:!0,value:y,onChange:t=>{T(t.target.value)}})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(z,{Array:g,handleChange:N,label:"",defaultValue:I})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(z,{Array:i,handleChange:L,label:"",defaultValue:_})}),e.jsx(D,{smDown:!0,children:e.jsx(r,{item:!0,md:10})}),e.jsx(r,{item:!0,xs:6,md:1,children:e.jsx(H,{color:"secondary",onClick:()=>F(),endIcon:e.jsx(Te,{}),children:"Reset"})}),e.jsx(r,{item:!0,xs:6,md:1,children:e.jsx(Ae,{onClick:p,fontSize:"large",color:"success",sx:{float:"right",mr:2}})})]})]})})}function Me({ItemList:l,HeaderArray:d}){return e.jsx(le,{component:J,children:e.jsxs(de,{"aria-label":"simple table",children:[e.jsx(ce,{children:e.jsx(M,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:d.map((s,i)=>e.jsxs(x,{sx:{textTransform:"capitalize"},align:"center",children:[" ",e.jsx("b",{children:s.Header})]},i))})}),e.jsx(ue,{children:l.map((s,i)=>e.jsxs(M,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(x,{component:"th",scope:"row",children:s.Book_Title}),e.jsx(x,{align:"center",children:s.Book_No}),e.jsx(x,{align:"center",children:s.Author_Name}),e.jsx(x,{align:"center",children:s.Published_By}),e.jsx(x,{align:"center",children:s.Language}),e.jsx(x,{align:"center",children:s.Standards}),e.jsx(x,{align:"center",children:s.Available_Books}),e.jsx(x,{align:"center",children:s.Total_Book_Quantity}),s.Available_Books!==0&&e.jsxs(x,{align:"center",sx:{color:"#628def"},children:[" ","Claim"]})]},i))})]})})}function qe({Text1:l,Text2:d,Text3:s,Text4:i,Text5:g,Text6:u,Text7:c}){return e.jsx("div",{children:e.jsxs(J,{component:$,p:1,children:[e.jsxs(h,{variant:"body2",children:[" ",e.jsx("b",{children:"Author : "})," ",l]}),e.jsxs(h,{variant:"body2",children:[" ",e.jsx("b",{children:" Publisher : "})," ",d]}),e.jsxs(h,{variant:"body2",children:[" ",e.jsx("b",{children:" Accession No. : "})," ",c]}),e.jsxs(h,{variant:"body2",children:[" ",e.jsx("b",{children:" Language : "}),i]}),e.jsxs(h,{variant:"body2",children:[" ",e.jsx("b",{children:" Standards : "})," ",s]})]})})}ee.propTypes={Bookk:b.array,author:b.string,publisher:b.string,standard:b.string,language:b.string,available:b.number,total:b.number,title:b.string,no:b.string};function ee({Bookk:l,Book_Id:d,author:s,publisher:i,standard:g,language:u,available:c,total:m,title:j,no:a,index:n,IsForIssue:f,Collapse:B,expand:S,ClickReserve:y,AllowBookClaimForParent:T}){const _=xe(),[k,I]=o.useState(!0),A=he(),[p,C]=Z.useState(!1),v=L=>{y({aiBookId:d,aiFlag:L}),C(!1)},w=()=>{T?C(!0):v(0)};return e.jsx(e.Fragment,{children:e.jsx(ge,{in:k,style:{transformOrigin:"0 0 0"},...k?{timeout:1e3}:{},children:e.jsxs(me,{className:A.background,expanded:S===n,onChange:B(n),elevation:0,disableGutters:!0,sx:{mb:"10px"},children:[e.jsx(De,{expandIcon:e.jsx(je,{sx:{color:"black"}}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{background:`${_.colors.gradients.pink1}`},children:e.jsxs(Pe,{color:S===n?"secondary":"",children:[e.jsx("b",{children:"Book Title"})," : ",j,e.jsxs($,{sx:{display:"flex"},children:[e.jsx("b",{children:"Available"})," : (",c,"/",m,")",c===0&&e.jsxs(h,{onClick:w,sx:{color:"#628def",ml:"70px"},children:["Claim"," "]}),e.jsxs(pe,{open:p,onClose:()=>{C(!1)},PaperProps:{sx:{position:"fixed",top:190,m:0,p:1}},children:[e.jsx(h,{children:"Claim this book for -- "}),e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsxs(H,{onClick:()=>{v(0)},children:[" ","Student"]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(H,{onClick:()=>{v(1)},children:[" ","Parent"]})})]})]})]})]})}),e.jsx(be,{children:e.jsx(qe,{Text1:s,Text2:i,Text3:g,Text4:u,Text5:c,Text6:m,Text7:a})})]})})})}function ze({GetBookList:l}){const d=E(),s=P(a=>a.library.ReserveBook),[i,g]=Z.useState(!1),[u,c]=o.useState(0),m=a=>(n,f)=>{g(f?a:!1)};o.useEffect(()=>{s!==""&&(u===0?q.success(s.replace("!!!","  ")+"for Student!!!",{toastId:"success1"}):q.success(s.replace("!!!","  ")+"for Parent!!!",{toastId:"success1"}),d(fe()))},[s]);const j=a=>{c(a.aiFlag);const n={aiSchoolId:localStorage.getItem("localSchoolId"),aiAcademicYrId:sessionStorage.getItem("AcademicYearId"),aiUserId:sessionStorage.getItem("Id"),aiUserRoleId:sessionStorage.getItem("RoleId"),aiBookId:a.aiBookId,ReservedByParent:a.aiFlag,InsertedById:sessionStorage.getItem("Id"),aiFlag:a.aiFlag};d(Se(n))};return e.jsx("div",{children:l.length===0?e.jsx(Le,{Error:"No records found"}):e.jsx(e.Fragment,{children:l.map((a,n)=>e.jsx(ee,{index:n,Bookk:l,Book_Id:a.Book_Id,author:a.Author_Name,publisher:a.Published_By,standard:a.Standards,language:a.Language,available:a.Available_Books,total:a.Total_Book_Quantity,title:a.Book_Title,no:a.Book_No,IsForIssue:a.IsForIssue,AllowBookClaimForParent:a.AllowBookClaimForParent,Collapse:m,expand:i,ClickReserve:j},n))})})}function rs(){const l=E(),d=ke(),[s,i]=o.useState(!1),[g,u]=o.useState(""),[c,m]=o.useState(""),[j,a]=o.useState(""),[n,f]=o.useState(""),[B,S]=o.useState(""),y=P(t=>t.library.BooksDetaiLs),T=P(t=>t.library.Loading),_=localStorage.getItem("localSchoolId"),k=sessionStorage.getItem("StandardId"),[I,A]=o.useState(k),[p,C]=o.useState("asc");o.useEffect(()=>{A(I)},[]),o.useEffect(()=>{const t={aiSchoolId:_,asBookName:g,asAccessionNumber:c,asAuthorName:j,asPublisher:n,asLanguage:B,aiStandardId:I===""?k:I,aiMediaType:2,aiBookId:0,aiParentStaffId:"0",aiEndIndex:20,aiStartRowIndex:"0",asSortExpression:"Order by Book_Title "+p};l(Ie(t))},[g,c,j,n,I,B,p]);const v=t=>{d("/RITeSchool/Student/Library/"+ye(t),{state:{fromInternal:!0}})},w=({bookTitle:t,accessionNo:se,author:ae,publisher:te,Language:re,Standard:oe})=>{u(t),m(se),a(ae),f(te),S(re),A(oe)},L=()=>{i(!s),u(""),m(""),a(""),f(""),S(""),A("")},N=()=>{C(p==="asc"?"desc":"asc")},F=[{Id:1,Header:"BookTitle"},{Id:2,Header:"Accession No."},{Id:3,Header:"Author"},{Id:4,Header:"Publisher"},{Id:5,Header:"Language"},{Id:6,Header:"Standards"},{Id:7,Header:"Available"},{Id:8,Header:"Total"},{Id:9,Header:"Claim"}];return e.jsxs($,{sx:{px:2},children:[e.jsx(we,{heading:"Library",subheading:""}),e.jsxs(r,{container:!0,spacing:1,children:[s?e.jsx(e.Fragment,{children:e.jsx(r,{item:!0,md:10,xs:12,children:e.jsx(Y,{clickFilter:w,clickCloseIcon:L})})}):e.jsx(e.Fragment,{children:e.jsxs(r,{container:!0,item:!0,md:2,xs:12,columnSpacing:1,children:[e.jsx(r,{item:!0,md:12,xs:5,direction:{xs:"row",sm:"column"},children:e.jsx(O,{fullWidth:!0,onClick:()=>{v("ClaimedBook")},children:"Claimed Books"})}),e.jsx(r,{item:!0,md:12,xs:5,direction:{xs:"row",sm:"column"},children:e.jsx(O,{fullWidth:!0,onClick:()=>{v("Bookswithme")},children:"Books With Me"})}),e.jsx(D,{mdUp:!0,children:e.jsx(r,{item:!0,xs:2,children:e.jsx("img",{src:"/imges/SearchBook.png",style:{width:30,height:27},onClick:()=>{i(!s)}})})})]})}),e.jsx(D,{mdDown:!0,children:e.jsx(r,{item:!0,sm:10,xs:12,children:e.jsx(Y,{clickFilter:w,clickCloseIcon:L})})})]}),e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:1.5}),e.jsx(r,{item:!0,xs:9,children:e.jsx(h,{sx:{textAlign:"center",padding:"10px",color:"black"},variant:"h4",children:"Books Details"})}),e.jsx(r,{item:!0,xs:1.5,children:e.jsx(V,{variant:"square",sx:{height:25,width:55,color:"black",mt:"8px",float:"right",mr:"10px"},children:e.jsxs(ve,{onClick:()=>N(),children:[p==="asc"?e.jsx(X,{}):e.jsx(K,{}),p==="asc"?e.jsx(h,{children:"A-Z"}):e.jsx(h,{children:"Z-A"})]})})})]}),T?e.jsx(Be,{}):e.jsxs(e.Fragment,{children:[e.jsx(D,{smUp:!0,children:e.jsx(ze,{GetBookList:y})}),e.jsx(D,{smDown:!0,children:e.jsx(Me,{ItemList:y,HeaderArray:F})})]})]})}export{rs as default};
