import{u as ee,S as te,r as a,E as ae,c as C,t as L,kb as re,kc as G,kd as se,j as e,B as o,F as oe,H as p,I as y,J as M,K as ie,bv as W,L as J,G as i,q as I,aJ as g,a8 as le,p as de,T as ne,ke as ce,fL as he}from"./index-d5YOjbb6.js";import{d as ue}from"./CloudUpload-DJN1zp2n.js";import{d as xe}from"./Refresh-BEEftxLF.js";import{d as me}from"./Save-Ckr0NoeK.js";const be=()=>{const d=ee();te(),sessionStorage.getItem("AcademicYearId");const N=localStorage.getItem("localSchoolId"),w=sessionStorage.getItem("Id"),$=Number(sessionStorage.getItem("TeacherId"));localStorage.getItem("FolderName");const[P,F]=a.useState(""),[h,n]=a.useState("");a.useState("");const[u,f]=a.useState(""),[x,v]=a.useState(null),[j,E]=a.useState("");a.useState(""),a.useState(""),a.useState("");const[O,_]=a.useState(""),[pe,D]=a.useState(!1);a.useState(!1);const[S,b]=a.useState("");a.useState(!1),a.useState(!1);const z=a.useRef(null);a.useContext(ae);const[k,B]=a.useState(""),H=["PDF","JPG","JPEG","PNG","BMP"],V=3e6,q=localStorage.getItem("FolderName"),U=C(t=>t.AadharcardTecaherSlice.ISUpdateTeacherAadharDetails),A=C(t=>t.AadharcardTecaherSlice.ISDeleteAadharCardPhotoCopy),c=C(t=>t.AadharcardTecaherSlice.ISGetUserDetailsForAadharCardNo),K={asUserId:Number(w),asSchoolId:Number(N),asAadharCardNo:u,asAadharCardPhotoCopyPath:j,asUpdatedById:$.toString(),asSaveFeature:"Aadhar Cards",asFolderName:q,asBase64String:O},Y=()=>{let t=!1;u.trim()===""?(n("Aadhar card number should not be blank."),t=!0):u.length<12?(n("Aadhar card number must be 12 digits."),t=!0):n(""),k.trim()===""?(F("Name present on aadhar card should not be blank."),t=!0):F(""),!t&&(d(ce(K)),R())},R=()=>{f(""),B(""),v(null),E(""),b("")};a.useEffect(()=>{c!=null&&f("")},[c]),a.useEffect(()=>{U!==""&&(L.success("Aadhar card details submitted successfully.",{toastId:"success1"}),d(re()),d(G(T)))},[U]),a.useEffect(()=>{A!=""&&(L.success(A),d(se()))},[A]),a.useState(!1),a.useState("");const T={asUserId:Number(w),asSchoolId:Number(N)};a.useEffect(()=>{d(G(T))},[]);const Z=t=>{/^\d{0,12}$/.test(t)?(f(t),t.length<12?n("Enter a legitimate aadhar card number."):n(""),D(!1)):D(!0)},Q=async t=>{const r=t.target.files;let l="";for(let s=0;s<r.length;s++){const m=he(r[s],H,V);m==null?(E(r[s].name),v(t.target.files[s]),l=await X(r[s]),_(l.slice(l.indexOf(",")+1)),b("")):(b(m),z.current.value=null)}},X=t=>new Promise((r,l)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>{r(s.result)},s.onerror=m=>{l(m)}});return e.jsxs(o,{sx:{px:2},children:[e.jsx(oe,{navLinks:[{title:"Add Aadhar Card Details",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(o,{children:e.jsx(p,{title:"Add aadhar card details.",children:e.jsx(y,{sx:{color:"white",backgroundColor:M[500],height:"36px !important",":hover":{backgroundColor:M[600]}},children:e.jsx(ie,{})})})}),e.jsx(o,{children:e.jsx(p,{title:"Reset",children:e.jsx(y,{sx:{color:"white",backgroundColor:W[500],"&:hover":{backgroundColor:W[600]}},children:e.jsx(xe,{onClick:R,fontSize:"medium"})})})}),e.jsx(o,{children:e.jsx(p,{title:"Save",children:e.jsx(y,{onClick:Y,sx:{backgroundColor:J[500],color:"white",height:"36px !important",":hover":{backgroundColor:J[600]}},children:e.jsx(me,{})})})})]})}),e.jsx(o,{sx:{p:2,background:"white"},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,md:8,children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(I,{fullWidth:!0,label:"Name",InputLabelProps:{shrink:!0},sx:{width:{xs:"100%",sm:"50%"},"& .MuiInputBase-input":{height:"50px",padding:"10px",bgcolor:"#D3D3D3",borderRadius:"4px",minWidth:"20vw",cursor:"default"}},value:c==null?void 0:c.TeacherFullName,InputProps:{readOnly:!0}})}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx(I,{fullWidth:!0,value:u,label:e.jsxs("span",{children:["Aadhar Card Number ",e.jsx("span",{style:{color:"red"},children:"*"})]}),onChange:t=>Z(t.target.value),sx:{width:{xs:"100%",sm:"50%"},"& .MuiInputBase-input":{height:"50px",padding:"10px",bgcolor:"",borderRadius:"4px",minWidth:"20vw"}}}),h&&e.jsx(g,{Error:h}),!!h&&e.jsx(g,{Error:!!h})]}),e.jsxs(i,{item:!0,xs:12,children:[e.jsx(I,{label:e.jsxs("span",{children:["Name As Per Aadhar Card ",e.jsx("span",{style:{color:"red"},children:"*"})]}),value:k,onChange:t=>{const r=t.target.value;/^[A-Za-z\s]*$/.test(r)&&r.length<=150&&B(r)},fullWidth:!0,sx:{width:{xs:"100%",sm:"50%"},"& .MuiInputBase-input":{height:"50px",padding:"10px",bgcolor:"",borderRadius:"4px",minWidth:"20vw"}},inputProps:{maxLength:150}}),P&&e.jsx(g,{Error:P}),e.jsx(p,{title:"Supports only .PDF, .JPG, .PNG, .BMP, .JPEG file types up to 3MB.",children:e.jsx(le,{sx:{width:{xs:"100%",sm:"50%"},height:"65px",gap:1,position:"relative",border:t=>`1px dashed ${t.palette.primary.main}`,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"20px",minWidth:"20vw"},color:"primary",children:e.jsxs(de,{direction:"row",alignItems:"center",gap:1,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.jsx(ue,{}),j===""?" Attachment":j,e.jsx("input",{type:"file",onChange:Q,style:{opacity:0,top:0,left:0,right:0,bottom:0,position:"absolute",cursor:"pointer",minWidth:"20vw"}})]})})}),S&&e.jsx(o,{sx:{display:"flex",alignItems:"",justifyContent:"",mt:2},children:S&&e.jsx(g,{Error:S})})]})]})}),e.jsx(i,{item:!0,xs:12,md:4,children:e.jsx(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:x?x.type==="application/pdf"?e.jsx(o,{sx:{width:"100%",height:"330px",marginBottom:"10px",border:"1px solid grey"},children:e.jsx("iframe",{src:URL.createObjectURL(x),width:"100%",height:"100%",title:"PDF Preview",style:{border:"none"}})}):e.jsx("img",{src:URL.createObjectURL(x),alt:"Preview",style:{width:"100%",height:"auto",marginBottom:"10px"}}):e.jsx(o,{sx:{width:{xs:"100%",sm:"100%"},height:"330px",border:"1px dashed grey",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"10px"},children:e.jsx(ne,{color:"textSecondary",children:"No file selected"})})})})]})})]})};export{be as default};
