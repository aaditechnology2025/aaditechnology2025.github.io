import{V as ps,W as Ts,j as e,u as V,c as d,r as n,hw as Z,hx as ss,ai as es,B as l,aj as ts,ak as as,al as E,am as m,an as rs,H as r,bc as R,A as ys,w as Cs,x as C,au as ks,E as vs,hy as Ms,hz as As,hA as L,hB as Es,t as Ds,hC as ws,hD as K,F as Ns,p as Us,G as M,bR as P,I as _s,J as Q,K as zs,T as A,D as Ls,hE as Ps,m as x}from"./index-d5YOjbb6.js";import{d as G,a as Y}from"./EditOff-Bih_BxVi.js";import{d as k}from"./EventAvailable-bm7n2v7u.js";import{d as B}from"./EventBusy-BCmC0CXH.js";import{L as Vs}from"./Legend-p9-_07Am.js";var H={},Rs=Ts;Object.defineProperty(H,"__esModule",{value:!0});var D=H.default=void 0,Gs=Rs(ps()),X=e,Ys=(0,Gs.default)([(0,X.jsx)("circle",{cx:"9",cy:"13",r:"1.25"},"0"),(0,X.jsx)("path",{d:"M17.5 10c.75 0 1.47-.09 2.17-.24.21.71.33 1.46.33 2.24 0 1.22-.28 2.37-.77 3.4l1.49 1.49C21.53 15.44 22 13.78 22 12c0-5.52-4.48-10-10-10-1.78 0-3.44.47-4.89 1.28l5.33 5.33c1.49.88 3.21 1.39 5.06 1.39zM1.89 3.72l2.19 2.19C2.78 7.6 2 9.71 2 12c0 5.52 4.48 10 10 10 2.29 0 4.4-.78 6.09-2.08l2.19 2.19 1.41-1.41L3.31 2.31 1.89 3.72zm14.77 14.77C15.35 19.44 13.74 20 12 20c-4.41 0-8-3.59-8-8 0-.05.01-.1 0-.14 1.39-.52 2.63-1.35 3.64-2.39l9.02 9.02z"},"1")],"FaceRetouchingOff");D=H.default=Ys;function Bs({ItemList:i,clickEdit:I,HeaderArray:h,clickSubmit:o=void 0}){const c=V(),a={padding:"0.2em 1.5em"},b=Number(localStorage.getItem("localSchoolId")),u=d(s=>s.AssignExamMarkSlice.IsGetSchoolSettings),g=d(s=>s.AssignExamMarkSlice.IsschoolsettingPartialSubmit),j={asSchoolId:Number(b)};return n.useEffect(()=>{c(Z(j)),c(ss(j))},[]),e.jsx("div",{children:e.jsx(es,{component:l,children:e.jsxs(ts,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx(as,{children:e.jsx(E,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:h.map((s,p)=>e.jsx(m,{sx:{textTransform:"capitalize",color:"white"},align:s.align?s.align:"left",children:e.jsx("b",{children:s.Header})},p))})}),e.jsx(rs,{children:i.map(s=>e.jsxs(E,{children:[e.jsx(m,{sx:{textTransform:"capitalize",...a},children:s.Text1}),e.jsx(m,{sx:{textTransform:"capitalize",...a},children:s.Text2}),e.jsxs(m,{sx:{textTransform:"capitalize",...a},align:"center",children:[s.STATUS==="Not Started"&&e.jsx(r,{title:"Marks entry not started",children:e.jsx(G,{style:{color:"#f44336",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="Partial"&&e.jsx(r,{title:"Marks entry partially done.",children:e.jsx(Y,{style:{color:"#ff9800",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),(s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published")&&e.jsx(r,{title:"Marks entry completed",children:e.jsx(R,{style:{color:"#07bc0c",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="No Student"&&e.jsx(r,{title:s.StatusDescription,children:e.jsx(D,{style:{color:"#34a4eb"}})})]}),e.jsx(m,{sx:{textTransform:"",...a},align:"center",children:s.Is_Submitted==="N"?s.STATUS==="Complete"?e.jsx(r,{title:"Submit exam marks to the class teacher",children:e.jsx(k,{style:{color:"#25e67b"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):s.STATUS==="Partial"&&g===!0?e.jsx(r,{title:"Submit exam marks to the class teacher",children:e.jsx(k,{style:{color:"#25e67b"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):e.jsx(r,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):s.Is_Submitted==="Y"?s.STATUS==="Complete"&&u==="true"?e.jsx(r,{title:"Unsubmit exam marks",children:e.jsx(B,{style:{color:"#0f0f0f"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"N"})})}):e.jsx(r,{title:"Marks already submitted",children:e.jsx("span",{children:"Marks already submitted"})}):e.jsx(r,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})})})]},s.Id))})]})})})}function Hs({ItemList:i,clickEdit:I,HeaderArray:h,clickSubmit:o=void 0}){const c=V(),a={padding:"0.2em 1.5em"},b=Number(localStorage.getItem("localSchoolId")),u=d(s=>s.AssignExamMarkSlice.IsGetSchoolSettings),g=d(s=>s.AssignExamMarkSlice.IsschoolsettingPartialSubmit),j={asSchoolId:Number(b)};return n.useEffect(()=>{c(Z(j)),c(ss(j))},[]),e.jsx("div",{children:e.jsx(es,{component:l,children:e.jsxs(ts,{"aria-label":"simple table",sx:{border:s=>`1px solid ${s.palette.divider}`},children:[e.jsx(as,{children:e.jsx(E,{sx:{background:s=>s.palette.secondary.main,color:s=>s.palette.common.white},children:h.map((s,p)=>e.jsx(m,{sx:{textTransform:"capitalize",color:"white"},align:s.align?s.align:"left",children:e.jsx("b",{children:s.Header})},p))})}),e.jsx(rs,{children:i.map(s=>e.jsxs(E,{children:[e.jsx(m,{sx:{textTransform:"capitalize",...a},children:s.Text1}),e.jsx(m,{sx:{textTransform:"capitalize",...a},children:s.Text2}),e.jsxs(m,{sx:{textTransform:"capitalize",...a},align:"center",children:[s.STATUS==="Not Started"&&e.jsx(r,{title:"Marks entry not started",children:e.jsx(G,{style:{color:"#f44336",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="Partial"&&e.jsx(r,{title:"Marks entry partially done.",children:e.jsx(Y,{style:{color:"#ff9800",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),(s.STATUS==="Complete"||s.STATUS==="Submitted"||s.STATUS==="Published")&&e.jsx(r,{title:"Marks entry completed",children:e.jsx(R,{style:{color:"#07bc0c",cursor:"pointer"},onClick:()=>I({SubjectId:s.SubjectId,StandardDivisionId:s.StandardDivisionId,StandardId:s.StandardId,IsMonthConfig:s.IsMonthConfig,IsSubmitted:s.Is_Submitted})})}),s.STATUS==="No Student"&&e.jsx(r,{title:s.StatusDescription,children:e.jsx(D,{style:{color:"#34a4eb"}})})]}),e.jsx(m,{sx:{textTransform:"",...a},align:"center",children:s.Is_Submitted==="N"?s.STATUS==="Complete"?e.jsx(r,{title:"Submit exam marks to the class teacher",children:e.jsx(k,{style:{color:"#25e67b"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):s.STATUS==="Partial"&&g===!0?e.jsx(r,{title:"Submit exam marks to the class teacher",children:e.jsx(k,{style:{color:"#25e67b"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"Y"})})}):e.jsx(r,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})}):s.Is_Submitted==="Y"?s.STATUS==="Complete"&&u==="true"?e.jsx(r,{title:"Unsubmit exam marks",children:e.jsx(B,{style:{color:"#0f0f0f"},onClick:()=>o({asSubjectId:s.SubjectId,asStandardDivisionId:s.StandardDivisionId,asIsSubmitted:"N"})})}):e.jsx(r,{title:"Marks already submitted",children:e.jsx("span",{children:"Marks already submitted"})}):e.jsx(r,{title:"Marks cannot be submitted.",children:e.jsx("span",{children:"Marks cannot be submitted."})})})]},s.Id))})]})})})}const Js=()=>{const i=V(),I=ys();let{ClassTeacherId:h,ClassId:o,TestId:c}=Cs();const[a,b]=n.useState("0"),[u,g]=n.useState(c==null?"":C(c)),j=sessionStorage.getItem("TeacherId"),[s,p]=n.useState(h==null?j:C(h));let w=ks(74);const{showAlert:ns,closeAlert:F}=n.useContext(vs),f=Number(localStorage.getItem("localSchoolId")),is=Number(localStorage.getItem("UserId")),T=Number(sessionStorage.getItem("AcademicYearId")),N=Number(sessionStorage.getItem("TeacherId"));Number(sessionStorage.getItem("ExamID"));const v=d(t=>t.AssignExamMarkSlice.ISAssignExam),y=d(t=>t.AssignExamMarkSlice.ISAssignClassExam),W=d(t=>t.AssignExamMarkSlice.ISSubjectListClass);d(t=>t.AssignExamMarkSlice.IsGetSchoolSettings);const U=d(t=>t.AssignExamMarkSlice.ISSubjectListClass1);d(t=>t.AssignExamMarkSlice.ExamMarksStatusForClass);const os=d(t=>t.AssignExamMarkSlice.ISSubjectTeachersForAssignExamMarks),ls=d(t=>t.AssignExamMarkSlice.Isschoolsetting),_=d(t=>t.AssignExamMarkSlice.ISSubmitMarksTeacher);JSON.parse(sessionStorage.getItem("ScreensAccessPermission"));const[ds,cs]=n.useState(!1);n.useEffect(()=>{h!==void 0&&c!==void 0&&o!==void 0&&!ds&&(h=C(h),o=C(o),c=C(c),b(o),cs(!0))},[h,o,c,v,a]);const us=()=>{let t=!1;return v.map(S=>{S.Value==a&&(t=S.IsClassTeacher)}),t},xs=t=>{let S=!1;return y.map(fs=>{fs.Value==t&&(S=!0)}),S},$={asSchoolId:f,asAcademicYearId:T,aTeacherId:Number(w=="Y"?s:N),asExamId:Number(u),asStandardDivisionId:Number(a),IsClassTeacher:us()},Ss={asSchoolId:f,asAcademicYearId:T,aTeacherId:Number(w=="Y"?s:N)},hs={asSchoolId:f,asAcademicYrId:T},z={asSchoolId:f,asAcademicYearId:T,asStandardDivisionId:Number(a)};n.useEffect(()=>{i(Ms(Ss))},[s]),n.useEffect(()=>{i(As(hs))},[]),n.useEffect(()=>{i(L(z))},[]),n.useEffect(()=>{y.length>0&&(u==="0"||!xs(u))&&g(y[0].Value)},[y,u]),n.useEffect(()=>{a=="0"&&i(L(z))},[a]),n.useEffect(()=>{a!=="0"&&i(L(z))},[a]),n.useEffect(()=>{const t={asSchoolId:Number(f)};i(Es(t))},[]);const O=t=>{const S={...t,asTestId:u,asSchoolId:String(f),asAcademicYearId:String(T),asReportingUserId:is};ns({title:"Submit",message:t.asIsSubmitted!=="N"?"Once you submit the result to the class-teacher, you can not modify the marks/grades. Are you sure you want to continue?":"Are you sure, Do you want to unsubmit marks/grades?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onConfirm:()=>{F(),i(Ps(S))},onCancel:F})};n.useEffect(()=>{_!=""&&(Ds.success(_),i(ws()),i(K($)))},[_]);const ms=t=>{b(t)},Is=t=>{g(t)},bs=t=>{p(t),b("0")};n.useEffect(()=>{i(K($))},[a,u,s]);const q=[{Id:1,Header:"Class"},{Id:2,Header:"Subject"},{Id:3,Header:"Edit",align:"center"},{Id:4,Header:"Submit",align:"center"}],js=()=>{let t=0;return v.map(S=>{S.Value==S.Value&&(t=S.StanderdId)}),t},J=t=>{I("/RITeSchool/Teacher/SubjectExamMarks/"+x(s)+"/"+x(t.StandardDivisionId)+"/"+x(t.SubjectId)+"/"+x(a)+"/"+x(u)+"/"+x(N.toString())+"/"+x(t.StandardId)+"/"+x(t.IsMonthConfig)+"/"+x(t.IsSubmitted!="N")+"/"+x(!1)+"/"+x("true")+"/"+x(js()),{state:{fromInternal:!0}})},gs=[{id:1,Name:"No student in class / Subject not applicable to student",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(D,{style:{color:"#34a4eb",fontSize:"large",position:"relative",top:"-2px"}})})},{id:2,Name:"Marks entry not started",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(G,{style:{color:"#f44336",fontSize:"large",position:"relative",top:"-2px"}})})},{id:3,Name:"Marks entry partially done",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(Y,{style:{color:"#ff9800",fontSize:"large",position:"relative",top:"-2px"}})})},{id:4,Name:"Submit exam marks to the class teacher",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(k,{style:{color:"#25e67b",fontSize:"large",position:"relative",top:"-2px"}})})},{id:5,Name:"Unsubmit exam marks",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(B,{style:{color:"#0f0f0f",fontSize:"large",position:"relative",top:"-2px"}})})},{id:6,Name:"Marks entry completed",Value:e.jsx(l,{sx:{display:"flex",gap:1,alignItems:"center"},children:e.jsx(R,{style:{color:"#07bc0c",fontSize:"large",position:"relative",top:"-2px"}})})}];return e.jsxs(l,{sx:{px:2},children:[e.jsx(Ns,{navLinks:[{title:"Assign Exam Marks",path:"/RITeSchool/Teacher/AssignExamMark"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(Us,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(M,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:w=="Y"?e.jsx(l,{children:e.jsx(P,{sx:{width:{xs:"40vw",sm:"18vw"}},ItemList:os,onChange:bs,label:"Select Subject Teacher",defaultValue:s==null?void 0:s.toString(),mandatory:!0,size:"small"})}):e.jsx("span",{children:" "})}),e.jsx(M,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(P,{sx:{width:{xs:"40vw",sm:"15vw"}},ItemList:v,onChange:ms,label:"Select Class",defaultValue:a,mandatory:!0,size:"small"})}),e.jsx(M,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(P,{sx:{width:{xs:"70vw",sm:"15vw",md:"20vw"}},ItemList:y,onChange:Is,label:"Select Exam",defaultValue:u,mandatory:!0,size:"small"})}),e.jsx(M,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(r,{title:`View all subjects assigned with the current status of marks given to students.
            Once marks for all the students are allotted you have to submit these marks to the class teacher by clicking on "submit" button.
            Pre-primary teachers to add and submit progress report entries of his/her class.`,children:e.jsx(_s,{sx:{color:"white",backgroundColor:Q[500],height:"36px !important",":hover":{backgroundColor:Q[600]}},children:e.jsx(zs,{})})})})]})})}),e.jsx(l,{sx:{background:"white",p:1,mb:2},children:e.jsx(Vs,{LegendArray:gs})}),e.jsxs(l,{sx:{background:"white",p:2},children:[e.jsx(A,{variant:"h4",mb:2,children:"My Subject(s):-"}),W.length>0?e.jsx(Bs,{ItemList:W,clickEdit:J,HeaderArray:q,clickSubmit:O}):e.jsx(A,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})}),e.jsx(Ls,{sx:{my:2}}),U.length>0&&ls=="True"&&e.jsxs(l,{mt:2,children:[e.jsx(A,{variant:"h4",mb:2,children:"My Class Subject(s):-"}),U.length>0?e.jsx("div",{children:e.jsx(Hs,{ItemList:U,clickEdit:J,HeaderArray:q,clickSubmit:O})}):e.jsx(A,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})})]})]})]})};export{Js as default};
