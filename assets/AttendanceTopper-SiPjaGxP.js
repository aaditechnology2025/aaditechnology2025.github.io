import{c7 as T,fX as Y,fY as B,j as e,G as s,bV as G,h as D,bb as N,O as k,r as m,B as u,u as v,c as g,fZ as F,f_ as R,a9 as P,T as j,cH as S}from"./index-d5YOjbb6.js";import{B as _}from"./BackButton-BE5_8L9j.js";import{g as b,h as I,b as E,H as O}from"./AccordianStyled-BS_ED8m5.js";import{L as w}from"./CardStyle-B9qFmFtz.js";import{d as H}from"./ExpandLess-ZEyeVaLF.js";import{D as L}from"./DropdownAllSelect-C1tJr2m-.js";import{P as $}from"./PageHeader-DqqjGq3-.js";import"./Card-BrM9kpJu.js";import"./NativeSelect-Dod2zX5v.js";const V=T("MuiBox",["root"]),z=V,M=Y({defaultClassName:z.root,generateClassName:B.generate}),U=M,q=({Item:a})=>e.jsxs(s,{container:!0,children:[e.jsx(s,{item:!0,xs:5,children:e.jsx(b,{children:e.jsx(I,{dangerouslySetInnerHTML:{__html:a.Text1+" -   "+a.Text2}})})}),e.jsx(s,{item:!0,xs:.5}),e.jsx(s,{item:!0,xs:1,sx:{mt:"-10px"},children:e.jsx(G,{fontSize:"small"})}),e.jsx(s,{item:!0,xs:5,children:e.jsx(b,{children:e.jsx(I,{dangerouslySetInnerHTML:{__html:a.Text3+" - "+a.Text4}})})})]}),W=({Id:a,Name:i,expand:d,isActive:o,Rank:l,Percentage:t,Rollno:r,Presentdays:h,IsStudent:n})=>{let x=!1;return n?["Number1.gif","Number2.gif","Number3.gif"].map(p=>{l.indexOf(p)>0&&(x=!0)}):x=!0,D(),e.jsx(E,{onClick:()=>{d(a)},color:o?"red":"",pl:o?.5:null,children:e.jsxs(s,{container:!0,children:[x?e.jsx(s,{item:!0,xs:1,children:e.jsx("img",{src:localStorage.getItem("SiteURL")+"/"+l.replace("~/",""),width:25,height:30,style:{marginTop:"10px"}})}):e.jsx(s,{item:!0,xs:1,children:e.jsx(N,{variant:"square",sx:{width:25,height:33,mt:"8px",border:"1px solid orange"}})}),e.jsx(s,{item:!0,xs:9,sx:{color:"black"},children:e.jsxs(O,{children:[r+".  "," ",i," "]})}),e.jsx(s,{item:!0,xs:1,sx:{ml:"20px"},children:o?e.jsx(H,{sx:{color:"black"}}):e.jsx(k,{sx:{color:"black"}})}),e.jsx(s,{item:!0,xs:1}),e.jsx(s,{item:!0,xs:5,sx:{color:"black"},children:e.jsxs(U,{sx:{mr:"5px",mt:"-15px",ml:"6px"},fontSize:"12px",children:[e.jsx("b",{children:" Present days:"})," ",h]})}),e.jsxs(s,{item:!0,xs:5,sx:{float:"right",fontSize:"12px",color:"black",mt:"-15px",ml:"20px"},children:[e.jsx("b",{children:"Percentage:"})," ",t+"%"]})]})})},y=({header:a,IsStudent:i})=>{const[d,o]=m.useState(-1),l=t=>{o(d===t?-1:t)};return e.jsx(e.Fragment,{children:a.Header!=null&&a.Header.map((t,r)=>e.jsxs(w,{children:[e.jsx(W,{Id:r,Rank:t.Rank,Name:t.Name,Rollno:t.Rollno,Presentdays:t.PresentDays,Percentage:t.Percentage,expand:l,isActive:d===r,IsStudent:i}),e.jsx(u,{sx:{mt:"10px"},children:d===r&&t.Child.map((h,n)=>e.jsx(q,{Item:h},n))})]},r))})};function re(){const a=v(),i=g(c=>c.Attendance.GetStudentAttendance),d=g(c=>c.Attendance.GetAttendanceDetails),o=g(c=>c.Attendance.GetAcademicYearsForOldAttendance),l=localStorage.getItem("localSchoolId"),t=sessionStorage.getItem("StudentId"),r=sessionStorage.getItem("AcademicYearId"),h=sessionStorage.getItem("StandardDivisionId"),[n,x]=m.useState(r),[f,p]=m.useState(null);m.useEffect(()=>{a(F({aiSchoolId:l,aiStudentId:t,abIncludeCurrentYear:n}))},[]),m.useEffect(()=>{x(r)},[o]),m.useEffect(()=>{n!==""&&a(R({aiSchoolId:l,aiAcademicYearId:n,StandardDivisionId:h,TopRanker:"3",aiStudentId:t}))},[n]);const C=c=>{x(c),o.map(A=>{A.Value===c&&p(A.Name)})};return e.jsx("div",{children:e.jsxs(u,{sx:{px:2},children:[e.jsx($,{heading:"Attendance ",subheading:""}),e.jsx(_,{FromRoute:"/Student/Attendance"}),e.jsxs(P,{fullWidth:!0,children:[e.jsx(j,{children:" Select Academic Year"}),e.jsx(L,{Array:o,handleChange:C,defaultValue:n}),n!==r&&e.jsxs(e.Fragment,{children:[" ",f?e.jsx(j,{variant:"h5",sx:{color:"red",mt:"5px"},children:"You are Viewing data of old academic year"}):""]})]}),e.jsx(u,{my:1,children:e.jsxs(j,{sx:{textAlign:"center"},variant:"h5",children:[" ","Your Attendance"]})}),e.jsx(u,{children:i.length>0&&i[0].Name!=null?e.jsx(y,{header:{Header:i},IsStudent:!0}):e.jsx(S,{children:"No attendance"})}),e.jsx(u,{my:1,children:e.jsx(j,{sx:{textAlign:"center"},variant:"h5",children:"Attendance Toppers"})}),e.jsx(u,{children:d!==void 0&&d.length>0?e.jsx(y,{header:{Header:d},IsStudent:!1}):e.jsx(S,{children:"No attendance"})})]})})}export{re as default};
