import{r as i,j as e,a2 as R,a3 as M,bl as P,T as A,a5 as L,G as C,q as _,B as o,ce as v,bQ as z,a7 as $,a8 as N,ai as H,c8 as G,aj as O,ak as Q,al as B,am as u,an as U,H as T,I as w,az as V,as as q,at as J,F as W,J as y,bv as F,ax as K,fy as X,R as Y}from"./index-d5YOjbb6.js";import{d as I}from"./Square-gela0mjc.js";import{D as E}from"./Datepicker1-DKB9hUZi.js";import{F as Z}from"./FormGroup-XtcIGgvX.js";import{d as ee}from"./ArrowCircleUp-BmCXupv-.js";import{d as te}from"./ArrowCircleDown-D40CfZ6q.js";import{Q as se}from"./QuestionMark-C2Y4lgD8.js";import"./moment-CaEEsv53.js";const ae=({open:d,onClose:x,onSave:b,note:s,editMode:f})=>{const[c,S]=i.useState({message:"",startDate:"",endDate:"",applicableTo:{admin:!0,teacher:!0,student:!0,adminStaff:!0,otherStaff:!0}}),[j,t]=i.useState({admin:!1,teacher:!1,student:!1,adminStaff:!1,otherStaff:!1,selectAll:!1});i.useEffect(()=>{s&&S({...s,applicableTo:c.applicableTo})},[s]);const a=r=>{const{name:h,value:l}=r.target;S(g=>({...g,[h]:l}))},p=()=>{const{applicableTo:r,...h}=c;b(h)},m=r=>{const{name:h,checked:l}=r.target;t(g=>({...g,[h]:l,selectAll:h==="selectAll"?l:g.selectAll})),h==="selectAll"&&t(g=>({admin:l,teacher:l,student:l,adminStaff:l,otherStaff:l,selectAll:l}))};return e.jsxs(R,{open:d,onClose:x,PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(M,{sx:{bgcolor:"#223354",position:"relative"},children:e.jsx(P,{onClick:x,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(A,{variant:"h3",sx:{px:2,pt:2},children:f?"Update Notice":"Add Notice"}),e.jsx(L,{children:e.jsxs(C,{container:!0,spacing:2,children:[e.jsx(C,{item:!0,xs:12,children:e.jsx(_,{label:e.jsxs("span",{children:["Message ",e.jsx("span",{style:{color:"red"},children:" *"})]}),name:"message",value:c.message,onChange:a,fullWidth:!0,margin:"dense"})}),e.jsx(C,{item:!0,xs:12,children:e.jsx(E,{DateValue:c.startDate,onDateChange:a,size:"medium",label:"Start Date ",error:void 0,helperText:void 0})}),e.jsx(C,{item:!0,xs:12,children:e.jsx(E,{DateValue:c.endDate,onDateChange:a,size:"medium",label:"End Date ",error:void 0,helperText:void 0})}),e.jsxs(o,{pl:1,width:"100%",ml:1,mt:1,children:[e.jsx(o,{sx:{backgroundColor:"lightgrey",px:1},children:e.jsx(v,{sx:{},control:e.jsx(z,{name:"selectAll",checked:j.selectAll,onChange:m}),label:e.jsxs("span",{children:[e.jsx("strong",{children:" Applicable To"}),e.jsx("span",{style:{color:"red"},children:" *"})]})})}),e.jsx(C,{container:!0,spacing:2,alignItems:"center",pl:1,children:e.jsx(C,{item:!0,xs:12,children:e.jsx(Z,{row:!0,children:[{label:"Admin",name:"admin"},{label:"Teacher",name:"teacher"},{label:"Student",name:"student"},{label:"Admin Staff",name:"adminStaff"},{label:"Other Staff",name:"otherStaff"}].map(r=>e.jsx(v,{control:e.jsx(z,{name:r.name,checked:j[r.name],onChange:m}),label:r.label},r.name))})})})]})]})}),e.jsxs($,{sx:{pt:2,pb:3,px:3},children:[e.jsx(N,{onClick:x,color:"error",children:"Cancel"}),e.jsx(N,{onClick:p,color:"success",children:f?"Update":"Add"})]})]})},le=({notes:d,onEdit:x,onDelete:b})=>{const[s,f]=i.useState(null),c=t=>{let a="asc";s&&s.key===t&&s.direction==="asc"&&(a="desc"),f({key:t,direction:a})},S=[...d].sort((t,a)=>{if(!s)return 0;const{key:p,direction:m}=s;return t[p]<a[p]?m==="asc"?-1:1:t[p]>a[p]?m==="asc"?1:-1:0}),j=t=>(s==null?void 0:s.key)===t?s.direction==="asc"?e.jsx(ee,{sx:{ml:1,color:"white",fontSize:"20px"}}):e.jsx(te,{sx:{ml:1,color:"white",fontSize:"20px"}}):null;return e.jsx(H,{component:G,children:e.jsxs(O,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:[e.jsx(Q,{children:e.jsxs(B,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[["Message","Start Date","End Date"].map((t,a)=>e.jsx(u,{sx:{textTransform:"capitalize",color:"white",py:1.5,cursor:"pointer"},onClick:()=>c(t.toLowerCase().replace(" ","")),children:e.jsxs(o,{display:"flex",alignItems:"center",component:"span",children:[e.jsx("strong",{children:t}),j(t.toLowerCase().replace(" ",""))]})},t)),e.jsx(u,{sx:{textTransform:"capitalize",color:"white",py:1.5,textAlign:"center"},children:e.jsx("strong",{children:"Edit"})}),e.jsx(u,{sx:{textTransform:"capitalize",color:"white",py:1.5,textAlign:"center"},children:e.jsx("strong",{children:"Delete"})})]})}),e.jsx(U,{children:S.map(t=>e.jsxs(B,{children:[e.jsx(u,{sx:{textTransform:"capitalize",py:.5},children:t.message}),e.jsx(u,{sx:{textTransform:"capitalize",py:.5},children:t.startDate}),e.jsx(u,{sx:{textTransform:"capitalize",py:.5},children:t.endDate}),e.jsx(u,{sx:{textTransform:"capitalize",py:.5,textAlign:"center"},children:e.jsx(T,{title:"Edit",children:e.jsx(w,{onClick:()=>x(t),color:"primary",children:e.jsx(V,{})})})}),e.jsx(u,{sx:{textTransform:"capitalize",py:.5,textAlign:"center"},children:!t.isDefault&&e.jsx(T,{title:"Delete",children:e.jsx(w,{onClick:()=>b(t.id),sx:{color:"#38548A","&:hover":{color:"red",backgroundColor:q[100]}},children:e.jsx(J,{})})})})]},t.id))})]})})},pe=()=>{const[d,x]=i.useState([{id:1,message:"test notice 13",startDate:"16 Dec 2024",endDate:"18 Dec 2024"},{id:2,message:"Feedback facility is available now!",startDate:"01 Apr 2024",endDate:"31 Mar 2025"},{id:3,message:"Feedback facility is available now! Click on top-right link Feedback to give your opinion about School as well as RITeSchool software.",startDate:"2024-01-01",endDate:"2024-12-31",isDefault:!0}]),[b,s]=i.useState(!1),[f,c]=i.useState(!1),[S,j]=i.useState(null),[t,a]=i.useState(0),[p,m]=i.useState(!0);i.useEffect(()=>{const n=setInterval(()=>{m(!1),setTimeout(()=>{a(D=>D===d.length-1?0:D+1),m(!0)},1e3)},1e4);return()=>clearInterval(n)},[d.length]);const r=()=>{c(!1),j(null),s(!0)},h=n=>{c(!0),j(n),s(!0)},l=n=>{x(f?D=>D.map(k=>k.id===n.id?n:k):[...d,{...n,id:Date.now()}]),s(!1)},g=n=>{x(D=>D.filter(k=>k.id!==n))};return e.jsxs(o,{px:2,children:[e.jsx(W,{navLinks:[{title:"Notice Board",path:"/RITeSchool/Teacher/NoticeBoardBaseScreen"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Add/Edit/Delete notice board messages. Click on Add button to add new message.Click on Edit/Delete button to modify/delete message.",children:e.jsx(w,{sx:{color:"white",backgroundColor:y[500],"&:hover":{backgroundColor:y[600]}},children:e.jsx(se,{})})}),e.jsx(T,{title:"Add",children:e.jsx(w,{onClick:r,sx:{color:"white",backgroundColor:F[500],"&:hover":{backgroundColor:F[600]}},children:e.jsx(K,{})})})]})}),e.jsx(X,{in:p,style:{marginBottom:"10px"},children:e.jsx(Y,{sx:{width:"100%",color:"#38548A",bgcolor:"#F0F0F0","& .MuiAlert-message":{width:"100%",textAlign:"center"},"& .MuiAlert-icon":{display:"none"}},children:d[t].message})}),e.jsx(o,{sx:{background:"white",p:1,mb:1},children:e.jsxs(o,{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx(A,{variant:"h4",sx:{mb:0,lineHeight:"normal",alignSelf:"center",paddingBottom:"2px"},children:"Legend"}),e.jsxs(o,{sx:{display:"flex",gap:"20px"},children:[e.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(I,{style:{color:y[200],fontSize:25,position:"relative",top:"-2px"}}),e.jsx(A,{children:"Active Notice"})]}),e.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(I,{style:{color:y[500],fontSize:25,position:"relative",top:"-2px"}}),e.jsx(A,{children:"Default Notice"})]})]})]})}),e.jsx(o,{sx:{backgroundColor:n=>n.palette.common.white,p:2},children:e.jsx(le,{notes:d,onEdit:h,onDelete:g})}),e.jsx(o,{children:b&&e.jsx(ae,{open:b,onClose:()=>s(!1),onSave:l,note:S,editMode:f})})]})};export{pe as default};
