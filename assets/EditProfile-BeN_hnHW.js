function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/web-DnzzXdb1.js","assets/index-d5YOjbb6.js","assets/index-eMsTkouY.css","assets/ErrorMessages-D1wiRwH0.js","assets/Note-DS5-MtV-.js","assets/CardStyle-B9qFmFtz.js","assets/Card-BrM9kpJu.js","assets/BackButton-BE5_8L9j.js","assets/PageHeader-DqqjGq3-.js","assets/ButtonStyle-DaPKUawX.js","assets/ProfileStyled-QxKqUu01.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{V as $,W as Y,j as e,eu as J,ev as K,r as a,u as Q,c as I,fu as X,t as U,f$ as Z,g0 as ee,B as F,G as r,g1 as te,bx as se,g2 as ae,g3 as oe}from"./index-d5YOjbb6.js";import{E as ie}from"./ErrorMessages-D1wiRwH0.js";import{N as re}from"./Note-DS5-MtV-.js";import{B as ne}from"./BackButton-BE5_8L9j.js";import{P as le}from"./PageHeader-DqqjGq3-.js";import{B as M}from"./ButtonStyle-DaPKUawX.js";import{L as ce}from"./CardStyle-B9qFmFtz.js";import{c as de}from"./ProfileStyled-QxKqUu01.js";var w={},ue=Y;Object.defineProperty(w,"__esModule",{value:!0});var O=w.default=void 0,he=ue($()),A=e,me=(0,he.default)([(0,A.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,A.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"1")],"CameraAlt");O=w.default=me;var j;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(j||(j={}));var D;(function(t){t.Rear="REAR",t.Front="FRONT"})(D||(D={}));var v;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(v||(v={}));const ge=J("Camera",{web:()=>K(()=>import("./web-DnzzXdb1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>new t.CameraWeb)});async function fe(t){const n=await(await fetch(t)).blob();return new Promise((f,o)=>{const i=new FileReader;i.onerror=o,i.onload=()=>{typeof i.result=="string"?f(i.result):o("method did not return a string")},i.readAsDataURL(n)})}const pe=()=>{const[t,c]=a.useState([]),n=async(o,i)=>{const p=await fe(o.webPath);return{filepath:i,webviewPath:o.webPath,base64Data:p}};return{photos:t,takePhoto:async()=>{try{const o=await ge.getPhoto({resultType:v.Uri,source:j.Camera,quality:55}),i=new Date().getTime()+".jpeg",u=[await n(o,i)];c(u)}catch{console.error("Failed to browse image")}finally{}}}},xe=["1) The student photo to be uploaded should be in school uniform.","2) Upload or Capture an image file for students photo (Max Height: 151px and Max Width: 112px) ","3) Image size should not exceed 1 mb. Supported file formats are JPG, JPEG, PNG, BMP "];function Se(){const t=Q(),c=localStorage.getItem("localSchoolId"),n=sessionStorage.getItem("StudentId"),f=sessionStorage.getItem("AcademicYearId"),o=localStorage.getItem("UserId"),[i,p]=a.useState(""),u=I(s=>s.EditProfile.SaveStudentPhoto),S=I(s=>s.EditProfile.SubmitStudentPhoto),h=I(s=>s.StudentPic.GetStudentpic);h==null||h.IsSubmitted;const N={aiSchoolId:parseInt(c),aiUserId:parseInt(o),aiStudentId:parseInt(n)},k=112,T=151,L=sessionStorage.getItem("StudentName"),y=sessionStorage.getItem("PhotoFilePath"),[G,H]=a.useState(y.length!=0?"data:image/png;base64,"+y:"/imges/defualtUser.jpg"),[l,E]=a.useState(""),[B,m]=a.useState(!0),[_,g]=a.useState(!0);a.useRef(null);const[C,P]=a.useState(""),V=async s=>{if(s.target.files&&s.target.files.length>0){let R=te(s.target.files[0],["jpg","jpeg","png","bmp"],1e6);if(R===null){let b=await se(s.target.files[0]);p(b.slice(b.indexOf(",")+1));let d=new Image;d.src=window.URL.createObjectURL(s.target.files[0]),d.onload=()=>{d.width>k&&d.height>T?(m(!0),g(!1),P(`Image is ${d.height} x ${d.width}, Height and Width of photo file should not exceed 151px and 112px respectively`)):(m(!1),g(!0),E(b))}}else m(!0),P(R)}},{photos:x,takePhoto:q}=pe();a.useEffect(()=>{t(X(N))},[]),a.useEffect(()=>{h!==null&&(H("data:image/png;base64,"+h.PhotoImage),g(!1))},[h]),a.useEffect(()=>{x!==void 0&&x.length&&(E(x[0].base64Data),m(!1))},[x]),a.useEffect(()=>{P("")},[l]),a.useEffect(()=>{u.Message!==void 0&&(U.success(u.Message,{toastId:"success2"}),t(Z()))},[u]),a.useEffect(()=>{S.Message!==void 0&&(U.success(S.Message,{toastId:"success1"}),t(ee()),sessionStorage.setItem("PhotoFilePath",l.slice(l.indexOf(",")+1)),setTimeout(()=>{window.location.reload()},5e3))},[S]);const z=()=>{g(!1),m(!0);const s={aiSchoolId:c,aiStudentId:n,aiInsertedById:o,asPhotoBase64String:l.slice(l.indexOf(",")+1)};t(ae(s))},W=()=>{g(!0),t(oe({aiStudentId:n,aiUpdatedById:o,aiSchoolId:c,aiAcademicYearId:f}))};return e.jsxs(F,{sx:{px:2},children:[e.jsx(le,{heading:"Edit Profile",subheading:""}),e.jsx(ne,{FromRoute:"/Student/Profile"}),e.jsx(re,{NoteDetail:xe}),e.jsxs(ce,{children:[e.jsxs(de,{sx:{textAlign:"center"},children:[" ",e.jsx("b",{children:"Name : "}),e.jsx("b",{children:L})]}),e.jsxs(F,{sx:{textAlign:"center"},children:[e.jsx("img",{src:l==""?G:l,width:"112",height:"151",style:{border:"1px solid gray"}}),e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx("input",{style:{padding:"1em",width:"220px",overflow:"hidden",textOverflow:"ellipsis"},type:"file",accept:"image/*",onChange:V})}),e.jsx(r,{item:!0,xs:6,style:{padding:"1em",marginTop:"2.5px"},onClick:()=>q(),children:e.jsx(O,{})})]}),e.jsx(r,{item:!0,xs:6,sx:{mt:"-3px",mb:"3px"},children:C&&e.jsx(ie,{Error:C})})]}),e.jsxs(r,{container:!0,spacing:3,sx:{textAlign:"center"},children:[e.jsx(r,{item:!0,xs:3}),e.jsx(r,{item:!0,xs:3,children:e.jsx(M,{onClick:z,disabled:B,color:B?"warning":"primary",children:"Save"})}),e.jsx(r,{item:!0,xs:3,children:e.jsx(M,{onClick:W,disabled:_,color:_?"warning":"primary",children:"Submit"})}),e.jsx(r,{item:!0,xs:3})]})]})]})}const Be=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));export{j as C,Be as E,D as a};
