import{j as e,a2 as B,a3 as z,bl as ee,T as v,a5 as Y,B as y,A as E,r as c,G as F,I as P,as as te,at as se,u as M,c as D,k as q,V as O,W as $,cz as oe,b5 as ae,cA as re,cB as ie,cC as J}from"./index-d5YOjbb6.js";import{d as le}from"./Attachment-DgcWq5kr.js";import{L as ce}from"./CardStyle-B9qFmFtz.js";import{d as ne}from"./Clear-CcnDAt6P.js";import{C as de}from"./Clear-DpEYrJI-.js";import{C as ue}from"./Card-BrM9kpJu.js";const Fe=({open:s,setOpen:h})=>{const i=()=>{h(!1),sessionStorage.setItem("hasShownFeeStructurePopup","true")};let n=localStorage.getItem("SiteURL")+"/RITESCHOOL/images/Fee%20Structure%202024-2025.png";return e.jsxs(B,{open:s,onClose:i,maxWidth:"md",PaperProps:{sx:{width:"900px",maxWidth:"100vw",borderRadius:"15px"}},children:[e.jsx(z,{sx:{bgcolor:"#223354"},children:e.jsx(ee,{onClick:i,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(v,{variant:"h3",sx:{pt:2,pl:2},children:"Fee Structure Notice of AY 2024-25"}),e.jsx(Y,{sx:{overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(y,{children:e.jsx("img",{src:n,alt:"Fee Structure 2024-2025",style:{transform:"scale(1.09)",maxWidth:"100%"}})})})]})},he=({item:s,downloadNotice:h,clickSingle:i})=>{E(),c.useState(!0);const n=l=>{i({name,value:l,checked:!s.isActive})};return e.jsx(e.Fragment,{children:e.jsxs(F,{item:!0,container:!0,xs:12,children:[e.jsx(F,{item:!0,xs:11,children:e.jsxs(ce,{color:s.IsImageNotice?"secondary":"primary",sx:{display:"flex",alignItems:"center"},children:[e.jsx(v,{sx:{textDecoration:s.isActive?"line-through":"",fontWeight:s.isActive?"bold":"normal"},onClick:()=>{h(s.FileName,s.IsText,s.Content)},children:s.header}),e.jsx("div",{style:{flex:"1"}}),s.FileName!=""?e.jsx(le,{onClick:()=>{h(s.FileName,s.IsText,s.Content)}}):e.jsx("span",{style:{marginRight:"10px"},children:"-"})]})}),!s.IsImageNotice&&e.jsx(F,{item:!0,xs:.7,sx:{ml:"5px"},children:e.jsx(P,{sx:{color:"#223354",mb:"13px","&:hover":{color:"red",backgroundColor:te[100],mb:"10px"}},onClick:()=>n(s.id),children:e.jsx(se,{})})})]})})},xe=({clickOpen:s})=>{const h=M(),i=localStorage.getItem("localSchoolId"),n=sessionStorage.getItem("Id"),[l,d]=c.useState([]),x=D(a=>a.SchoolNoticeBoard.AllActiveNotices);c.useEffect(()=>{let a=[];localStorage.getItem("ImportantNotices")!==null&&JSON.parse(localStorage.getItem("ImportantNotices").toString()).map(r=>{r.UserId==n&&(a=r.ids.split(","))}),d(x.filter(t=>!a.includes(t.Id)&&(t.DisplayLocation==="B"||t.DisplayLocation==="C")).map((t,r)=>({id:t.Id,header:t.Name,text2:"",linkPath:"/Common/ViewActiveNotice/"+t.Id,FileName:t.FileName,IsText:t.IsText,Content:t.Content,IsImageNotice:t.IsImageNotice,DisplayLocation:t.DisplayLocation,isActive:!1})))},[x]),c.useEffect(()=>{h(q({asSchoolId:i,asUserId:n}))},[]);const p=(a,t,r)=>{s({FileName:a,IsText:t,Content:r})},b=a=>{let t=[],r=[],A=!1,N=localStorage.getItem("ImportantNotices");if(N!=null&&(r=JSON.parse(N),r.map(u=>{u.UserId==n&&(A=!0,t=u.ids.split(","))})),a.checked?t.push(a.value):t=t.filter(u=>u!==a.value),A){let u=[];r.map(f=>{u.push({UserId:f.UserId,ids:f.UserId==n?t.toString():f.ids})}),r=u}else r.push({UserId:n,ids:t.toString()});localStorage.setItem("ImportantNotices",JSON.stringify(r)),d(l.map(u=>u.id===a.value?{...u,isActive:a.checked}:u))};return e.jsxs(e.Fragment,{children:[l.map((a,t)=>e.jsx("div",{style:{display:"flex"},children:e.jsx(he,{item:a,downloadNotice:p,clickSingle:b})},t))," "]})};var w={},pe=$;Object.defineProperty(w,"__esModule",{value:!0});var G=w.default=void 0,me=pe(O()),ge=e,fe=(0,me.default)((0,ge.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");G=w.default=fe;var L={},Ie=$;Object.defineProperty(L,"__esModule",{value:!0});var K=L.default=void 0,Se=Ie(O()),ve=e,Ne=(0,Se.default)((0,ve.jsx)("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit");K=L.default=Ne;var T={},je=$;Object.defineProperty(T,"__esModule",{value:!0});var Q=T.default=void 0,ye=je(O()),Ae=e,Re=(0,ye.default)((0,Ae.jsx)("path",{d:"M6 19h12v2H6z"}),"Minimize");Q=T.default=Re;const be=({open:s,onClose:h,link:i,contentType:n,onMinimize:l})=>{const[d,x]=c.useState(!1),p=()=>{x(!d)};return c.useEffect(()=>{s||x(!1)},[s]),e.jsxs(B,{open:s,onClose:h,maxWidth:"md",PaperProps:{sx:{borderRadius:"15px",zIndex:1300,overflow:"auto",width:d?"80%":"50%",height:d?"100vh":"75vh",maxHeight:"90vh"}},sx:{zIndex:1300},children:[e.jsxs(z,{sx:{bgcolor:"#223354",position:"relative"},children:[e.jsx(P,{onClick:l,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"-6px",right:"65px",cursor:"pointer","&:hover":{color:"grey"}},children:e.jsx(Q,{})}),e.jsx(P,{onClick:p,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"0.1px",right:"35px",cursor:"pointer","&:hover":{color:"grey"}},children:d?e.jsx(K,{}):e.jsx(G,{})}),e.jsx(ne,{onClick:h,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(Y,{sx:{maxWidth:"100%",height:"100%",alignItems:"center"},children:e.jsx(Y,{children:n==="image"?e.jsx(y,{display:"flex",justifyContent:"center",alignItems:"center",sx:{mt:7},children:e.jsx("img",{src:i,alt:"School Notice",style:{maxWidth:"100%",height:"auto"}})}):e.jsx(v,{dangerouslySetInnerHTML:{__html:i}})})})]})},Pe=({open:s,setOpen:h})=>{E();const i=M(),n=()=>{h(!1),sessionStorage.setItem("hasShownPopup","true")},[l,d]=c.useState(!1),[x,p]=c.useState("");c.useState("");const[b,a]=c.useState(""),t=Number(localStorage.getItem("localSchoolId")),r=sessionStorage.getItem("RoleId"),A=oe(g=>g.SchoolNoticePopup.SchoolNoticePopUP),N={asSchoolId:t,asDisplayLocation:"B,C",asShowAllNotices:0,asSortExpression:"",asStartIndex:0,asEndIndex:40,asLoginUserRoleId:Number(r)};c.useEffect(()=>{i(ae(N))},[]);let u=localStorage.getItem("SiteURL")+"RITeSchool/DOWNLOADS/School Notices/";const f=g=>{d(!0),U(g)},U=g=>{const R=g.FileName?u+g.FileName:g.Content;if(R){p(R);const k=/\.(pdf|jpg|jpeg|png|gif|bmp)$/i.test(R);a(k?"image":"text"),d(!0)}};return e.jsxs(e.Fragment,{children:[e.jsxs(B,{open:s,onClose:n,fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(z,{sx:{bgcolor:"#223354",position:"relative"},children:e.jsx(de,{onClick:n,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(v,{variant:"h3",sx:{pt:1,pl:2},children:"School Notices"}),e.jsx(Y,{sx:{maxHeight:A.length>5?"36vh":"auto",overflowY:A.length>5?"auto":"hidden"},children:e.jsx(xe,{clickOpen:f})})]}),e.jsx(be,{open:l,onClose:()=>d(!1),onMinimize:()=>d(!1),link:x,contentType:b})]})};function Be(){E();const s=M(),h=sessionStorage.getItem("AcademicYearId"),i=localStorage.getItem("localSchoolId"),n=sessionStorage.getItem("RoleId"),l=sessionStorage.getItem("Id"),d=sessionStorage.getItem("RoleId"),x=sessionStorage.getItem("Id"),[p,b]=c.useState(""),a=new Date().getFullYear(),t=`${a-1}-${a}`,[r,A]=c.useState(()=>sessionStorage.getItem("AcademicYearId")||""),N=D(o=>o.SchoolNoticeBoard.AllActiveNotices),u=D(o=>o.SchoolNoticeBoard.SchoolNoticeBoard),f=D(o=>o.getSchoolSettings.AllAcademicYears),U={aiSchoolId:i,aiAcademicYearId:h,aiUserRoleId:n},g={asSchoolId:i,asUserId:l};c.useEffect(()=>{const o={asSchoolId:Number(i),asUserId:Number(x),asUserRoleId:Number(d)};s(re(o))},[x,d]),c.useEffect(()=>{i&&h&&(s(ie(U)),s(q(g)))},[i,h]),c.useEffect(()=>{const o=f.find(m=>m.Value===r);o&&(sessionStorage.setItem("AcademicYearId",o.Value),localStorage.setItem("SchoolId",o.Text1),sessionStorage.setItem("SchoolName",o.Text4),b(o.Name))},[r,f]),c.useEffect(()=>{let o=N.map(C=>C.Id),m=!1;if(o.length>0){let C=sessionStorage.getItem("NoticeRead"),j=null,W=!1;if(C!=null&&(j=JSON.parse(C),j.map(I=>{I.UserId==l&&I.NoticeRead=="Y"&&(W=!0)})),!W){let I=[],S=null;if(localStorage.getItem("ImportantNotices")!==null){S=JSON.parse(localStorage.getItem("ImportantNotices").toString());let H=!1;S.map(V=>{V.UserId==l&&(H=!0,I=V.ids.split(","),o.map(Z=>{I.includes(Z.toString())||(m=!0)}))}),H||(m=!0)}else m=!0}let _=[];if(m){if(j!==null&&j.length>0){let I=!1;j.map(S=>{S.UserId==l&&(I=!0)}),I?_=j.map(S=>({...S,NoticeRead:S.UserId==l?"Y":S.NoticeRead})):_=[...j,{UserId:l,NoticeRead:"Y"}]}else _=[{UserId:l,NoticeRead:"Y"}];sessionStorage.setItem("NoticeRead",JSON.stringify(_))}}},[l,r]);const R=u.filter(o=>o.Is_Default_Msg===!1),k=u.filter(o=>o.Is_Default_Msg===!0),X=R.length>0;return e.jsxs(y,{children:[e.jsx(ue,{component:y,mt:2,p:.3,children:e.jsx(J,{delay:1,children:X?R.map((o,m)=>e.jsx("div",{children:e.jsxs(y,{sx:{display:"flex"},children:[e.jsx(v,{sx:{ml:"10px"},children:" ðŸ”¶"}),e.jsx(v,{sx:{ml:"10px"},children:o.Message})]})},m)):k.map((o,m)=>e.jsx("div",{children:e.jsxs(y,{sx:{display:"flex"},children:[e.jsx(v,{sx:{ml:"10px"},children:" ðŸ”¶"}),e.jsx(v,{sx:{ml:"10px"},children:o.Message})]})},m))})}),e.jsx(J,{speed:24,children:p&&p!==t&&e.jsxs(y,{style:{color:"red",fontStyle:"robotto",fontWeight:"bold",fontSize:"16px",visibility:p!==t?"visible":"hidden",marginTop:"10px"},children:["You are viewing data of old academic year (",p,"). Please do not modify any data."]})})]})}export{Fe as F,Pe as S,Be as a};
