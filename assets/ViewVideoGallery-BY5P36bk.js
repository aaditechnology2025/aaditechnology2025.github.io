import{r as l,w as re,x as h,u as ie,E as de,c as T,pd as k,t as W,pe as ne,pf as ce,j as e,B as _,F as ue,H as m,I as p,J as N,L as V,T as U,G as f,q as y,ai as xe,c8 as he,aj as me,ak as pe,al as $,am as d,an as fe,ab as je,az as be,as as ge,at as Ve,a2 as ye,a3 as Ie,bl as we,a5 as De,pg as Se,ph as O}from"./index-d5YOjbb6.js";import{d as Ce}from"./Save-Ckr0NoeK.js";import{d as ve}from"./SaveAs-CsLzPj7T.js";import{Q as Te}from"./QuestionMark-C2Y4lgD8.js";const Le=()=>{const[ke,B]=l.useState([{id:1,url:"https://www.youtube.com/embed/6fc2ahfyYQ0",title:"Sasa"},{id:2,url:"https://www.youtube.com/embed/6fc2ahfyYQ0",title:"Saaasa"}]);let{Video_Id:n,videoName:c,URLSource:b}=re();console.log(h(n),h(c),h(b),"1234567"),n=h(n),c=h(c),b=h(b);const i=ie(),[s,j]=l.useState({url:"",title:""}),[I,E]=l.useState(null),[Q,L]=l.useState(!1),[H,M]=l.useState(""),[w,R]=l.useState(!1),[P,Y]=l.useState(""),[G,q]=l.useState(""),[J,z]=l.useState(""),{showAlert:K,closeAlert:A}=l.useContext(de),g=Number(localStorage.getItem("localSchoolId")),D=Number(localStorage.getItem("UserId")),o=T(t=>t.VideoNew.ISGetViewVideoDetails),S=T(t=>t.VideoNew.SaveUpdateVideo),C=T(t=>t.VideoNew.DeleteVideoGallary),v={asSchoolId:Number(g),asVideoId:Number(n),asSubjectId:0};l.useEffect(()=>{i(k(v))},[]),l.useEffect(()=>{o&&o.length>0&&z(o[0].VideoDetailsId)},[o]);const X=t=>{const a={asSchoolId:Number(g),asVideoId:Number(n),asIsDeleted:1,asUpdateDate:new Date().toISOString().split("T")[0],asId:Number(t),asUpdatedById:Number(D)};K({title:"Please Confirm",message:"Are you sure you want to delete this video?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{A()},onConfirm:()=>{i(Se(a)),A()}})};l.useEffect(()=>{C!=""&&(W.success(C),i(ne()),i(k(v)))},[C]);const Z={asVideoId:Number(n),asVideoDetailId:0,asVideoName:c,asDescription:P,asVideoURL:G,asSchoolId:Number(g),asInsertedById:Number(D),asSubjectId:0},ee={asVideoId:Number(n),asVideoDetailId:Number(J),asVideoName:c,asDescription:P,asVideoURL:G,asSchoolId:Number(g),asInsertedById:Number(D),asSubjectId:0};l.useEffect(()=>{s&&(q(s.url),Y(s.title))},[s]);const te=t=>{const a=o.find(r=>r.VideoDetailsId===t);a&&(j({url:a.url,title:a.title}),E(t),z(t.toString()))},[u,x]=l.useState({url:!1,title:!1}),le=()=>{const t={url:s.url.trim()==="",title:s.title.trim()===""};if(t.url||t.title){x(t);return}I!==null&&(B(a=>a.map(r=>r.id===I?{...r,...s}:r)),j({url:"",title:""}),E(null),x({url:!1,title:!1})),i(O(ee))},se=()=>{const t={url:s.url.trim()==="",title:s.title.trim()===""};if(t.url||t.title){x(t);return}const a=o.length?Math.max(...o.map(r=>r.id))+1:1;B([...o,{id:a,url:s.url,title:s.title}]),j({url:"",title:""}),x({url:!1,title:!1}),i(O(Z))};l.useEffect(()=>{S!=""&&(W.success(S),i(ce()),i(k(v)))},[S]);const ae=t=>{const r=`https://www.youtube.com/embed/${t.includes("youtube.com")?new URL(t).searchParams.get("v"):t.split("/").pop()}`;M(r),L(!0),R(!1)},F=()=>{L(!1)},oe=()=>{R(t=>!t)};return e.jsxs(_,{px:2,children:[e.jsx(ue,{navLinks:[{title:"Photo/Video Gallery",path:"/RITeSchool/Teacher/PhotoVideoGalleryBaseScreen"},{title:"View Video Gallery",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(m,{title:"Add / Edit / Delete videos of selected gallery.",children:e.jsx(p,{sx:{color:"white",backgroundColor:N[500],"&:hover":{backgroundColor:N[600]}},children:e.jsx(Te,{})})}),I?e.jsx(e.Fragment,{children:e.jsx(m,{title:"Update",children:e.jsx(p,{sx:{color:"white",backgroundColor:V[500],"&:hover":{backgroundColor:V[600]}},onClick:le,children:e.jsx(ve,{})})})}):e.jsx(m,{title:"Save",children:e.jsx(p,{sx:{color:"white",backgroundColor:V[500],"&:hover":{backgroundColor:V[600]}},onClick:se,children:e.jsx(Ce,{})})})]})}),e.jsx(e.Fragment,{children:(u.url||u.title)&&e.jsxs(e.Fragment,{children:[u.url&&e.jsx(U,{variant:"body2",color:"error",sx:{mb:1},children:"URL should not be blank."}),u.title&&e.jsx(U,{variant:"body2",color:"error",sx:{mb:1},children:"Title should not be blank."})]})}),e.jsxs(_,{sx:{backgroundColor:"white",p:2},children:[e.jsxs(f,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(f,{item:!0,xs:6,children:e.jsx(y,{fullWidth:!0,label:"Gallery Name",value:b,InputProps:{readOnly:!0}})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(y,{fullWidth:!0,label:"URL Source",value:c,InputProps:{readOnly:!0}})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(y,{fullWidth:!0,label:e.jsxs("span",{children:["URL ",e.jsx("span",{style:{color:"red"},children:"*"})]}),name:"url",value:s.url,onChange:t=>{j({...s,url:t.target.value}),x({...u,url:!1})}})}),e.jsx(f,{item:!0,xs:6,children:e.jsx(y,{fullWidth:!0,label:e.jsxs("span",{children:["Title ",e.jsx("span",{style:{color:"red"},children:"*"})]}),name:"title",value:s.title,onChange:t=>{j({...s,title:t.target.value}),x({...u,title:!1})}})}),e.jsx(f,{item:!0})]}),e.jsx(xe,{component:he,sx:{mt:0},children:e.jsxs(me,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(pe,{children:e.jsxs($,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsx(d,{sx:{textTransform:"capitalize",color:"white",py:1.5},children:"Comments"}),e.jsx(d,{align:"center",sx:{textTransform:"capitalize",color:"white",py:1.5},children:"View"}),e.jsx(d,{align:"center",sx:{textTransform:"capitalize",color:"white",py:1.5},children:"Edit"}),e.jsx(d,{align:"center",sx:{textTransform:"capitalize",color:"white",py:1.5},children:"Delete"})]})}),e.jsx(fe,{children:o.map(t=>e.jsxs($,{children:[e.jsx(d,{sx:{textTransform:"capitalize",py:1.5},children:t.title}),e.jsx(d,{sx:{textTransform:"capitalize",py:.5,textAlign:"center"},children:e.jsx(m,{title:"View",children:e.jsx(p,{onClick:()=>ae(t.url),color:"primary",children:e.jsx(je,{})})})}),e.jsx(d,{sx:{textTransform:"capitalize",py:.5,textAlign:"center"},children:e.jsx(m,{title:"Edit",children:e.jsx(p,{color:"primary",onClick:()=>te(t.VideoDetailsId),children:e.jsx(be,{})})})}),e.jsx(d,{sx:{textTransform:"capitalize",py:.5,textAlign:"center"},children:e.jsx(m,{title:"Delete",children:e.jsx(p,{sx:{color:"primary","&:hover":{color:"red",backgroundColor:ge[100]}},onClick:()=>X(t.VideoDetailsId),children:e.jsx(Ve,{})})})})]},t.id))})]})})]}),e.jsxs(ye,{open:Q,onClose:F,fullWidth:!0,maxWidth:w?!1:"md",PaperProps:{sx:w?{width:"100%",height:"100%"}:{height:"auto",borderRadius:"15px"}},children:[e.jsx(Ie,{sx:{bgcolor:"#223354"},children:e.jsx(we,{onClick:F,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsxs(De,{sx:{display:"flex",flexDirection:"column",position:"relative",p:0},children:[e.jsx("iframe",{src:H,title:"Video Player",frameBorder:"1",allowFullScreen:!0,width:"100%",height:w?"100%":"500px",onDoubleClick:oe}),e.jsx(U,{align:"center",sx:{fontSize:14,color:N[600],mt:1},children:"Double-click the video to toggle fullscreen."})]})]})]})};export{Le as default};
