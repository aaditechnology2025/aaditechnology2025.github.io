import{u as De,A as Ie,w as fe,x as k,r as s,E as je,c as r,d3 as be,cY as Ce,cX as Ae,i9 as ke,t as $,cZ as ye,ia as Le,d5 as q,d2 as Te,j as e,B as K,F as Ne,H as y,I as L,J as T,K as Pe,L as E,ax as Be,G as n,T as x,D as we,q as m,ce as Fe,bQ as Me,p as Re,a8 as Q,as as Ue,d0 as Ge,m as We}from"./index-d5YOjbb6.js";import{d as He}from"./Save-Ckr0NoeK.js";import{S as Ye}from"./SingleFile-BT4Sw5XK.js";import{T as ze}from"./TabularList-BSP9Bq14.js";import{S as Oe}from"./SelectListHierarchy-2EYf6pPL.js";import"./CloudUpload-DJN1zp2n.js";import"./Errormessage-RPRSgLGN.js";const et=()=>{const a=De(),Z=Ie();let{Id:i,Event_Id:N,Name:P}=fe();i=k(i),N=k(N),P=k(P);const ee=["PDF","JPG","PNG","BMP","JPEG"],te=3e6;s.useState("");const[S,g]=s.useState(""),[B,w]=s.useState(""),[p,D]=s.useState(""),[F,M]=s.useState(""),[I,f]=s.useState(""),[R,U]=s.useState(""),[u,G]=s.useState(""),[se,W]=s.useState("");s.useState([]);const[H,ne]=s.useState("");s.useState("");const[j,Y]=s.useState(""),[z,O]=s.useState("");s.useState("");const{showAlert:ae,closeAlert:_}=s.useContext(je),[b,C]=s.useState([]),[_e,re]=s.useState("");s.useState(0);const[J,V]=s.useState(!1),o=Number(localStorage.getItem("localSchoolId")),v=Number(sessionStorage.getItem("AcademicYearId"));Number(sessionStorage.getItem("StandardDivisionId")),sessionStorage.getItem("StandardId"),sessionStorage.getItem("DivisionId");const h=Number(sessionStorage.getItem("TeacherId")),oe=r(t=>t.EventsManagement.EventListt),l=r(t=>t.EventsManagement.EventDetailss),X=r(t=>t.EventsManagement.AllClassesAndDivisionss),ie=r(t=>t.EventsManagement.AllClassesAndDivisionss1);r(t=>t.EventsManagement.SelectedStandardAndDivisionCheckBoxx);const d=r(t=>t.EventsManagement.SaveUpdateEventt),A=r(t=>t.EventsManagement.DeleteEventt);r(t=>t.EventsManagement.DeleteEventImagee),s.useEffect(()=>{a(be({asEventDate:"2024-02-07",asSchoolId:18,asAcademicYearId:54,asStandardId:1059,asDivisionId:1288}))},[]),s.useEffect(()=>{const t={asSchoolId:o,asAcademicYearId:v,asEventId:Number(i)};a(Ce(t))},[]),s.useEffect(()=>{l!==null&&(g(l.EventTitle),f(l.EventDescription),D(l.EventStartDate),V(l.showRiseAndShine))},[l]),s.useEffect(()=>{C(X)},[X]),s.useEffect(()=>{a(Ae({asSchoolId:o,asAcademicYearId:v}))},[]),s.useEffect(()=>{const t={asSchoolId:o,asEventId:Number(i)};a(ke(t))},[]),s.useEffect(()=>{d!==""&&($.success(d,{toastId:"success1"}),a(ye()))},[d]);const le={asSchoolId:o,asEventId:Number(i),asUserId:Number(h)};s.useEffect(()=>{A!==""&&($.success(A,{toastId:"success1"}),a(Le()),a(q(le)))},[A]),s.useEffect(()=>{const t={asSchoolId:o,asAcademicYearId:v,asEventId:Number(i),asUserId:Number(h)};a(Te(t))},[]);const[Je,ce]=s.useState([]);s.useEffect(()=>{ce(d)},[d]);const de=()=>{let t="<StandardDivisions>";return Array.isArray(b)&&b.map(c=>{c.IsActive&&(t=t+' <Division StandardDivisionId="'+c.Id+'" />')}),t+="</StandardDivisions>",t},ue=t=>{S==""&&w("Title should not be blank."),I==""&&U("Description should not be blank."),p==""&&M("Start date should not be blank."),j==""&&O("End date should not be blank."),u==""&&H==""&&W("Please Choose a file");const c={asEventName:S,asEventDescription:I,asEventStartDate:p,asEventEndDate:j,asDisplayOnHomepage:J,asEventImageName:u,asSchoolId:o,asAcademicYearId:v,asInsertedById:h.toString(),asUpdatedById:"754",asStandardDivisions:de(),asSaveFeature:"Event Planner",asFolderName:"PPSN Website",asBase64String:H,asEventId:0};a(Ge(c))},ve=()=>{g(""),f(""),D(""),Y(""),G(""),C([])},he=t=>{G(t.Name),ne(t.Value)},Ee=()=>{ve(),W(""),w(""),U(""),M(""),O(""),re("")},xe=t=>{Z("/RITeSchool/Teacher/EventManegement//"+We(t),{state:{fromInternal:!0}})},me=t=>{const c={asSchoolId:o,asEventId:Number(t),asUserId:Number(h)};ae({title:"Please Confirm",message:"Are You Sure you want to delete the List?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{_()},onConfirm:()=>{a(q(c)),_()}})},Se=t=>{C(t)},ge=t=>{V(t)},pe=localStorage.getItem("SiteURL")+"/RITeSchool//DOWNLOADS/Event Planner/"+u;return e.jsx(e.Fragment,{children:e.jsxs(K,{sx:{px:2},children:[e.jsx(Ne,{navLinks:[{title:"Annual Planner",path:"/RITeSchool/Common/AnnualPlanner"},{title:"Event(s) Management",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Add or Update Events",children:e.jsx(L,{sx:{color:"white",backgroundColor:T[500],height:"36px !important",":hover":{backgroundColor:T[600]}},children:e.jsx(Pe,{})})}),e.jsx(y,{title:"Add new Event",children:e.jsx(L,{sx:{color:"white",backgroundColor:T[500],height:"36px !important",":hover":{backgroundColor:E[600]}},children:e.jsx(Be,{})})}),e.jsx(y,{title:"Save Event",children:e.jsx(L,{sx:{color:"white",backgroundColor:E[600],height:"36px !important",":hover":{backgroundColor:E[600]}},children:e.jsx(He,{})})})]})}),e.jsxs(K,{sx:{background:"white",p:2},children:[e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{variant:"h4",children:"Event(s) as of today."})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(ze,{ItemList:oe,clickEdit:xe,clickDelete:me})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(we,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{variant:"h4",children:"Add a new Event."})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Title ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:S,onChange:t=>{g(t.target.value)},error:B!=="",helperText:B,fullWidth:!0,sx:{resize:"both"}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:I,onChange:t=>{f(t.target.value)},error:R!=="",helperText:R,fullWidth:!0,sx:{resize:"both"}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["Start Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),inputProps:{type:"date"},InputLabelProps:{shrink:!0},value:p,onChange:t=>{D(t.target.value)},error:F!=="",helperText:F,fullWidth:!0})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(m,{label:e.jsxs("span",{children:["End Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),inputProps:{type:"date"},InputLabelProps:{shrink:!0},value:j,onChange:t=>{Y(t.target.value)},error:z!=="",helperText:z,fullWidth:!0})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(Oe,{ItemList:b,ParentList:ie,ClickChild:Se})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(x,{children:e.jsx(Fe,{control:e.jsx(Me,{checked:J,onChange:t=>{ge(t.target.checked)}}),label:"Display On Homepage"})})}),e.jsxs(n,{item:!0,xs:6,children:[e.jsx(x,{fontSize:"10px",children:"Attachment:"}),e.jsx(Ye,{ValidFileTypes:ee,MaxfileSize:te,ChangeFile:he,errorMessage:se,FilePath:pe,FileName:u,viewIcon:!0,deleteIcon:!0})]})]}),e.jsxs(Re,{spacing:2,direction:"row",justifyContent:"center",children:[e.jsxs(Q,{onClick:Ee,children:["sx=",{color:"red",":hover":{backgroundColor:Ue[100]}},"Cancel"]}),e.jsx(Q,{onClick:ue,sx:{color:"green",":hover":{backgroundColor:E[100]}},children:"Save"})]})]})]})})};export{et as default};
