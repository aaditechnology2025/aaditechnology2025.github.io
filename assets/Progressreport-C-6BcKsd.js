import{P as o,r as a,h as z,bH as ue,S as U,j as e,cI as X,B as F,c as I,u as Z,f7 as ge,M as he,O as pe,Q as me,f8 as fe,f9 as xe,fa as Se,fb as je,s as be,o as ke}from"./index-d5YOjbb6.js";import{N}from"./Note-DS5-MtV-.js";import{L as v,C as m,e as ye}from"./CardStyle-B9qFmFtz.js";import{d as Y,A as Ie,H as Pe}from"./AccordianStyled-BS_ED8m5.js";import{_ as Re}from"./react-apexcharts.min-C7d5Zeoa.js";import{P as Fe}from"./PageHeader-DqqjGq3-.js";import{b as Me,D as Ee}from"./DotLegendStyled-B7Xptujc.js";import"./Card-BrM9kpJu.js";ee.propTypes={subject:o.any,subjectgrade:o.any,indexval:o.number,MarkScored:o.any,Data:o.any};function ee({Gradeormarks:r,subject:c}){const[l,i]=a.useState(!0);a.useState(!1);const h=z(),p=ue({root:{background:"#ff7961"},roo1:{background:`${h.colors.gradients.pink1}`},timesx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}});U();const f=p();return e.jsx("div",{children:e.jsx(e.Fragment,{children:(r==null?void 0:r.length)===0&&(c==null?void 0:c.length)===0?null:e.jsx(X,{in:l,style:{transformOrigin:"0 0 1"},...l?{timeout:1500}:{},children:e.jsx(v,{children:e.jsx(F,{children:e.jsxs(F,{className:f.timesx,children:[e.jsx(m,{children:c.map((d,g)=>e.jsx("div",{children:e.jsx("div",{children:d})},g))}),e.jsx(F,{children:r.length!=0&&e.jsx(m,{sx:{color:"blueviolet"},children:r.map((d,g)=>e.jsx("div",{children:e.jsx("div",{children:d=="Exempt"?"Exempted":d})},g))})})]})})})})})})}se.propTypes={percentage:o.any,subjecttotalmarks:o.string,testgrade:o.string,rank:o.string,grade:o.string,subject:o.any,subjectgrade:o.any,indexval:o.any,MarkScored:o.any,Data:o.any,Gradeormarks:o.any};function se({percentage:r,rank:c,grandTotal:l,subjectTotalMarks:i,grade:h,subjectgrade:p,subject:f,indexval:d,MarkScored:g,Data:u,examstatus:M,Gradeormarks:E,showonlyGrade:P}){return e.jsxs(e.Fragment,{children:[e.jsxs(v,{sx:{backgroundColor:"pink"},children:[P.trim()=="false"&&e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(m,{children:" Total"}),e.jsx(m,{children:l+"/"+i})]}),e.jsxs(Y,{children:[e.jsx(m,{children:" Percentage"}),e.jsxs(m,{children:[" ",r]})]})]}),e.jsxs(Y,{children:[e.jsx(m,{children:"Grade"}),e.jsx(m,{children:h})]}),P.trim()=="false"&&e.jsx(e.Fragment,{children:c<=3?e.jsxs(Y,{children:[e.jsx(m,{children:" Rank"}),e.jsxs(m,{children:[" ",c]})]}):null})]}),e.jsx(ee,{subjectgrade:p,subject:f,indexval:d,MarkScored:g,Data:u,Gradeormarks:E})]})}const Ge=({xData:r,series:c,colors:l,dataLabel:i,formatToolTip:h,Isgrade:p})=>{const f=r.length==1?"100rem":r.length==2?"125rem":r.length==3?"150rem":r.length==4?"200rem":r.length==5||r.length==6?"225rem":r.length==7?"400rem":r.length==8?"300rem":r.length==9?"400rem":r.length==10?"300rem":"200rem",d={options:{tooltip:{enabled:p.trim()!=="true",y:{formatter:function(g,u){return h(g,u)}}},chart:{toolbar:{show:!1},id:"basic-bar",background:"#FFFFFF"},legend:{show:!1},dataLabels:{formatter:function(g,u){return i(g,u)},style:{colors:["black"],color:"#000000",fontFamily:"Roboto",fontWeight:600,fontSize:"10px"}},plotOptions:{bar:{distributed:!0,horizontal:!0}},colors:l,xaxis:{categories:r,labels:{show:!1}},yaxis:{labels:{style:{colors:["#000000"],fontSize:"10px",color:"black",fontFamily:"Roboto",fontWeight:600}}}},series:[{name:"Marks",data:c}]};return e.jsx("div",{className:"app",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"mixed-chart",children:e.jsx(Re,{options:d.options,series:d.series,type:"bar",width:"100%",height:f})})})})};te.propTypes={Percentage:o.any,SubjectTotalMarks:o.string,GrandTotal:o.string,Rank:o.string,Grade:o.string,showonlyGrade:o.any};function te({Data:r,ExamId:c,Percentage:l,Rank:i,GrandTotal:h,SubjectTotalMarks:p,Grade:f,showonlyGrade:d}){const[g,u]=a.useState([]),[M,E]=a.useState([]),[P,W]=a.useState([]),[j,R]=a.useState([]);let b=d;var G=[],B;const[D,H]=a.useState([]),k=[],w=[],y=[],T=[],C=[],O=[],_=[],J=[],$=[],L=[],n=[],x=[],A=[],V=[];a.useState([]);const ne=localStorage.getItem("localSchoolId"),oe=sessionStorage.getItem("AcademicYearId"),ae=I(t=>t.getSchoolSettings.ShowTotalAsPerOutOfMarks);r.map((t,S)=>{t.StudentMarksList.filter(s=>s.ConsiderInTotal==="Y").map((s,Q)=>{c==s.ExamId&&(s.Marks==0&&s.ExamStatus=="Absent"||s.ExamStatus=="Late Joinee"||s.ExamStatus=="Exempted"?(k.push("99.99"),y.push("#cf352e")):(y.push("#6699CC"),k.push((s.Marks/Number(s.OutOf)*100).toFixed(2))),T.push(s.Subject),w.push(s.Marks),C.push(s.OutOf),O.push(s.Grade),J.push(s.GradeOrMarks),$.push(s.EndingMarksRange),L.push(s.ExamStatus),n.push(s.ExamStatus),x.push(s.ExamStatus),A.push(s.Marks==0?s.IsAbsent:"N"))})}),r.map((t,S)=>{t.StudentMarksList.map((s,Q)=>{c==s.ExamId&&s.ConsiderInTotal=="N"&&(s.GradeOrMarks=="G"&&V.push(s.Grade),s.GradeOrMarks=="M"&&V.push(s.Marks),G.push(s.Subject),d=s.ShowOnlyGrade,_.push(s.ConsiderInTotal),B=Q)})});const ce=Z(),ie={asSchoolId:parseInt(ne),aiAcademicYearId:parseInt(oe),asKey:""};a.useEffect(()=>{ce(ge(ie))},[]),a.useEffect(()=>{u(T),E(k),W(y),R(C),H(O)},[r]);const de=(t,S)=>{const s=S.dataPointIndex;return A[s]==="Y"?"Absent":n[s]=="Late Joinee"?"Late Joinee":n[s]=="Exempted"?"Exempted":w[s]+"/"+j[s]},le=(t,S)=>{let s=t;return t>="90"&&t<="100"&&t!="99.99"?s="A+":t>=80&&t<=89?s="A":t>=45&&t<=49?s="D+":t>=35&&t<=44?s="D":t>=0&&t<=34||t==0?s="NH":t>=50&&t<=54?s="C":t>=55&&t<=59?s="C+":t>=60&&t<=69?s="B":t>=70&&t<=79?s="B+":t>=80&&t<=89?s="A":t>=90&&t<=92&&(s="A-"),t==0?K(S.dataPointIndex,t="",s):K(S.dataPointIndex,t+"%",s)},K=(t,S,s)=>A[t]==="Y"?"Absent":n[t]=="Late Joinee"?"Late Joinee":n[t]=="Exempted"?"Exempted":b.trim()=="true"?s:S;return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{xData:g,colors:P,series:M,dataLabel:le,formatToolTip:de,Isgrade:d}),ae&&e.jsx(se,{percentage:l,rank:i,grandTotal:h,subjectTotalMarks:p,grade:f,subject:G,indexval:B,Gradeormarks:V,Data:r,examstatus:L,showonlyGrade:d})]})}re.propTypes={Exam:o.string,Data:o.array,expand:o.any};function re({Exam:r,Data:c,index:l,Collapse:i,expand:h}){const[p,f]=a.useState(!0),d=z(),g=U();return e.jsx(X,{in:p,style:{transformOrigin:"1 1 1"},...p?{timeout:1e3}:{},children:e.jsxs(he,{className:g.background,expanded:h===l,onChange:i(l),elevation:0,disableGutters:!0,children:[e.jsx(Ie,{expandIcon:e.jsx(pe,{}),sx:{background:`${d.colors.gradients.pink1}`},children:e.jsx(Pe,{color:h===l?"secondary":"",children:e.jsx("b",{children:r})})}),e.jsx(me,{sx:{borderRadius:1,mb:-1},children:c.map((u,M)=>{if(r===u.Exam)return e.jsx(te,{Data:c,ExamId:u.ExamId,Percentage:u.Percentage,Rank:u.Rank,GrandTotal:u.GrandTotal,SubjectTotalMarks:u.SubjectTotalMarks,Grade:u.Grade,showonlyGrade:c[0].StudentMarksList[0].ShowOnlyGrade},M)})})]})})}const Ae=["Bar graph shows the percentage scored in each subject and tap on the subject bar to view scored marks."];function De(){const r=["Your school fees are pending. Please pay the dues to view the progress report. "],c=["No exam of this class has been published for the current academic year."],l=Z();z();const i=I(n=>n.Progressreport.GetExamResultData);I(n=>n.Progressreport.GetAcademicYears),I(n=>n.Progressreport.GetTerms);const h=I(n=>n.Progressreport.GetReasonforBlocking),p=I(n=>n.Progressreport.PendingFees),d=I(n=>n.Progressreport.ProgressReportFileName).replace(/\\/g,"/");localStorage.getItem("SiteURL")+d;const[g,u]=a.useState(!0),[M,E]=a.useState(""),[P,W]=a.useState(""),j=localStorage.getItem("localSchoolId"),R=sessionStorage.getItem("AcademicYearId"),b=sessionStorage.getItem("StudentId");sessionStorage.getItem("Userlogin");const G=h.GetReasonforBlockingProgressReport,D=JSON.parse(localStorage.getItem("SchoolSettingsValue")).BlockProgressReportIfFeesArePending,H=n=>(x,A)=>{u(A?n:!1)},k=()=>{const n={asStudentId:b,asAcademicYearId:R,asSchoolId:j};ke.post("Student/IsPendingFeesForStudent",n).then(x=>x.data.IsPendingFeesForStudentResult).then(x=>{E(x)})},w={asSchoolId:j,asStudentId:b,asAcademicYearId:R},y={asSchoolId:j,asStudentId:b},T={asStudentId:b,asAcademicYearId:R,asSchoolId:j},C={aiSchoolId:j,asAcademicYearId:R,aiStudentId:b};a.useEffect(()=>{localStorage.setItem("url",window.location.pathname),l(fe(T)),l(xe(y)),k(),l(Se(C)),l(je(w))},[P]),a.useState(),a.useState(!1);const[O,_]=a.useState(!0),[J,$]=a.useState(!0);a.useEffect(()=>{i.length>0&&i[0].StudentMarksList.length>0&&_(i[0].StudentMarksList[0].ShowOnlyGrade.trim()==="true"),$(i.length>0)},[i]),be("span")(({theme:n})=>`
      border-radius: 22px;
      width: ${n.spacing(1.5)};
      height: ${n.spacing(1.5)};
      display: inline-block;
      margin-right: ${n.spacing(1)};
      margin-top: -${n.spacing(.1)};
  `);const L=U();return e.jsxs(F,{sx:{px:2},children:[e.jsx(Fe,{heading:"Progress Report",subheading:""}),e.jsx(F,{children:p.IsPendingFeesForStudentResult!==!1&&D=="Y"?e.jsx(N,{NoteDetail:r}):h.GetReasonforBlockingProgressReport!=""?e.jsx(N,{NoteDetail:["You are prohibited to view the progress report due to the following reason:",G,"Please do the needful to view the progress report."]}):h.GetReasonforBlockingProgressReport!=""&&D=="Y"&&p.IsPendingFeesForStudentResult==!0?e.jsx(e.Fragment,{children:e.jsx(N,{NoteDetail:["Your school fees are pending. Please pay the dues to view progress report.","You are prohibited to view the progress report due to the following reason:",G,"Please do the needful to view the progress report."]})}):J?e.jsxs(e.Fragment,{children:[e.jsxs(Me,{children:[e.jsx(Ee,{className:L.border,style:{background:"blueviolet"}}),e.jsx(ye,{children:"Denotes subject marks not considered in total marks."})]}),O?null:e.jsx(N,{NoteDetail:Ae}),e.jsx(F,{children:e.jsx(e.Fragment,{children:i==null?void 0:i.map((n,x)=>e.jsx(re,{Data:i,Exam:n.Exam,index:x,Collapse:H,expand:g},x))})}),!1]}):e.jsx(N,{NoteDetail:c})})]})}export{De as default};
