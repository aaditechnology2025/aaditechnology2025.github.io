import{u as ue,r as o,E as me,au as xe,c as a,no as pe,np as he,nq as Se,nr as ge,j as s,B as S,n as fe,p as be,G as g,bR as y,H as C,I as A,bv as j,ab as ye,J as L,K as je,aJ as W,T as w,ai as Ie,aj as G,ak as Pe,al as R,am as f,an as O,ns as B}from"./index-d5YOjbb6.js";import{d as Ce}from"./Print-BBUJr72l.js";import{T as Ae}from"./TAttendanceCommonPageheader-Ba_1Sm6K.js";import{S as we,a as Re,C as ve,N as Te,X as De}from"./XseedRemarks-C0M1Agl6.js";const Le=()=>{const d=ue(),[r,X]=o.useState("-1"),[m,v]=o.useState("0"),[l,T]=o.useState("0");console.log(l,"AssessmentId");const[z,c]=o.useState(!1),[_,u]=o.useState(""),[M,x]=o.useState(""),{showAlert:V,closeAlert:D}=o.useContext(me);let n=xe(164);console.log(r,"ClassTeacher",n);const I=Number(sessionStorage.getItem("AcademicYearId")),P=Number(localStorage.getItem("localSchoolId"));Number(localStorage.getItem("UserId"));const F=Number(sessionStorage.getItem("StandardDivisionId")),H=a(e=>e.PreprimaryProgressReport.ISAllPrimaryClassTeacherss).filter(e=>e.Is_PrePrimary==="Y"),J=a(e=>e.PreprimaryProgressReport.ISlistStudentNameDetails),i=a(e=>e.PreprimaryProgressReport.ISlistAssessmentDetailss),Y=a(e=>e.PreprimaryProgressReport.ISAssessmentPublishStatus),K=Y.map(e=>e.AssessmentPublishStatus),$=Y.map(e=>e.StudentWiseAssessmentPublishStatus);a(e=>e.PreprimaryProgressReport.ISFillStandardwiseSubjects);const q=a(e=>e.PreprimaryProgressReport.ISFillSubjectSections),Q=a(e=>e.PreprimaryProgressReport.ISFillSchoolDetails),Z=a(e=>e.PreprimaryProgressReport.ISFillGradeDetails),ee=a(e=>e.PreprimaryProgressReport.ISFillXseedRemarks),se=a(e=>e.PreprimaryProgressReport.ISFillNonXseedSubjectGrades),b=a(e=>e.PreprimaryProgressReport.ISFillStudentDetails),k=a(e=>e.PreprimaryProgressReport.ISFillStudentAttendance),te=Z.filter(e=>e.ConsideredAsAbsent!=="1"&&e.ConsideredAsExempted!=="1").sort((e,t)=>parseInt(e.SortOrder)-parseInt(t.SortOrder)),re=a(e=>e.PreprimaryProgressReport.ISFillStudentsLearningOutcomes),ae=a(e=>e.PreprimaryProgressReport.ISFillStudentsLearningOutcomeObservations),N=a(e=>e.PreprimaryProgressReport.Loading),le={asSchoolId:P,asAcadmicYearId:I,asTeacher_id:0},ne={asSchoolId:P,asAcademicYearId:I,asStandardDivId:n=="Y"?r:F,asStudentId:0},U={asSchoolId:P,asAcademicYearId:I,asStandardDivisionId:n=="Y"?r:F,asYearwiseStudentId:m,asAssessmentId:l},oe=e=>{X(e),x(""),c(!1),v("0"),T("0"),u("")},ie=e=>{v(e),c(!1)},E=e=>{T(e),u(""),c(!1)};console.log(l,"AssessmentId",i);const de=e=>{c(!0);let t=!1;if(l==="0"||l===""||i.length==0?(u("Assessment should be selected."),t=!0):u(""),r==="-1"&&n==="Y"||r===""&&n==="Y"?(x("Class teacher should be selected."),t=!0):x(""),r===""||l===""||m===""){c(!1);return}t||d(B(U))},p=o.useRef(null);console.log(p,"printRef");const ce=()=>{let e=!1;if(l==="0"||l===""||i.length==0?(u("Assessment should be selected."),e=!0):u(""),r==="-1"&&n==="Y"||r===""&&n==="Y"?(x("Class teacher should be selected."),e=!0):x(""),r===""||l===""||m===""){c(!1);return}if(!e)if(d(B(U)),p.current){const t=p.current.innerHTML,h=window.open("","","height=600,width=800");h.document.write("<html><head><title>Print</title>"+`
                <style>
                    body {
                        font-family: 'Roboto', sans-serif;
                        margin: 0;
                        padding: 20px;
                    }
                    h1, h2, h3, h4 {
                        margin: 0 0 10px;
                        font-family: 'Roboto', sans-serif;
                    }
                    table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    table, th, td {
                        border: 1px solid black;
                    }
                    th, td {
                        padding: 8px;
                        text-align: center;
                    }
                    .MuiTypography-root {
                        font-family: 'Roboto', sans-serif;
                        font-size: 16px;
                        margin-bottom: 8px;
                    }
                    .MuiTableCell-root {
                        font-family: 'Roboto', sans-serif;
                    }
                    .custom-typography {
                        font-family: 'Roboto', sans-serif;
                        color: #38548a;
                        font-size: 24px;
                        margin-top: 16px;
                        text-align: left;
                    }
                </style>
            `+"</head><body>"),h.document.write(t),h.document.write("</body></html>"),h.document.close(),h.print()}else V({title:"No Data Available",message:"There is no content to print. Please check and try again.",variant:"error",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:D,onConfirm:D})};return o.useEffect(()=>{d(pe(le))},[]),o.useEffect(()=>{d(he(ne))},[r]),o.useEffect(()=>{r==""&&(d(Se()),d(ge()))},[r]),s.jsxs(S,{sx:{px:2},children:[N&&s.jsx(fe,{}),s.jsx(Ae,{navLinks:[{title:"Pre Primary Progress Report",path:"/RITeSchool/Teacher/PreprimaryProgressReport"}],rightActions:s.jsx(s.Fragment,{children:s.jsxs(be,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[s.jsx(g,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:n=="Y"&&s.jsx(y,{ItemList:H,sx:{width:{xs:"70vw",sm:"19vw",md:"20vw"}},onChange:oe,defaultValue:r,label:"Class Teacher ",size:"small",mandatory:!0})}),s.jsx(g,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:s.jsx(y,{ItemList:J,sx:{width:{xs:"70vw",sm:"19vw",md:"20vw"}},onChange:ie,defaultValue:m,label:"Student ",size:"small"})}),s.jsx(g,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:n=="Y"&&s.jsx(y,{ItemList:i,sx:{width:{xs:"40vw",sm:"17vw",md:"15vw"}},onChange:E,defaultValue:l,label:"Assessment ",size:"small",mandatory:!0})}),s.jsx(g,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:n=="N"&&i.length>1&&s.jsx(y,{ItemList:i,sx:{width:{xs:"40vw",sm:"15.5vw",md:"15vw"}},onChange:E,defaultValue:l,label:"Assessment ",size:"small",mandatory:!0})}),s.jsxs(g,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:[s.jsx(C,{title:"Show",children:s.jsx(A,{sx:{color:"white",backgroundColor:j[500],"&:hover":{backgroundColor:j[600]}},onClick:de,children:s.jsx(ye,{})})}),s.jsx(C,{title:"Displays xseed progress report of selected assessment.",placement:"bottom-end",children:s.jsx(A,{sx:{color:"white",backgroundColor:L[500],height:"36px !important",":hover":{backgroundColor:L[600]}},children:s.jsx(je,{})})}),s.jsx(C,{title:"Print Preview",disableInteractive:!0,placement:"bottom-end",children:s.jsx("span",{children:s.jsx(A,{sx:{color:"white",backgroundColor:j[500],"&:hover":{backgroundColor:j[600]}},disabled:p.current==null||l==""||m==""||r=="",onClick:ce,children:s.jsx(Ce,{})})})})]})]})})}),s.jsx(W,{Error:M}),n=="Y"&&s.jsx(W,{Error:_}),z&&!N&&(n=="Y"&&r=="0"||l=="0"?s.jsx("div",{}):K=="N"&&$=="N"&&b.length<0?s.jsx(w,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:s.jsx("b",{children:"Assessment result is not available for this student."})}):s.jsx(S,{ref:p,children:b.length>0?b.map(e=>s.jsxs(S,{border:"1px solid grey",mb:4,sx:{px:2,background:"white"},children:[s.jsx(we,{USFillSchoolDetails:Q}),s.jsx(Re,{USFillStudentDetails:b.filter(t=>t.YearWiseStudentId==e.YearWiseStudentId),presentCount:k.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId&&t.IsPresent=="true").length,totalCount:k.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId).length}),s.jsxs("div",{children:[s.jsx(w,{variant:"h4",textAlign:"left",color:"#38548a",mt:2,children:"Key to Curricular and Co-Curricular"}),s.jsx(Ie,{component:S,children:s.jsxs(G,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:[s.jsx(Pe,{children:s.jsxs(R,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[s.jsx(f,{sx:{textTransform:"capitalize",color:t=>t.palette.common.white,py:1},children:"Grade Name"}),s.jsx(f,{sx:{textTransform:"capitalize",color:t=>t.palette.common.white,py:1},children:"Description"})]})}),s.jsx(O,{children:te.map(t=>s.jsxs(R,{children:[s.jsx(f,{sx:{py:1},children:t.Name}),s.jsx(f,{sx:{py:1},children:t.Description})]},t.GradeId))})]})}),s.jsx(S,{mt:1,children:s.jsx(G,{"aria-label":"simple table",sx:{border:"1px solid lightgrey"},children:s.jsx(O,{children:s.jsx(R,{sx:{bgcolor:"#F0F0F0",border:"1px solid lightgrey"},children:s.jsxs(f,{sx:{textAlign:"left",py:1,color:"black",p:1},children:[s.jsx("b",{children:"Note :  "})," Ab - Absent        Ex - Exempted "]})})})})})]}),s.jsx(ve,{USFillStudentsLearningOutcomes:re.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId),USFillSubjectSections:q,FillStudentsLearningOutcomeObservations:ae}),s.jsx(Te,{USFillNonXseedSubjectGrades:se.filter(t=>t.YearwiseStudentId==e.YearWiseStudentId)}),s.jsx(De,{USFillXseedRemarks:ee.filter(t=>t.YearWiseStudentId==e.YearWiseStudentId)})]},e.YearWiseStudentId)):null})),n=="N"&&i.length<2?s.jsx(w,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:s.jsx("b",{children:"Published assessments are not available."})}):s.jsx("span",{})]})};export{Le as default};
