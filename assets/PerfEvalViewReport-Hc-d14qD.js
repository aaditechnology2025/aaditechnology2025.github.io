import{A as pe,ag as he,u as ge,c as i,r as x,hc as U,hb as fe,j as e,B as s,p as L,z as be,C as ue,I as $,T as h,H as me,J as M,n as je,G as O,aj as z,al as c,am as n,h9 as Te,ha as ve,q as Y,ak as Se,an as Ie,ae as H}from"./index-d5YOjbb6.js";import{d as De}from"./ChevronRightTwoTone-BefBLSd_.js";import{d as ye}from"./HomeTwoTone-14QqW0Yy.js";import{D as V,U as we}from"./UploadDocument-D7foBb9r.js";import{Q as Ae}from"./QuestionMark-C2Y4lgD8.js";import"./CloudUpload-DJN1zp2n.js";import"./Errormessage-RPRSgLGN.js";import"./UploadDocList-BICUPjQ0.js";import"./Visibility-C0VMNowd.js";const Pe=()=>{const j=new Date,S=String(j.getDate()).padStart(2,"0"),u=String(j.getMonth()+1).padStart(2,"0"),f=j.getFullYear();return`${S}-${u}-${f}`},Le=()=>{var N;const j=pe(),S=he(),u=ge(),{asUserId:f,asYear:T}=S.state||{},I=i(t=>t.PerformanceGradeAssignment.ISlistSchoolOrgNameDetails),d=i(t=>t.PerformanceGradeAssignment.ISlistUserNameDetails);i(t=>t.PerformanceGradeAssignment.ISlistDescriptionDetails);const g=i(t=>t.PerformanceGradeAssignment.ISlistOriginalSkillIdDetails),m=i(t=>t.PerformanceGradeAssignment.ISlistTeacherTitleDetails),v=i(t=>t.PerformanceGradeAssignment.ISlistParameterIdDetails),D=i(t=>t.PerformanceGradeAssignment.ISlistIsFinalApproverDetails),A=i(t=>t.PerformanceGradeAssignment.ISgradeDropDownList),P=i(t=>t.PerformanceGradeAssignment.ISAttachmentDetails);i(t=>t.PerformanceGradeAssignment.ISlistIsPublishedDetails);const q=i(t=>t.PerformanceGradeAssignment.ISlistEnableRejectButtonDetails);i(t=>t.PerformanceGradeAssignment.ISSubmitStaffPerformanceDetailsMsg),i(t=>t.PerformanceGradeAssignment.ISPublishStaffPerformanceDetailsMsg),i(t=>t.PerformanceGradeAssignment.ISSaveStaffPerformanceEvalDetailsMsg);const J=i(t=>t.PerformanceGradeAssignment.Loading),[Q,k]=x.useState(""),[_,F]=x.useState(""),[K,X]=x.useState(""),[Z,ee]=x.useState(""),[te,B]=x.useState(!1),[re,y]=x.useState(null),[ke,ae]=x.useState(""),[se,ne]=x.useState(""),[oe,le]=x.useState({}),ie=Pe();x.useEffect(()=>{var t,a,r,o;d.length>0&&(F(((t=d[0])==null?void 0:t.Text13)===""?ie:(a=d[0])==null?void 0:a.Text13),k(((r=d[0])==null?void 0:r.Text12)===""||(o=d[0])==null?void 0:o.Text12))},[d]),x.useEffect(()=>{var t,a;(d==null?void 0:d.length)>0&&(ee((t=d[0])==null?void 0:t.Text9),X((a=d[0])==null?void 0:a.Text8))},[d]);const w={asSchoolId:Number(localStorage.getItem("SchoolId")),asUserId:Number(f),asReportingUserId:Number(sessionStorage.getItem("Id")),asYear:Number(T),asAcademicYearId:Number(T)};x.useEffect(()=>{u(U(w))},[u]),x.useEffect(()=>{u(fe(w))},[u,f,T]);function C(){let t=!1,a=D.filter(r=>r.Text3===sessionStorage.getItem("Id"));return a.length>0&&a[0].Text4==="True"&&(t=!0),t}function E(t){var r;return(r=D.filter(o=>o.Text3===t)[0])==null?void 0:r.Text1}function G(t){let a=!1,r=sessionStorage.getItem("Id");return t===r&&status==="2"&&(a=!0),a}function de(t){let a="";return A.length>0&&A.map((r,o)=>{r.Id===t&&t!=="0"?a=r.Name:r.Id===t&&t==="0"&&(a="")}),a}function R(t,a){let r=v.filter(o=>o.Text2===t&&o.Text5===a);return r.length>0?de(r[0].Text3):""}function W(t,a){let r=v.filter(o=>o.Text2===t&&o.Text5===a);return r.length>0?r[0].Text4:""}return x.useEffect(()=>{if(g.length>0){const t=g.reduce((a,r)=>(m.filter(l=>l.Text4===r.Text1).forEach(l=>{v.filter(p=>p.Text2===l.Text1).forEach(p=>{const xe=`${r.Text1}-${l.Text1}-${p.Text1}-${p.Text5}-${r.Text7}`,ce=JSON.stringify({id:p.Text1,parameterId:p.Text2,gradeId:p.Text3,observation:p.Text4,reportingUserId:p.Text5});a[xe]=ce})}),a),{});le(t)}},[g,m,v]),e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{px:2},children:[e.jsxs(L,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{pt:5,pb:2},children:[e.jsx(s,{children:e.jsxs(be,{"aria-label":"breadcrumb",separator:e.jsx(De,{fontSize:"small"}),sx:{"& .MuiBreadcrumbs-separator":{marginLeft:"4px",marginRight:"4px"}},children:[e.jsx(ue,{to:"/RITeSchool/landing/landing",color:"inherit",style:{textDecoration:"none"},children:e.jsx($,{sx:{background:t=>t.palette.common.white,boxShadow:"0px 0px 5px 0px rgba(0,0,0,0.15)"},children:e.jsx(ye,{color:"primary"})})}),e.jsx(h,{variant:"h3",fontSize:"18px",fontWeight:"normal",color:"text.primary",sx:{"&:hover":{fontWeight:"bold"},cursor:"pointer"},onClick:()=>{j(-1)},children:"Performance Evaluation"}),e.jsx(h,{variant:"h3",fontSize:"18px",color:"text.primary",children:"View Report"})]})}),e.jsx(L,{direction:"row",alignItems:"center",gap:1,children:e.jsx(s,{sx:{display:"flex",alignItems:"center"},children:e.jsx(me,{title:"Manage / display performance evaluation details.",children:e.jsx($,{sx:{color:"white",backgroundColor:M[500],height:"36px !important",":hover":{backgroundColor:M[600]}},children:e.jsx(Ae,{})})})})})]}),J||(g==null?void 0:g.length)===0?e.jsx(je,{}):e.jsxs(s,{border:1,sx:{p:2,background:"white"},children:[e.jsx(O,{container:!0,spacing:3,children:I==null?void 0:I.map((t,a)=>e.jsxs(O,{item:!0,xs:12,children:[e.jsxs(z,{children:[e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:t.schoolOrgName})})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:t.schoolName})})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsxs(n,{align:"center",sx:{border:"1px solid black"},children:["      ",e.jsx(h,{variant:"h4",color:"#38548a",children:t.address})]})}),e.jsx(c,{sx:{backgroundColor:"#F0F0F0"},children:e.jsx(n,{align:"center",sx:{border:"1px solid black"},children:e.jsx(h,{variant:"h4",color:"#38548a",children:"Staff Performance Evaluation"})})})]}),e.jsx("br",{}),d.length>0&&d.map((r,o)=>e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{backgroundColor:"#ffffff",display:"flex",justifyContent:"space-between",pr:7},children:[e.jsxs(s,{children:[e.jsx(h,{variant:"h5",pb:.5,children:r.Text7}),[{label:"Status :",value:r.Text3},{label:"Name :",value:r.Text1},{label:"Employee Code :",value:r.Text4},{label:"Date of Joining :",value:Te(r.Text5.split(" ")[0])},{label:"Address :",value:r.Text14}].map((l,b)=>e.jsxs(s,{mb:1,display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"10vw",pl:1,mr:1,children:l.label}),e.jsx(h,{variant:"h5",component:"span",sx:{textWrap:"wrap",maxWidth:l.label==="Address :"?"35vw":"auto"},children:l.value})]},b))]}),e.jsxs(s,{children:[[{label:"Year :",value:r.Text11},{label:"Post :",value:r.Text2},{label:"Length Of Service :",value:r.Text6}].map((l,b)=>e.jsxs(s,{mb:1,display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"15vw",pl:1,mr:1,children:l.label}),e.jsx(h,{variant:"h5",component:"span",children:l.value})]},b)),e.jsxs(s,{display:"flex",alignItems:"center",mb:1,children:[e.jsx(s,{display:"inline-flex",alignItems:"center",border:1,borderRadius:4,pl:1,mr:1,sx:{height:"5vh",width:"15vw"},children:"Date of Last Increment :"}),e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center"},children:C()===!1?e.jsx(h,{variant:"h5",component:"span",children:r.Text12!==""?ve(r.Text12.split(" ")[0]):"-"}):e.jsx(V,{disabled:!0,maxDate:!0,DateValue:Q,onDateChange:l=>{k(l)},label:"",size:"small",fullWidth:!1})})]}),e.jsxs(s,{display:"flex",alignItems:"center",children:[e.jsx(s,{display:"inline-block",border:1,borderRadius:4,width:"15vw",pl:1,mr:1,children:"Highest Education Qualification and Year of Passing:"}),e.jsx(h,{variant:"h5",sx:{textWrap:"wrap",maxWidth:"35vw"},children:r.Text15})]})]})]}),e.jsxs(s,{py:1,children:[e.jsx(s,{display:"inline-flex",border:1,borderRadius:4,alignItems:"center",width:"12vw",height:"4.5vh",pl:1,mr:1,children:"Classes Taught :"}),e.jsx(Y,{id:"outlined-basic",value:K,required:!0,label:"",variant:"outlined",onChange:()=>{},size:"small",inputProps:{maxLength:100,readOnly:!0},sx:{height:"2vh",minWidth:"76vw"}}),e.jsx("span",{style:{color:"red"},children:" *"})]}),e.jsxs(s,{py:.5,children:[e.jsx(s,{display:"inline-flex",border:1,borderRadius:4,alignItems:"center",width:"12vw",height:"4.5vh",pl:1,mr:1,children:"Teaching Subjects :"}),e.jsx(Y,{id:"outlined-basic",value:Z,required:!0,label:"",onChange:()=>{},inputProps:{maxLength:100,readOnly:!0},variant:"outlined",size:"small",sx:{height:"2vh",minWidth:"76vw"}}),e.jsx("span",{style:{color:"red"},children:" *"})]}),C()&&e.jsxs(s,{py:1,children:[e.jsx(s,{display:"inline-flex",alignItems:"center",border:1,borderRadius:4,pl:1,mr:1,sx:{height:"5vh",width:"12vw"},children:"Effective From Date :"}),e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center"},children:e.jsx(V,{disabled:!0,minDate:!0,DateValue:_,onDateChange:l=>{F(l)},label:"",size:"small",fullWidth:!1})})]})]}))]},t.UserId))}),e.jsxs(z,{children:[e.jsx(Se,{children:e.jsxs(c,{sx:{backgroundColor:"#19bed4"},children:[e.jsx(n,{sx:{textAlign:"center",fontWeight:"bold",color:"white",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",width:"100px"},children:"Sr. No."}),e.jsx(n,{colSpan:2,sx:{textAlign:"center",fontWeight:"bold",color:"white",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",minWidth:"70vw"},children:"Performance Parameter"})]})}),e.jsxs(Ie,{children:[Object.keys(oe).length>0&&(g==null?void 0:g.length)>0&&g.map((t,a)=>e.jsxs(H.Fragment,{children:[e.jsx(c,{sx:{backgroundColor:"#e5e7eb"},children:e.jsx(n,{colSpan:3,sx:{textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text2})}),(m==null?void 0:m.length)>0&&(()=>{let r=0;return m.map((o,l)=>o.Text4===t.Text1&&e.jsxs(H.Fragment,{children:[e.jsxs(c,{children:[e.jsxs(n,{sx:{textAlign:"center",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",borderBottom:"1px solid white"},children:[++r," "]}),e.jsx(n,{colSpan:2,sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",fontWeight:"bolder"},children:o.Text2})]}),e.jsxs(c,{children:[e.jsx(n,{sx:{textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)",borderBottom:"1px solid white"}}),e.jsx(n,{sx:{backgroundColor:"#f3f4f6",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:"Observer"}),e.jsx(n,{sx:{backgroundColor:"#f3f4f6",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text7==="2"?"Observation":"Grade"})]}),t.Text8==="False"?e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:E(f)}),e.jsxs(n,{sx:{padding:t.Text7==="2"&&G(f)?"0":"5px",border:"1px solid rgba(224, 224, 224, 1)",height:"100%"},children:[t.Text7==="2"&&W(o.Text1,f),t.Text7==="3"&&R(o.Text1,f)]})]})}):D.map((b,p)=>e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:E(b.Text3)}),e.jsxs(n,{sx:{padding:t.Text7==="2"&&G(b.Text3)?"0":"5px",border:"1px solid rgba(224, 224, 224, 1)",height:"100%"},children:[t.Text7==="2"&&W(o.Text1,b.Text3),t.Text7==="3"&&R(o.Text1,b.Text3)]})]},p)}))]},l))})()]},a)),e.jsx(c,{children:e.jsx(n,{colSpan:3,sx:{backgroundColor:"#e5e7eb",textAlign:"left",fontWeight:"bold",color:"black",paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:"Attachment"})}),P.length>0&&P.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs(c,{children:[e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"}}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:t.Text1}),e.jsx(n,{sx:{paddingTop:"5px",paddingBottom:"5px",border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx("span",{onClick:()=>{B(!0),ae(t.Text1),ne(t.Text3)},onMouseEnter:()=>y(a),onMouseLeave:()=>y(null),style:{cursor:"pointer",color:"#6366f1",textDecoration:re===a?"underline":"none"},children:`${t.Text8===""?"0":t.Text8} Files Uploaded`})})]},a)}))]})]})]})]}),e.jsx(we,{Id:f,ReportingUserId:se,yearId:T,saveButton:(N=q[0])==null?void 0:N.Text3,open:te,handleClose:t=>{B(!1),t&&u(U(w)),y(null)},RefreshList:()=>{}})]})};export{Le as default};
