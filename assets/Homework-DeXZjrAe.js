import{u as y,r as s,c as n,j as e,B as L,cH as Y,G as x,I as j,A as F,S as q,eq as M,er as _,es as K,n as R,et as H,bq as $}from"./index-d5YOjbb6.js";import{d as z,a as J}from"./ArrowRight-DTTKgIal.js";import{H as O}from"./HomeworkCard-gxNmL-Gu.js";import{L as A,e as Q}from"./CardStyle-B9qFmFtz.js";import{E as T}from"./ErrorMessages-D1wiRwH0.js";import{C as U}from"./Card30-DppzdtLd.js";import{P as W}from"./PageHeader-DqqjGq3-.js";import{B as X}from"./ButtonStyle-DaPKUawX.js";import{b as Z,D as ee}from"./DotLegendStyled-B7Xptujc.js";import"./Card-BrM9kpJu.js";import"./AccordianStyled-BS_ED8m5.js";import"./ExpandLess-ZEyeVaLF.js";const te=({DefaultDate:D,itemList:u,clickDate:h,clickPrevNext:l})=>{y(),s.useState(""),s.useState(""),n(r=>r.HomeworkNew.GetHomeworkDetails),n(r=>r.HomeworkNew.GetHomeworkDates);const o=n(r=>r.HomeworkNew.ButtonState);localStorage.getItem("localSchoolId"),sessionStorage.getItem("AcademicYearId"),sessionStorage.getItem("StandardDivisionId");const[g,d]=s.useState("");return s.useState(0),s.useState(0),e.jsx("div",{children:e.jsx(L,{sx:{px:2},children:g!==""?e.jsx(Y,{children:g}):e.jsxs(x,{container:!0,spacing:1,alignItems:"center",children:[e.jsx(x,{item:!0,xs:2,sx:{textAlign:"center"},children:e.jsx(j,{disabled:!(o!=null&&o.AllowPrevious),children:e.jsx(A,{children:e.jsx(z,{onClick:()=>l(-1)})})})}),e.jsx(x,{item:!0,xs:8,children:e.jsx(O,{ItemList:u,clickItem:h})}),e.jsx(x,{item:!0,xs:2,sx:{textAlign:"center"},children:e.jsx(j,{disabled:!(o!=null&&o.AllowNext),children:e.jsx(A,{children:e.jsx(J,{onClick:()=>l(1)})})})})]})})})};function ue(){const D=y(),u=F(),h=q(),l=localStorage.getItem("localSchoolId"),o=sessionStorage.getItem("AcademicYearId"),g=sessionStorage.getItem("StandardDivisionId"),[d,r]=s.useState(""),[f,w]=s.useState(""),[p,S]=s.useState(""),[c,I]=s.useState([]),[se,N]=s.useState(0),v=n(t=>t.HomeworkNew.GetHomeworkDetails),m=n(t=>t.HomeworkNew.GetHomeworkDates);n(t=>t.HomeworkNew.ButtonState);const C=n(t=>t.HomeworkNew.Loading),E=n(t=>t.getSchoolSettings.AllowHomewirkDailyLog),G={asSchoolId:parseInt(l),aiAcademicYearId:parseInt(o),asKey:""};s.useEffect(()=>{w(d),S(M(new Date)),D(_(G))},[]),s.useEffect(()=>{D(K({aiSchoolId:l,aiAcademicYearId:o,aiStandardDivisionId:g,asStartdate:f,asEnddate:p}))},[f,p]),s.useEffect(()=>{if(m.length>0){let t=m.length;r(m[t-1].Value),I(m.map((a,i)=>i===t-1?{...a,IsActive:!0}:{...a,IsActive:!1}))}else r(""),I([])},[m]);const b=t=>{let a=d;t.map(i=>{i.IsActive&&(a=i.Value)}),r(a),I(t)},B=t=>{N(t),t===-1?(w(""),S(H(c[0].Value,-1))):t===1&&(w(H(c[c.length-1].Value,1)),S(""))},P=()=>{const t=[];return v.map(a=>{const i=[];a.Child.map(k=>{$(k.AssignedDate)===d&&i.push(k)}),i.length>0&&t.push({Id:a.Id,Name:a.Name,AssignedDate:a.Value,Child:i})}),t},V=()=>{u("DailyLogs",{state:{fromInternal:!0}})};return e.jsx("div",{children:e.jsxs(L,{sx:{px:2},children:[e.jsx(W,{heading:"Homework",subheading:""}),e.jsx("div",{children:e.jsxs(Z,{children:[e.jsx(ee,{className:h.border,style:{background:"#628def"}}),e.jsx(Q,{children:"Completed By Date"})]})})," ",e.jsx("br",{}),C?e.jsx(R,{}):c.length===0?e.jsx(T,{Error:"Homework is not available"}):e.jsxs(e.Fragment,{children:[e.jsx(te,{DefaultDate:d,itemList:c,clickDate:b,clickPrevNext:B}),e.jsx(U,{header:P()})]}),E&&e.jsx(X,{sx:{float:"right"},onClick:V,children:"Daily Logs"})]})})}export{ue as default};
