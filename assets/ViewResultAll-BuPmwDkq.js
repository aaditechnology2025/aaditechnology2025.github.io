import{cj as be,j as s,A as Ie,u as we,w as ge,r as a,x as Te,c,la as _e,iC as Ne,iB as De,lb as Re,lc as je,ld as ye,le as Ce,B as H,F as ke,p as Ae,G as P,bR as J,H as F,I as M,J as X,K as ve,bv as T,T as $,R as Ge,lf as Ve}from"./index-d5YOjbb6.js";import{d as Pe}from"./Print-BBUJr72l.js";import{d as Fe}from"./VisibilityTwoTone-EH7VzEOC.js";import{f as Me}from"./fxp-DGqQnM-q.js";import{V as Le}from"./ViewResultAllTable-CSXyvEIe.js";const Ee=be(s.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");function Be(_){var S,j,N,f;return{listGreaceDetails:[{GraceMark:"0"}],listMarksDetails:(S=_.Result??[])==null?void 0:S.map(e=>{var r,d,l,p,n;return{Grade_Name:e==null?void 0:e.Grade_Name,Grade_id:(r=e==null?void 0:e.Grade_id)==null?void 0:r.toString(),Percentage:(d=e==null?void 0:e.Percentage)==null?void 0:d.toString(),Result:e==null?void 0:e.Result,Subjects_Total_Marks:(l=e==null?void 0:e.Subjects_Total_Marks)==null?void 0:l.toString(),Total_Marks_Scored:(p=e==null?void 0:e.Total_Marks_Scored)==null?void 0:p.toString(),rank:(n=e==null?void 0:e.rank)==null?void 0:n.toString()}}),listParcentageDetails:(j=_.grades??[])==null?void 0:j.map(e=>{var r;return{Grade:e==null?void 0:e.Grade_Name,Marks_Grades_Configuration_Detail_ID:(r=e==null?void 0:e.Marks_Grades_Configuration_Detail_ID)==null?void 0:r.toString(),Remarks:e==null?void 0:e.Remarks}}),listParentsubjectDetails:[],listStudentDetail:(N=_.Header??[])==null?void 0:N.map(e=>{var r,d,l,p,n;return{Academic_Year:e==null?void 0:e.Academic_Year,Division_Name:e==null?void 0:e.Division_Name,IsFailCriteriaNotApplicable:e==null?void 0:e.IsFailCriteriaNotApplicable,IsPreprimaryStandard:(e==null?void 0:e.IsPreprimaryStandard)===0?"False":"True",Roll_No:(r=e==null?void 0:e.Roll_No)==null?void 0:r.toString(),School_Name:e==null?void 0:e.School_Name,School_Orgn_Name:e==null?void 0:e.School_Orgn_Name,ShowOnlyGrades:e==null?void 0:e.ShowOnlyGrades.toString(),Standard_Division_Id:(d=e==null?void 0:e.Standard_Division_Id)==null?void 0:d.toString(),Standard_Id:(l=e==null?void 0:e.Standard_Id)==null?void 0:l.toString(),Standard_Name:(p=e==null?void 0:e.Standard_Name)==null?void 0:p.toString(),Student_Name:e==null?void 0:e.Student_Name,YearWise_Student_Id:(n=e==null?void 0:e.YearWise_Student_Id)==null?void 0:n.toString()}}),listSubjectDetails:(f=_.Subjects??[])==null?void 0:f.map(e=>{var r,d,l;return{ID_Num:(r=e==null?void 0:e.ID_Num)==null?void 0:r.toString(),Parent_Subject_Id:(d=e==null?void 0:e.Parent_Subject_Id)==null?void 0:d.toString(),Subject_Id:(l=e==null?void 0:e.Subject_Id)==null?void 0:l.toString(),Subject_Name:e==null?void 0:e.Subject_Name,Total_Consideration:e==null?void 0:e.Total_Consideration}})}}const Xe=_=>{var W;Ie();const h=we();let{StandardDivisionId:S}=ge();a.useEffect(()=>{S!==void 0&&(S=Te(S))},[S]);const j=sessionStorage.getItem("StandardDivisionId"),N=sessionStorage.getItem("TeacherId"),[f,e]=a.useState(j),[r,d]=a.useState(!1),[l,p]=a.useState(!1);a.useState(null);const[n,L]=a.useState("0"),[D,E]=a.useState([]),B=JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),u=Number(localStorage.getItem("localSchoolId")),I=Number(sessionStorage.getItem("AcademicYearId")),A=Number(sessionStorage.getItem("StandardDivisionId")),K=Number(sessionStorage.getItem("Id")),y=c(t=>t.VeiwResult.ClassTeachers),w=c(t=>t.VeiwResult.StudentName),x=c(t=>t.VeiwResult.StudentResultList),C=c(t=>t.FinalResultGenerateAll.ISEntireStudentFinalResult),q=c(t=>t.VeiwResult.StudentsingleResult);c(t=>t.VeiwResult.getMarkDetailsView);const v=c(t=>t.VeiwResult.getSubjectDetailsView);c(t=>t.VeiwResult.getGradesDetailsView),c(t=>t.VeiwResult.getTotalPerGradeView),c(t=>t.VeiwResult.getPerDetails);const G=c(t=>t.VeiwResult.iscofigred),k=c(t=>t.VeiwResult.unpublishexam);c(t=>t.VeiwResult.notResultList);const Y=c(t=>t.FinalResult.ClassTeachers);v.filter(t=>t.Grade==""),v.filter(t=>t.Marks==""),q.some(t=>t.ShowOnlyGrades.trim()==="true"),v.filter(t=>t.Total_Consideration==="N");const b=c(t=>t.ProgressReportNew.IsGetSchoolSettings),Q=(W=b==null?void 0:b.GetSchoolSettingsResult)==null?void 0:W.ToppersCount,[Z,U]=a.useState("");a.useEffect(()=>{var t;b!=null&&U((t=b==null?void 0:b.GetSchoolSettingsResult)==null?void 0:t.IsTotalConsiderForProgressReport)},[b]),a.useEffect(()=>{},[w]);const ee={asSchoolId:u,asAcademicYearId:I,asTeacherId:N},te={asSchoolId:Number(u)},se={asSchoolId:u,asAcademicYearId:I,asStandardDivisionId:Number(f)},ae={asSchoolId:u,asAcademicYrId:I,asStdDivId:A,asStartIndex:0,PageCount:10,asTestId:1},oe={asSchoolId:u,asAcademicYrId:54,asStdDivId:1266,asStartIndex:0,PageCount:10,asTestId:608},ne={asSchoolId:u,asAcademicYrId:I,asStdDivId:A},ie={asSchoolId:u,asAcademicYrId:I,asStdDivId:A},ce={asSchoolId:Number(u),asAcademicYearId:I,asStudentId:Number(n),asInsertedById:Number(K),asWithGrace:1};a.useEffect(()=>{h(_e(ce))},[f,n]),a.useEffect(()=>{h(Ne(te))},[]);const re=t=>{e(t)},le=t=>{d(!1),L(t),p(!1)},de={asSchoolId:Number(u),asAcademicYearId:Number(I),asStudentsIds:n==="0"?[]:[n],asStdDivId:Number(f),asWithGrace:1},Se=async t=>{await h(Ve(de)),d(!0),p(!0)};a.useEffect(()=>{h(De(ee))},[]),a.useEffect(()=>{h(Re(se))},[f]),a.useEffect(()=>{w.length>0&&L(w[0].Id)},[w]),a.useEffect(()=>{S!==void 0&&D.length===1&&e(S)},[w]);const me=new Me.XMLParser,[Ye,he]=a.useState([]),fe=t=>t?Array.isArray(t)?t:[t]:[],m=(t,o)=>{if(!t)return[];const g=me.parse(t);return fe(o.split(".").reduce((R,i)=>R==null?void 0:R[i],g))};a.useEffect(()=>{var t,o;if(x!==null&&((t=x==null?void 0:x.listMarksDetiles)==null?void 0:t.length)>0){const g=(o=x==null?void 0:x.listMarksDetiles)==null?void 0:o.map(i=>({Student_id:i.Student_id,Header:m(i.Header,"NewDataSet.Table"),Marks:m(i.Marks,"NewDataSet.Table3"),Result:m(i.Result,"NewDataSet.Table4"),SubjectTestType:m(i.SubjectTestType,"NewDataSet.Table7"),SubjectTestTypeGroupTotal:m(i.SubjectTestTypeGroupTotal,"NewDataSet.Table6"),SubjectgroupTotal:m(i.SubjectgroupTotal,"NewDataSet.Table5"),Subjects:m(i.Subjects,"NewDataSet.Table1"),TestTypes:m(i.TestTypes,"NewDataSet.Table8"),Tests:m(i.Tests,"NewDataSet.Table2"),grades:m(i.grades,"NewDataSet.Table9")}));let R=g==null?void 0:g.map(i=>Be(i));he(R)}},[x]),a.useEffect(()=>{h(je(n==="0"?oe:ae))},[f,n]),a.useEffect(()=>{h(ye(ne)),h(Ce(ie))},[]);const O=()=>{let t="N";return B&&B.map(o=>{o.ScreenName==="Final veiw result"&&(t=o.IsFullAccess)}),t},ue=()=>{let t="";return w.map(o=>{o.Value==n&&(t=o.Name)}),t};let z=[];const pe=()=>{y.map(t=>{t.TeacherId==N&&z.push({Id:t.Id,Value:t.Value,Name:t.Name})}),E(z)};ue(),a.useEffect(()=>{y!=null&&E(y),pe()},[y]),a.useEffect(()=>{D!=null&&D.length>0&&e(D[0].Id)},[D]);const V=a.useRef(null),xe=()=>{if(V.current){const t=V.current.innerHTML,o=window.open("","","height=600,width=800");o.document.write("<html><head><title>Print</title>"+`
              <style>
                body {
                  font-family: 'Roboto', sans-serif;
                  margin: 0;
                  padding: 20px;
                }
                h1, h2, h3, h4 {
                  margin: 0 0 10px;
                  font-family: 'Roboto', sans-serif;
                }
                table {
                  width: 100%;
                  border-collapse: collapse;
                }
                table, th, td {
                  border: 1px solid black;
                }
                th, td {
                  padding: 8px;
                  text-align: center;
                }
                .MuiTypography-root {
                  font-family: 'Roboto', sans-serif;
                  font-size: 16px;
                  margin-bottom: 8px;
                  text-align: center;
                }
                .MuiTableCell-root {
                  font-family: 'Roboto', sans-serif;
                }
                  
                .custom-typography {
                  font-family: 'Roboto', sans-serif;
                  color: #38548a;
                  font-size: 24px;
                  margin-top: 16px;
                  text-align: left;
                }
              </style>
          `+"</head><body>"),o.document.write(t),o.document.write("</body></html>"),o.document.close(),o.print()}};return s.jsxs(H,{sx:{px:2},children:[s.jsx(ke,{navLinks:[{title:"Final Result",path:"/RITeSchool/Teacher/FinalResult/"+S},{title:"View Result All",path:""}],rightActions:s.jsx(s.Fragment,{children:s.jsxs(Ae,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[s.jsx(P,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:s.jsx(J,{sx:{width:{xs:"60vw",sm:"18vw"},bgcolor:O()==="N"?"#F0F0F0":"inherit"},ItemList:Y,onChange:re,defaultValue:f,size:"small",label:"Class Teacher",DisableClearable:O()==="N",mandatory:!0,disabled:Y.length===2})}),s.jsx(P,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:s.jsx(J,{ItemList:w,onChange:le,defaultValue:n,label:"Student Name ",size:"small",sx:{width:{xs:"60vw",sm:"20vw"}}})}),s.jsxs(P,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:[s.jsx(F,{title:"View result of all / selected student .",children:s.jsx(M,{sx:{color:"white",backgroundColor:X[500],"&:hover":{backgroundColor:X[600]}},children:s.jsx(ve,{})})}),s.jsx(F,{title:"Show",children:s.jsx(M,{sx:{color:"white",backgroundColor:T[500],"&:hover":{backgroundColor:T[600]}},onClick:Se,children:s.jsx(Fe,{})})}),s.jsx(F,{title:"Print",children:s.jsx(M,{sx:{color:"white",backgroundColor:l?T[500]:T[200],"&:hover":{backgroundColor:l?T[600]:T[200]}},onClick:xe,disabled:!l,children:s.jsx(Pe,{})})})]})]})})}),s.jsx($,{variant:"h6",textAlign:"center",color:"primary",mb:2,children:(G==null?void 0:G.IsConfiged)==="0"&&r?s.jsx("div",{children:(k==null?void 0:k.length)>0&&s.jsx(Ge,{variant:"filled",color:"info",sx:{mb:2,boxShadow:"none"},icon:s.jsx(Ee,{}),children:s.jsxs($,{variant:"h6",children:[" All configured exams are not published - ",k.map(t=>t.SchoolWise_Test_Name).join(", ")]})})}):s.jsx("span",{children:" "})}),s.jsx(H,{sx:{mt:1,background:"white"},ref:V,children:r&&s.jsx(s.Fragment,{children:C.length>0&&(C==null?void 0:C.map((t,o)=>s.jsx(s.Fragment,{children:s.jsx(Le,{stdFinalResult:t,IsTotalConsiderForProgressReport:Z,ToppersCount:Q,isAllStdSelect:n==="0",showMarksRow:!1},o)})))})})]})};export{Xe as default};
