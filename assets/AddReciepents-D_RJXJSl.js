import{P as q,ag as Is,j as e,a6 as js,q as me,u as Ue,r as o,E as as,c as S,dk as $e,ai as rs,B as i,aj as ns,ak as ls,al as ye,am as X,an as cs,I as oe,as as is,H as te,at as ds,dl as ts,dm as As,dn as bs,dp as Ns,dq as ys,dr as vs,t as Qe,ds as Us,dt as es,G as p,T as w,aJ as xe,a9 as ws,ce as Gs,bQ as Ke,bR as os,du as ks,ay as Rs,a7 as Es,a8 as qe,L as Ds,dv as Ts,ah as us,bE as Bs,ae as Ms,bb as Ps,J as ve,az as Ys,a2 as hs,a3 as ps,bl as Je,a5 as xs,dw as Ls,A as Ws,dx as Os,dy as Fs,dz as Vs,dA as _s,dB as zs,b9 as Hs,bv as $s}from"./index-d5YOjbb6.js";import{d as Ks}from"./GroupAdd-CeGlO5QJ.js";import{d as qs}from"./Square-gela0mjc.js";import{d as Xs}from"./Search-Cux6sdg-.js";import{C as Qs,L as Xe}from"./ListSelect-XR4RTIQy.js";import{d as Js}from"./ArrowCircleUp-BmCXupv-.js";import{A as Zs}from"./ArrowCircleDown-BpJDJL07.js";import{L as et}from"./ListHeaderCard3ColSel-CyrNazc1.js";import{C as st}from"./CheckboxImg-DSBDgE-_.js";import{k as tt}from"./CardStyle-B9qFmFtz.js";import{Q as ms}from"./QuestionMark-C2Y4lgD8.js";Ze.propTypes={onChange:q.func.isRequired,label:q.string,defaultValue:q.string,mandatory:q.bool,sx:q.object,size:q.string,DisableClearable:q.bool,disabled:q.bool};function Ze({ItemList:r,onChange:d,label:b,defaultValue:x="",mandatory:f=!1,sx:C=null,size:g="medium",DisableClearable:I=!1,disabled:u=!1}){Is().pathname.replace("/RITeSchool/Student/","");const D=m=>{/[a-zA-Z0-9\s-]/.test(m.key)||["Backspace","ArrowLeft","ArrowRight","Tab","Delete"].includes(m.key)||m.preventDefault()};return e.jsx(js,{value:r.find(m=>m.Id===x)||null,onChange:(m,T)=>d(T?T.Id:""),options:r,disableClearable:I,disabled:u,getOptionLabel:m=>m.Name,isOptionEqualToValue:(m,T)=>m.Id===T.Id,renderInput:m=>e.jsx(me,{...m,size:g,sx:C||{minWidth:"350px",pl:"10px"},label:b?e.jsxs("span",{children:[b," ",f&&e.jsx("span",{style:{color:"red"},children:"*"})]}):"",onKeyDown:D})})}function ot({GPID:r=0}){const d=Ue(),{showAlert:b,closeAlert:x}=o.useContext(as),f=localStorage.getItem("localSchoolId"),C=sessionStorage.getItem("AcademicYearId"),g=S(n=>n.ContactGroup.IGetUser),I={asSchool_Id:Number(f),asAcademicYearId:Number(C),asGroupId:r};o.useEffect(()=>{d($e(I))},[]);const u=n=>{const N={asSchoolId:Number(f),asAcademicYearId:Number(C),asGroupId:r,asUserId:n,asInsertedById:0};n&&b({title:"Please Confirm",message:"Are you sure you want to remove this user from selected group?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{x()},onConfirm:()=>{d(ts(N)),d($e(I)),x()}}),o.useEffect(()=>{d(ts(N)),d($e(I))},[])};return e.jsx(rs,{component:i,children:e.jsxs(ns,{"aria-label":"simple table",sx:{border:n=>`1px solid ${n.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(ls,{children:e.jsxs(ye,{sx:{background:n=>n.palette.secondary.main,color:n=>n.palette.common.white},children:[e.jsx(X,{sx:{background:n=>n.palette.secondary.main,color:"white",fontWeight:"bold",py:1.5},children:"User Name"}),e.jsx(X,{align:"center",sx:{background:n=>n.palette.secondary.main,color:"white",fontWeight:"bold",py:1},children:"Delete"})]})}),e.jsx(cs,{children:g.map(n=>e.jsxs(ye,{children:[e.jsx(X,{sx:{py:.5},children:n.UserName}),e.jsx(X,{align:"center",sx:{py:1},children:e.jsx(oe,{onClick:()=>u(n.UserId),sx:{color:"#38548A	","&:hover":{color:"red",backgroundColor:is[100]}},children:e.jsx(te,{title:"Delete",children:e.jsx(ds,{})})})})]},n.UserId))})]})})}const fs=({onClose:r,GPID:d=0,GPName:b=""})=>{const x=Ue(),[f,C]=o.useState(10),[g,I]=o.useState(1),u=[10,20,30,40,50,60];o.useState(!1);const[n,N]=o.useState([]),[D,m]=o.useState([]),[T,_]=o.useState(!1),[B,j]=o.useState(null),[A,G]=o.useState("0"),[L,le]=o.useState("0"),[M,Q]=o.useState(b),[we,ce]=o.useState(""),[Ge,z]=o.useState(""),[ie,R]=o.useState(""),[W,ae]=o.useState(""),[re,ne]=o.useState(""),[O,de]=o.useState(""),[v,J]=o.useState([]),P=sessionStorage.getItem("AcademicYearId"),E=localStorage.getItem("localSchoolId"),fe=sessionStorage.getItem("RoleId"),ge=Number(localStorage.getItem("UserId")),[Y,ue]=o.useState("asc"),[H,Z]=o.useState("Name"),ke=S(t=>t.getuser1.GetUser);S(t=>t.ContactGroup.IContactGroups);const he=S(t=>t.ContactGroup.IContactGroupUserRoles),F=S(t=>t.ContactGroup.IGetUserRole),$=S(t=>t.ContactGroup.IGetStandardClass),ee=S(t=>t.ContactGroup.IlistGetUserName),Se=S(t=>t.ContactGroup.IAddUpdateGroup),V=S(t=>t.ContactGroup.IUserCount);o.useEffect(()=>{d!==0&&N(typeof he=="string"?he.split(",").map(t=>t.trim()):[])},[he]);const U=o.useMemo(()=>Array.isArray(V)?V.reduce((t,l)=>{const y=Number(l.TotalCount);return isNaN(y)?t:t+y},0):0,[V]),se={asSchoolId:Number(E),asAcademicYearId:Number(P),asGroupId:0,asRoleId:Number(A),asStandardDivisionId:Number(L),asFilter:""};o.useEffect(()=>{x(As(se))},[A,L]);const K={asSchoolId:E.toString(),asAcademicYearId:P,asGroupId:d.toString(),asUserRoleId:fe,asUserId:ge.toString()};o.useEffect(()=>{x(bs(K))},[]);const pe={asSchoolId:Number(E),asAcademicYearId:Number(P),asGroupId:0,asUserRoleId:Number(fe),asUserId:ge},Re={asSchoolId:Number(E)};o.useEffect(()=>{x(Ns(Re))},[]),o.useEffect(()=>{F.length>0&&G(F[0].Id)},[F]);const Ee={asSchoolId:Number(E),asAcademicYearId:Number(P)};o.useEffect(()=>{x(ys(Ee))},[E,P]),o.useEffect(()=>{$.length>0&&le($[0].Id)},[$]);const Ce={asSchoolId:Number(E),asAcademicYearId:Number(P),asGroupId:0,asRoleId:Number(A),asStartIndex:(g-1)*f,asEndIndex:g*f,asSortDirection:Y.toString(),asStandardDivisionId:Number(L),asFilter:""};o.useEffect(()=>{x(vs(Ce))},[x,g,f,A,L,Y]),o.useEffect(()=>{v.join(",")},[v]),o.useEffect(()=>{Q(b)},[b]);const De=t=>{G(t)},Te=t=>{t!==L&&(le(t),j(L))};function Be(){let t=`<MailingGroup xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\r
  `;return t+=" <GroupId>"+d+`</GroupId>\r
  <Name>`+M+`</Name>\r
  <lstUserRoles>\r
`,n.forEach(l=>{t+=`    <UserRoles>\r
  <User_Role_Id>`+l+`</User_Role_Id>\r
    </UserRoles>\r
`}),t+=`  </lstUserRoles>\r
  <Users>`+D+`</Users>\r
  <IsDefault>false</IsDefault>\r
  <IsAllDeactivated>false</IsAllDeactivated>`,t+=`\r
</MailingGroup>`,t}const Me=async()=>{Q(""),m([]),N([]),_(!1),ae(""),R(""),ce(""),z(""),ne("")},Ie=async()=>{let t=!0;if(R(""),ce(""),z(""),ne(""),ae(""),M.trim()||(R("Group name should not be blank."),t=!1),d===0&&await Pe(M)&&(ne("Group Name already exists."),t=!1),n.length===0&&(ce("At least one applicable role should be selected."),t=!1),d===0&&D.length===0&&(z("At least one user should be selected for the group."),t=!1),!t)return;const l={asSchoolId:Number(E),asAcademicYearId:Number(P),asMailingGroupXML:Be()};x(Ts(l)),Q(""),m([]),N([]),_(!1),ae(""),R(""),ce(""),z(""),ne("")};o.useEffect(()=>{Se!==""&&(d===0?Qe.success("Group details added successfully."):Qe.success("Group details updated successfully."),x(Us()),x(es(pe)))},[Se,r,M,n,D,d]);const Pe=async t=>ke.map(y=>y.Value).includes(t.trim()),Ye=t=>{C(parseInt(t.target.value,10)),I(1)},Le=t=>{I(t)},We=t=>{const l=t.target.checked;_(l),m(l?ee.map(y=>y.UserId):[])},je=t=>{m(l=>l.includes(t)?l.filter(y=>y!==t):[...l,t]),_(!1)},Ae=t=>{N(l=>l.includes(t)?l.filter(y=>y!==t):[...l,t])},Oe=t=>{de(t)},k=()=>{if(O==="")J(ee);else{const t=ee.filter(l=>{const y=l.UserName.toLowerCase().includes(O.toLowerCase()),_e=l.UserName.toLowerCase().includes(O.toLowerCase());return y||_e});J(t)}};o.useEffect(()=>{J(ee)},[ee]);const Fe=(g-1)*f+1,Ve=Math.min(g*f,U),be=Math.ceil(U/f),Ne=t=>{H===t?ue(Y==="asc"?"desc":"asc"):(Z(t),ue("asc"))};return e.jsxs(e.Fragment,{children:[e.jsxs(i,{children:[e.jsx(p,{container:!0,spacing:2,children:e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(me,{fullWidth:!0,label:e.jsxs("span",{children:["Group Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:1,value:M,onChange:t=>{const l=t.target.value;l.length<=50&&Q(l)}})})}),e.jsx(p,{sx:{marginTop:1},children:e.jsxs(w,{children:[e.jsx(xe,{Error:W}),e.jsx(xe,{Error:ie}),e.jsx(xe,{Error:we}),e.jsx(xe,{Error:Ge}),e.jsx(xe,{Error:re})]})}),e.jsxs(p,{item:!0,xs:12,children:[e.jsx(w,{pt:1,children:e.jsx("b",{children:"Applicable To "})}),e.jsx(ws,{component:"fieldset",children:e.jsx(p,{container:!0,direction:"row",alignItems:"center",spacing:2,children:F.map((t,l)=>e.jsx(p,{item:!0,children:e.jsx(Gs,{control:e.jsx(Ke,{checked:n.includes(t.Id),onChange:()=>Ae(t.Id),defaultValue:n}),label:t.Name})},l))})})]})]}),d!==0&&e.jsx(ot,{GPID:d}),e.jsxs(p,{container:!0,direction:"row",alignItems:"center",spacing:2,sx:{pt:1},children:[e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(os,{label:"User Role ",sx:{minWidth:"15vw"},ItemList:F,onChange:De,defaultValue:A})}),A==="3"&&e.jsx(p,{xs:12,sm:4,children:e.jsx(os,{label:"Class",sx:{minWidth:"15vw"},ItemList:$,onChange:Te,defaultValue:L})}),e.jsx(p,{item:!0,xs:12,sm:4,children:e.jsx(me,{fullWidth:!0,label:e.jsxs("span",{children:["Search By Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),rows:1,value:O,onChange:t=>{const l=t.target.value;l.length<=50&&Oe(l)},onKeyDown:t=>{(t.key==="Enter"||t.key==="Tab")&&k()}})}),e.jsx(p,{item:!0,xs:1.5,children:e.jsx(oe,{onClick:k,sx:{background:t=>t.palette.primary.main,color:"white","&:hover":{backgroundColor:t=>t.palette.primary.dark}},children:e.jsx(ks,{})})})]}),e.jsx(i,{py:1,children:e.jsx(i,{sx:{display:"flex",justifyContent:"space-between",p:.5},children:e.jsx(i,{children:e.jsx(w,{variant:"h4",sx:{marginTop:1},children:"Select Users To Add In Selected Group"})})})}),e.jsx(i,{p:.5,children:v.length!==0?e.jsx(i,{style:{flex:1,textAlign:"center"},children:e.jsxs(w,{variant:"subtitle1",sx:{margin:" 0px",textAlign:"center"},children:[e.jsxs(i,{component:"span",fontWeight:"fontWeightBold",children:[Fe," to ",Ve]})," ","out of"," ",e.jsx(i,{component:"span",fontWeight:"fontWeightBold",children:U})," ",U===1?"record":"records"]})}):null}),v.length!==0?e.jsxs(i,{children:[e.jsx(rs,{component:i,sx:{overflow:"auto"},children:e.jsxs(ns,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(ls,{children:e.jsxs(ye,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:[e.jsx(X,{padding:"checkbox",sx:{py:0,color:"white"},children:e.jsx(Ke,{checked:T,onChange:We,size:"small"})}),e.jsx(X,{sx:{py:0,color:"white"},children:e.jsxs("b",{onClick:()=>Ne("Name"),style:{cursor:"pointer",display:"flex",alignItems:"center"},children:["User Name ",H==="Name"&&(Y==="asc"?e.jsx(Js,{}):e.jsx(Zs,{}))]})})]})}),e.jsx(cs,{children:v.map((t,l)=>e.jsxs(ye,{children:[e.jsx(X,{padding:"checkbox",sx:{py:0},children:e.jsx(Ke,{checked:D.includes(t.UserId),onChange:()=>je(t.UserId),size:"small"})}),e.jsx(X,{sx:{py:0},children:t.UserName})]},l))})]})}),U>9?e.jsx(Rs,{ChangeRowsPerPage:Ye,rowsPerPageOptions:u,rowsPerPage:f,PageChange:Le,pagecount:be}):e.jsx("span",{})]}):e.jsx(i,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(w,{variant:"h6",align:"center",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."})}),e.jsx(i,{children:e.jsxs(Es,{sx:{py:2,px:3},children:[e.jsx(qe,{color:"error",onClick:r,children:"Cancel"}),e.jsx(qe,{color:"error",onClick:Me,children:"Clear"}),e.jsx(qe,{onClick:Ie,sx:{color:"green","&:hover":{color:"green",backgroundColor:Ds[100]}},children:d===0?"Add":"Update"})]})})]})},at=({Item:r,onClick:d})=>{o.useState(!1);const[b,x]=o.useState(!1);o.useState([]);const{showAlert:f,closeAlert:C}=o.useContext(as),g=Ue(),I=localStorage.getItem("localSchoolId"),u=sessionStorage.getItem("Id"),n=sessionStorage.getItem("AcademicYearId"),N=sessionStorage.getItem("RoleId"),D=us("Message Center"),m=()=>{d({Id:r.Id,isActive:!r.isActive})};function T(j){const A={asSchoolId:Number(I),asGroupId:j,asInsertedById:0};if(!r.isActive){f({title:"Please Confirm",message:"Are you sure you want to remove this group?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{C()},onConfirm:()=>{g(Ls(A)),C()}});const G={asSchoolId:Number(I),asAcademicYearId:Number(n),asGroupId:0,asUserRoleId:Number(N),asUserId:Number(u)};g(es(G))}}const _=j=>{x(!0)},B=()=>{x(!1)};return e.jsx(i,{children:e.jsx(Bs,{sx:{border:j=>`1px solid ${j.palette.grey[400]}`,py:.2},children:e.jsxs(i,{sx:{display:"flex"},children:[e.jsx(st,{name:r.Name,value:r.Value,checked:r.isActive,onChange:m,IsAllDeactivated:r.IsAllDeactivated,IsExamSubmitted:r.IsExamSubmitted}),e.jsxs(e.Fragment,{children:[e.jsx(p,{item:!0,container:!0,xs:12,children:e.jsx(te,{title:e.jsxs(Ms.Fragment,{children:[e.jsx(w,{variant:"h6",sx:{mb:1,color:"white"},children:r.Name}),e.jsx(w,{variant:"body1",sx:{color:"white"},children:r.Users})]}),placement:"right",disableFocusListener:!0,disableTouchListener:!0,PopperProps:{disablePortal:!0},componentsProps:{tooltip:{sx:{overflow:"hidden",whiteSpace:"normal",textOverflow:"ellipsis",maxHeight:"6.25rem",lineHeight:"1.25rem",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical",position:"relative"}}},children:e.jsx(tt,{children:r.Name!==""?e.jsx(w,{sx:{width:"130px",overflow:"hidden",color:"#38548A	"},children:r.Name}):e.jsx(Ps,{alt:"user.name",src:localStorage.getItem("SiteURL")+"RITeSchool/Uploads/OnlineExamImages/"+r.path1,sx:{width:"180px",height:"160px",border:"2px solid gray",textAlign:"center"},variant:"square","aria-label":"add"})})})}),e.jsxs(p,{container:!0,children:[e.jsx(p,{item:!0,xs:4,children:D==="Y"&&e.jsx(oe,{sx:{ml:1,p:0,textAlign:"left",color:"#38548A	","&:hover":{color:"#38548A",p:0,backgroundColor:ve[300]}},onClick:()=>_(),children:e.jsx(te,{title:"Edit",children:e.jsx(Ys,{sx:{p:0}})})})}),e.jsx(p,{item:!0,xs:4,children:D==="Y"&&e.jsx(oe,{onClick:()=>T(r.Id),sx:{ml:4.5,p:0,color:"#38548A	","&:hover":{color:"red",p:0,backgroundColor:is[100]}},children:e.jsx(te,{title:"Delete",children:e.jsx(ds,{sx:{p:0}})})})}),e.jsxs(hs,{open:b,onClose:B,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(ps,{sx:{bgcolor:"#223354"},children:[e.jsx(te,{title:"Add / edit delete contact group(s).",placement:"bottom-end",children:e.jsx(ms,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:ve[600]}}})}),e.jsx(Je,{onClick:B,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(w,{variant:"h3",sx:{pt:2,pl:3},children:"Update Contact Group"}),e.jsx(xs,{children:e.jsx(i,{children:e.jsx(fs,{onClose:B,GPID:r.Id,GPName:r.Name})})})]})]})]})]})})})},rt=({Itemlist:r,onChange:d,isSingleSelect:b=!1,ContactGP:x="0",ClickGroupRadio1:f})=>{const C=u=>{f(u),r=r.map(n=>n.Id===u.Id?{...n,isActive:u.isActive}:{...n,isActive:b?!1:n.isActive}),d(r)};let g=r.some(u=>u.isActive===!1)?r.some(u=>u.isActive===!0)?2:0:1;const I=u=>{r=r.map(n=>({...n,isActive:u})),d(r)};return e.jsxs(e.Fragment,{children:[e.jsx(et,{Item:{text1:"",text2:"Select All",isActive:g,text3:x==="9"?"Edit":"",text4:x==="9"?"Delete":""},onChange:I}),r==null?void 0:r.map((u,n)=>e.jsx(e.Fragment,{children:x==="9"?e.jsx(at,{Item:u,onClick:C},n):e.jsx(Qs,{Item:u,onClick:C},n)}))]})},gt=({RecipientName:r,RecipientId:d,recipientListClick:b,contactGroupList:x,classIdList:f,IsConfirm:C,getGroupRadio:g,getGroupRadio1:I})=>{const u=Ue();Ws();const[n,N]=o.useState(!1),[D,m]=o.useState(!1),[T,_]=o.useState(""),[B,j]=o.useState(r||[]),[A,G]=o.useState(d||[]),[L,le]=o.useState(f||[]),[M,Q]=o.useState(x||[]),[we,ce]=o.useState(),[Ge,z]=o.useState(),[ie,R]=o.useState([]);console.log(ie,"list");const[W,ae]=o.useState(""),[re,ne]=o.useState("");o.useState("0");const[O,de]=o.useState([]),[v,J]=o.useState(""),[P,E]=o.useState(!1),[fe,ge]=o.useState(!0),[Y,ue]=o.useState(""),H=sessionStorage.getItem("AcademicYearId"),Z=localStorage.getItem("localSchoolId"),ke=sessionStorage.getItem("RoleId"),he=sessionStorage.getItem("StandardDivisionId"),F=sessionStorage.getItem("Id"),$=us("Message Center"),[ee,Se]=o.useState([{Id:"Entire School",Name:"Entire School",Value:"Entire School",isActive:!1}]),V=S(s=>s.getGetAdminAndprincipalUsers.getGetAdminAndprincipalUsers),U=S(s=>s.getuser1.GetUser);S(s=>s.getuser1.Loading);const se=S(s=>s.getuser1.getClass);S(s=>s.getuser1.getStudent);const K=S(s=>s.getuser1.PTAOption),pe=S(s=>s.ContactGroup.IDeleteMailGroupMsg);o.useEffect(()=>{pe!==""&&(Qe.success(pe),u(Os()))},[pe]);const Re={asAcademicYearId:H,asSchoolId:Z},Ee={asStdDivId:W,asAcadmeicYearId:H,asSchoolId:Z},Ce=re||"0",De={asAcademicYearId:H,asSchoolId:Z,asStdDivId:P?Ce:he,asUserId:F,asSelectedUserGroup:v,asName:Y,abIsSMSCenter:!!location.pathname.includes("ComposeSMS"),IsForLeftStudents:P},Te={asSchoolId:Z,asUserId:F,asAcademicYearId:H},Be={asSchoolId:Number(Z),asAcademicYearId:Number(H),asGroupId:0,asUserRoleId:$==="Y"?0:Number(ke),asUserId:Number(F)};o.useEffect(()=>{u(Fs(Te))},[]);const Me=s=>{ge(!0);const a=B.filter(h=>h!==s),c=A.filter((h,Cs)=>B[Cs]!==s);j(a),G(c)};o.useEffect(()=>{const s=sessionStorage.getItem("SchoolId");sessionStorage.getItem("RoleId");const a=location.pathname.includes("ComposeSMS"),c=!a;let h=[];sessionStorage.getItem("RoleId")==="3"?(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||a||c&&s==="122")&&sessionStorage.getItem("RoleId")!=="2"&&h.push({Id:"11",Name:"PTA",isActive:!1}),K.HideStudentOption||h.push({Id:"3",Name:"Student",isActive:!1})):sessionStorage.getItem("RoleId")==="2"?(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||a)&&!(c&&s!=="122")&&h.push({Id:"11",Name:"PTA",isActive:!1}),K.HideStudentOption||h.push({Id:"3",Name:"Student",isActive:!1})):(h=[{Id:"2",Name:"Teacher",isActive:!1},{Id:"3",Name:"Student",isActive:!1},{Id:"7",Name:"Other Staff",isActive:!1},{Id:"6",Name:"Admin Staff",isActive:!1},{Id:"9",Name:"Contact group",isActive:!1}],(K.ShowPTAOption||c&&s==="122"||a)&&h.push({Id:"11",Name:"PTA",isActive:!1})),a&&s=="122"&&h.push({Id:"3",Name:"Student",isActive:!1}),a&&(h.push({Id:"12",Name:"Left Students",isActive:!1}),h.push({Id:"7",Name:"Other Staff",isActive:!1})),de(h),j(r),G(d),Ie(d)},[K]),o.useEffect(()=>{u(Vs(Ee))},[W]),o.useEffect(()=>{u(_s(Re))},[we]),o.useEffect(()=>{z(V==null?void 0:V.map(s=>({...s,isActive:!!d.includes(s.Id)})))},[V]),o.useEffect(()=>{v=="9"?u(es(Be)):u(zs(De))},[v,re,Ce]),o.useEffect(()=>{Ie(A)},[U]);const Ie=s=>{R(U==null?void 0:U.map(a=>({...a,isActive:!!(k("Contact group")?M.includes(a.Id):s.includes(a.Id)||Pe())})))},Pe=()=>{let s=se.filter(a=>a.Id===Number(W)).map(a=>a.Name);return B.includes(s[0])},Ye=s=>{ae(s)},Le=s=>{ne(s)},We=s=>{Se(s),j([]),G([]),z(V),de(O.map(a=>({...a,isActive:!1}))),J(""),l(s)},je=()=>{R(Y===""?U:U.filter(s=>s.Name.toLowerCase().includes(Y.toLowerCase())))},Ae=s=>{ue(s)},Oe=s=>{R([]),ae(""),J(""),s==null||s.map((a,c)=>{a.isActive&&J(a.Id)}),de(s)},k=s=>{let a=!1;return O.map(c=>{c.Name===s&&c.isActive&&(a=!0)}),a},Fe=()=>{let s=!1;return O.map(a=>{a.isActive&&(s=!0)}),s},Ve=s=>{R(s),k("Student")?s.some(a=>a.isActive===!1)?(le([]),j(a=>a.filter(c=>c!==be[0])),G(a=>a.filter(c=>c!==Ne[0])),l(s)):(y(s),le(a=>[...a,Ne[0]]),j(a=>[...a,be[0]])):l(s)},be=se.filter(s=>s.Id==W).map(s=>s.Name),Ne=se.filter(s=>s.Id==W).map(s=>s.Id),t=s=>{z(s),l(s)},l=s=>{s==null||s.map(a=>{a.isActive&&(!k("Contact group")&&!A.includes(a.Id)||k("Contact group")&&!M.includes(a.Id))?(j(c=>[...c,a.Value]),k("Contact group")?Q(c=>[...c,a.Id]):G(c=>[...c,a.Id])):!a.isActive&&(!k("Contact group")&&A.includes(a.Id)||k("Contact group")&&M.includes(a.Id))&&(j(c=>c.filter(h=>h!==a.Value)),k("Contact group")?Q(c=>c.filter(h=>h!==a.Id)):G(c=>c.filter(h=>h!==a.Id)))})},y=s=>{s==null||s.map(a=>{A.findIndex(c=>c===a.Id),G(c=>c.filter(h=>h!==a.Id)),j(c=>c.filter(h=>h!==a.Value))})};o.useEffect(()=>{C!=""&&_e()},[C]);const _e=()=>{b({RecipientName:B,RecipientId:A,ClassId:L,ContactGroup:M})},ze=()=>{N(!1)},gs=s=>{_(""),m(s),N(!0)},He=s=>{const a=s.isActive;g(s.Id),s.Id==12?E(a):E(!1)},Ss=s=>{I(s.isActive)},ss=()=>{ue(""),R(U)};return e.jsxs(e.Fragment,{children:[e.jsxs(i,{children:[e.jsx(p,{container:!0,children:e.jsx(p,{item:!0,xs:12,sm:12,children:e.jsx(me,{fullWidth:!0,placeholder:"Selected Recipient",margin:"normal",InputProps:{startAdornment:e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",overflowY:"scroll",minWidth:"100%",height:"120px"},children:B.map((s,a)=>e.jsx(Hs,{label:s==null?void 0:s.trim(),onDelete:()=>Me(s),sx:{mt:.7,mx:.3}},a))}),readOnly:!0},value:""})})}),e.jsx(p,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,textAlign:"right",justifyContent:"flex-end",sx:{mb:{xs:6,sm:0}},children:e.jsx(me,{label:"Search By Name",value:Y,variant:"outlined",size:"small",fullWidth:!0,sx:{width:{xs:"70vw",sm:"42vw",md:"40vw",lg:"26vw"},ml:{xs:0,sm:0,md:0,lg:51},my:{xs:0,sm:1,md:1,lg:1}},onChange:s=>{Ae(s.target.value),s.target.value===""&&ss()},InputProps:{endAdornment:e.jsxs(e.Fragment,{children:[e.jsx(oe,{onClick:je,children:e.jsx(Xs,{})}),Y&&e.jsx(oe,{onClick:()=>{Ae(""),ss()},children:e.jsx(Je,{})})]})},onKeyDown:s=>{s.key==="Enter"&&je()}})}),e.jsx(e.Fragment,{children:fe===!0?e.jsx(e.Fragment,{children:e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:12,sm:6,mt:-5,children:e.jsxs(p,{container:!0,spacing:1,children:[e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(i,{children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:Ge,onChange:t})})}),e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(i,{children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:O,onChange:Oe,isSingleSelect:!0})})}),$==="Y"&&e.jsx(p,{item:!0,xs:6,sm:12,children:e.jsx(i,{sx:{borderColor:"grey.300"},children:e.jsx(Xe,{ClickGroupRadio:He,Itemlist:ee,onChange:We})})})]})}),e.jsxs(p,{item:!0,xs:12,sm:6,children:[v==="3"&&e.jsx(Ze,{sx:{minWidth:"300px"},ItemList:se,onChange:Ye,label:"Select Class",defaultValue:W,size:"small"}),v==="12"&&e.jsx(Ze,{sx:{minWidth:"300px",mb:1},ItemList:se,onChange:Le,label:"Select Class",defaultValue:re,size:"small"}),v==="9"&&e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",p:.5},children:[e.jsx(i,{sx:{background:"white",pt:1},children:e.jsxs(i,{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[e.jsx(w,{variant:"h4",sx:{mb:0,lineHeight:"normal",alignSelf:"center",paddingBottom:"2px"},children:"Legend"}),e.jsx(i,{sx:{display:"flex",gap:"20px"},children:e.jsxs(i,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(qs,{style:{color:"grey",fontSize:25,position:"relative",top:"-2px"}}),e.jsx(w,{children:"Deactivated User"})]})})]})}),e.jsx(i,{children:$==="Y"&&e.jsx(te,{title:"Add New Group",children:e.jsx(oe,{sx:{color:"#38548A",backgroundColor:ve[100],"&:hover":{color:"#38548A",backgroundColor:$s[100]}},onClick:()=>gs(!0),children:e.jsx(Ks,{})})})})]}),ie.length===0?(k("Student")||Fe())&&W!==""&&e.jsx(w,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."}):e.jsx(i,{sx:{maxHeight:"400px",overflowY:"auto"},children:e.jsx(rt,{Itemlist:ie,onChange:Ve,ContactGP:v,ClickGroupRadio1:Ss})})]})]})}):null})]}),e.jsxs(hs,{open:n,onClose:ze,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(ps,{sx:{bgcolor:"#223354"},children:[e.jsx(te,{title:"Add / edit delete contact group(s).",placement:"bottom-end",children:e.jsx(ms,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:ve[600]}}})}),e.jsx(Je,{onClick:ze,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(w,{variant:"h3",sx:{pt:2,pl:3},children:"Add Contact Group"}),e.jsx(xs,{children:e.jsx(i,{children:e.jsx(fs,{onClose:ze,GPID:0,GPName:""})})})]})]})};export{gt as A};
