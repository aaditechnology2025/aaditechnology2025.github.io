import{ah as E,j as e,B as n,T as F,ai as J,aj as O,ak as G,al as P,am as i,an as K,ao as U,ap as Q,aq as V,I as h,H as y,ar as X,as as Z,at as ee,r as x,au as te,E as ae,u as oe,A as re,c as I,t as se,av as le,aw as v,F as ne,K as de,L as B,ax as ie,n as ce,ay as xe,az as ge,aA as ue,m as pe}from"./index-d5YOjbb6.js";import{d as he}from"./Delete-CrUR97S5.js";function ye({ItemList:j,clickEdit:C,HeaderArray:m,clickDelete:D}){const l=E("Holidays");function b(t){const o=t.getDate().toString().padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],u=t.getFullYear();return`${o}-${r}-${u}`}const f=b(new Date);return e.jsx("div",{children:j.length===0?e.jsx(n,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(F,{variant:"h6",align:"center",color:"blue",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"Holidays not yet declared."})}):e.jsx(e.Fragment,{children:e.jsx(J,{component:n,children:e.jsxs(O,{"aria-label":"simple table",sx:{border:t=>`1px solid ${t.palette.divider}`},children:[e.jsx(G,{children:e.jsx(P,{sx:{background:t=>t.palette.secondary.main},children:m.map((t,o)=>t.Header!=="Edit"&&t.Header!=="Delete"||l!=="N"?e.jsx(i,{sx:{color:g=>g.palette.common.white,textAlign:o===0||o===1||o===2||o===3?"left":"center"},align:"center",children:e.jsx("b",{children:t.Header})},o):e.jsx(i,{style:{width:0,height:0,padding:0,border:0}},o))})}),e.jsx(K,{children:j.map((t,o)=>{const r=b(new Date(t.Text2))===f,u=U(new Date(t.Text2)),d=Q(new Date(t.Text2));V(new Date(t.Text1));const c=!r&&d?{backgroundColor:"white"}:{backgroundColor:r||o===0&&u?"#EFDCC9 ":"white"};return e.jsxs(P,{children:[e.jsx(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,opacity:!r&&d?.5:1,paddingTop:"2.5px",paddingBottom:"2.5px"},align:"left",children:t.Text1}),e.jsx(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,opacity:!r&&d?.5:1,paddingTop:"2.5px",paddingBottom:"2.5px"},align:"left",children:t.Text2}),e.jsx(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,textAlign:"left",opacity:!r&&d?.5:1,paddingTop:"2.5px",paddingBottom:"2.5px"},align:"left",children:t.Text3}),e.jsx(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,textAlign:"left",opacity:!r&&d?.5:1,padding:"10px"},align:"left",children:t.Text4}),e.jsx(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,opacity:!r&&d?.5:1,paddingTop:"2.5px",paddingBottom:"2.5px"},align:"center",children:t.Text5}),e.jsxs(i,{sx:{textTransform:"capitalize",backgroundColor:c.backgroundColor,paddingTop:"2.5px",paddingBottom:"2.5px",opacity:1},align:"center",children:[t.Text6,l=="Y"?e.jsx(h,{children:e.jsx(y,{title:"Edit",children:e.jsx(X,{sx:{cursor:"pointer","&:hover":{backgroundColor:""}},onClick:()=>C(t.Id)})})}):null]}),e.jsxs(i,{sx:{textTransform:"capitalize",opacity:1,backgroundColor:c.backgroundColor,paddingTop:"2.5px",paddingBottom:"2.5px"},align:"center",children:[t.Text7,l=="Y"?e.jsx(h,{sx:{color:"#223354","&:hover":{color:"red",backgroundColor:Z[100]}},onClick:()=>D(t.Id),children:e.jsx(y,{title:"Delete",children:e.jsx(ee,{})})}):null]})]},t.Id)})})]})})})})}const je=j=>{const C=sessionStorage.getItem("AcademicYearId"),m=localStorage.getItem("SchoolId");sessionStorage.getItem("StandardId"),sessionStorage.getItem("DivisionId"),x.useState();let D=te(14);const[l,b]=x.useState(20),w=[20,50,100,200],{showAlert:f,closeAlert:t}=x.useContext(ae),[o,g]=x.useState(1),r=oe(),u=re(),d=E("Holidays"),T=I(a=>a.Holidays.HolidaysDataF),N=T.filter(a=>a.TotalRows!==void 0).map(a=>a.TotalRows),p=[...new Set(N)][0],H=I(a=>a.Holidays.DeleteHolidayMsg),R=I(a=>a.Holidays.Loading),Y=()=>{let a=[{id:"startDate",label:"Start Date",renderCell:s=>e.jsx("div",{style:{textAlign:"center"},children:"getDateMonthYearDayDash(rowData.Text1)"})},{id:"endDate",label:"End Date",renderCell:s=>e.jsx("div",{style:{textAlign:"center"},children:"getDateMonthYearDayDash(rowData.Text2)"})},{id:"name",label:"Name",renderCell:s=>s.Text3},{id:"associatedClasses",label:"Associated Classes",renderCell:s=>s.Text4,cellProps:{align:"left"},headerCellProps:{align:"left"}},{id:"totalDays",label:"Total Days",renderCell:s=>s.Text5,cellProps:{align:"center"},headerCellProps:{align:"center"}}];return d==="Y"&&a.push({id:"edit",label:"Edit",renderCell:s=>e.jsx(n,{children:e.jsx(y,{title:"Edit",children:e.jsx(h,{sx:{p:0},color:"primary",onClick:()=>S(s.Id),children:e.jsx(ge,{})})})}),cellProps:{align:"center"},headerCellProps:{align:"center"}},{id:"delete",label:"Delete",renderCell:s=>e.jsx(n,{children:e.jsx(y,{title:"Delete",children:e.jsx(h,{sx:{p:0},color:"error",onClick:()=>A(s.Id),children:e.jsx(he,{})})})}),cellProps:{align:"center"},headerCellProps:{align:"center"}}),a},L=[{Id:1,Header:"Start Date 	"},{Id:2,Header:" 	End Date"},{Id:3,Header:"Name"},{Id:4,Header:" Associated Class(es)"},{Id:5,Header:" Total Days"},{Id:6,Header:"Edit"},{Id:7,Header:"Delete"}];x.useState(Y());const k={asAcademicYrId:Number(C),asSchoolId:Number(m),asStandardId:0,asDivisionId:0,asSortExp:"ORDER BY Holiday_Start_Date ASC",asStartIndex:(o-1)*l,asPageSize:o*l},A=a=>{const s={asSchoolId:Number(m),asAcademicYearID:Number(C),asHoliday_Id:Number(a)};f({title:"Please Confirm",message:"Are you sure you want to delete this holiday?  ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{t()},onConfirm:()=>{r(ue(s)),t()}})};x.useEffect(()=>{H!=""&&(se.success(H),r(le()),r(v(k)))},[H]);const S=a=>{u("../AddHoliday/"+pe(a),{state:{fromInternal:!0}})},z=()=>{u("../AddHoliday",{state:{fromInternal:!0}})},M=a=>{g(a)},_=a=>{b(parseInt(a.target.value,10)),g(1)},$=(o-1)*l+1,q=Math.min(o*l,p),W=Math.ceil(p/l);return x.useEffect(()=>{r(v(k))},[o,l]),e.jsxs(n,{sx:{px:2},children:[e.jsx(ne,{navLinks:[{title:"Holidays",path:""}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(y,{title:"Holiday list for the current year declared by your school.",children:e.jsx(h,{sx:{bgcolor:"grey.500",color:"white","&:hover":{bgcolor:"grey.600"}},children:e.jsx(de,{})})})}),D==="Y"?e.jsx(n,{children:e.jsx(y,{title:"Add New Holiday",children:e.jsx(h,{sx:{bgcolor:B[500],color:"white","&:hover":{bgcolor:B[600]}},onClick:()=>z(),children:e.jsx(ie,{})})})}):null]})}),R?e.jsx(ce,{}):e.jsxs(n,{sx:{background:"white",pt:1},children:[p>0?e.jsx("div",{style:{flex:1,textAlign:"center"},children:e.jsxs(F,{variant:"subtitle1",sx:{margin:"16px 0",textAlign:"center"},children:[e.jsxs(n,{component:"span",fontWeight:"fontWeightBold",children:[$," to ",q]})," ","out of"," ",e.jsx(n,{component:"span",fontWeight:"fontWeightBold",children:p})," ",p===1?"record":"records"]})}):e.jsx("span",{children:" "}),e.jsxs(n,{px:2,pb:2,children:[e.jsx(ye,{ItemList:T,clickEdit:S,HeaderArray:L,clickDelete:A}),p>19?e.jsx(xe,{rowsPerPage:l,ChangeRowsPerPage:_,rowsPerPageOptions:w,PageChange:M,pagecount:W}):e.jsx("span",{children:" "})]})]})]})};export{je as default};
