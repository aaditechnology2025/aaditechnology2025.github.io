import{r as x,A as $e,u as Ee,ag as Ve,w as Be,x as D,c as p,lf as ee,j as t,B as _,F as Ye,m as ze,p as He,G as me,H as Ue,I as Xe,J as se,K as qe,n as te,T as i,ai as Ke,c8 as Je,aj as I,an as $,al as b,am as c,ak as Qe,bv as E,q as Ze,bK as Oe,bL as Me,a8 as ke,L as es,iC as ss,lg as re,lh as ts}from"./index-d5YOjbb6.js";import{V as rs}from"./ViewResultAllTable-CSXyvEIe.js";const is=({})=>{var Q,Z,O,M,k;const[le,ne]=x.useState(!1);$e();const f=Ee(),oe=Ve(),{fromView:ae}=oe.state||{};let{asStudentId:C,isGenerated:R,IsView:N,stdId:G}=Be();C=D(C),R=D(R),N=D(N),G=D(G);const L=sessionStorage.getItem("AcademicYearId"),w=localStorage.getItem("localSchoolId"),V=Number(localStorage.getItem("UserId"));x.useState([]);const S=p(e=>e.FinalResultGenerateAll.getStudentDetails);p(e=>e.FinalResultGenerateAll.getExamDetails);const ie=p(e=>e.FinalResultGenerateAll.getTestMarksGA),ce=p(e=>e.FinalResultGenerateAll.getSubjectDetails),T=p(e=>e.FinalResultGenerateAll.MarkDetailsList),B=p(e=>e.FinalResultGenerateAll.showRankColumn);p(e=>e.FinalResultGenerateAll.HeaderArray),p(e=>e.FinalResultGenerateAll.SubHeaderArray),p(e=>e.FinalResultGenerateAll.getShortenTestDetails);const h=p(e=>e.FinalResultGenerateAll.EntireDataList),F=p(e=>e.FinalResultGenerateAll.ISEntireStudentFinalResult);p(e=>e.FinalResultGenerateAll.ListDisplayNameDetails);const de=p(e=>e.FinalResultGenerateAll.getViewResult);p(e=>e.FinalResultGenerateAll.getMarkDetailsView);const ue=p(e=>e.FinalResultGenerateAll.getSubjectDetailsView);p(e=>e.FinalResultGenerateAll.getGradesDetailsView),de.some(e=>e.ShowOnlyGrades.trim()==="true"),ue.filter(e=>e.Total_Consideration==="N");const xe=ce.filter(e=>e.Total_Consideration==="N"),j=p(e=>e.ProgressReportNew.IsGetSchoolSettings),pe=(Q=j==null?void 0:j.GetSchoolSettingsResult)==null?void 0:Q.ToppersCount,v=p(e=>e.FinalResultGenerateAll.getTotalPerGradeView);p(e=>e.FinalResultGenerateAll.getPerDetails);const Y=p(e=>e.FinalResultGenerateAll.Loading),[g,he]=x.useState(""),[z,ge]=x.useState([]),[H,Se]=x.useState([]);v==null||v.some(e=>["1","2","3"].includes(e.rank)),x.useEffect(()=>{var e;if(((e=h==null?void 0:h.ListMarkssDetails)==null?void 0:e.length)>0){let r=h==null?void 0:h.ListMarkssDetails;ge(r.filter(s=>{var n;return((n=s.IsForCoCurricularSubjects)==null?void 0:n.toLowerCase())==="true"}).map(s=>({...s,uniqueId:`${s.Grade_Name}-${s.Marks_Grades_Configuration_Detail_ID}`}))),Se(r.filter(s=>{var n;return((n=s.IsForCoCurricularSubjects)==null?void 0:n.toLowerCase())==="false"}).map(s=>({...s,uniqueId:`${s.Grade_Name}-${s.Marks_Grades_Configuration_Detail_ID}`})))}},[h]),x.useEffect(()=>{var e;j!=null&&console.log("UsGetSchoolSettings",j),he((e=j==null?void 0:j.GetSchoolSettingsResult)==null?void 0:e.IsTotalConsiderForProgressReport)},[j]);const[m,je]=x.useState("0");x.useEffect(()=>{var e;j!=null&&je((e=j==null?void 0:j.GetSchoolSettingsResult)==null?void 0:e.ToppersCount.toString())},[j]);const[A,y]=x.useState([]);x.useEffect(()=>{},[T]),x.useEffect(()=>{T.length>0&&y(T)},[T]);function be(e,r,s,n){const l=T.find(u=>u.Test_Id===e);if(l){const a=l.MarksArr.find(o=>o.schoolWiseStudentTestMarksId===r&&o.testwiseSubjectMarksId===s&&o.testType===n);return a?a.MarksScored:null}}async function fe(e,r,s,n,l){await y(u=>u.map(a=>a.Test_Id===e?{...a,MarksArr:a.MarksArr.map(o=>o.schoolWiseStudentTestMarksId===r&&o.testwiseSubjectMarksId===s&&o.testType===l&&o.isEdit?{...o,MarksScored:n}:o)}:a))}function Ae(e,r,s,n,l){y(u=>u.map(a=>a.Test_Id===e?{...a,MarksArr:a.MarksArr.map(o=>o.schoolWiseStudentTestMarksId===r&&o.testwiseSubjectMarksId===s&&o.isEdit&&o.MarksOrGrade==="G"?{...o,MarksScored:n}:o)}:a)),setTimeout(()=>{},1e3)}function _e(e,r,s,n,l){y(u=>u.map(a=>a.Test_Id===e?{...a,MarksArr:a.MarksArr.map(o=>o.schoolWiseStudentTestMarksId===r&&o.testwiseSubjectMarksId===s&&o.testType===l&&o.isEdit?{...o,MarksScored:"0"}:o)}:a))}function we(e,r,s,n,l){y(u=>u.map(a=>a.Test_Id===e?{...a,MarksArr:a.MarksArr.map(o=>o.schoolWiseStudentTestMarksId===r&&o.testwiseSubjectMarksId===s&&o.testType===l&&o.isEdit?{...o,MarksScored:be(e,r,s,l)}:o)}:a))}const[d,Te]=x.useState({}),[U,X]=x.useState(!1);x.useEffect(()=>{var e;Te(h),(e=h==null?void 0:h.listSubjectsDetails)!=null&&e.find(r=>r.Parent_Subject_Id!=="0")?X(!0):X(!1)},[h]);function ye(){var e,r,s,n;if(((e=d.ListTestTypeIdDetails)==null?void 0:e.length)===1&&g.toLowerCase()==="true")return!1;if(((r=d.ListTestTypeIdDetails)==null?void 0:r.length)===1&&g.toLowerCase()==="false")return!0;if(((s=d.ListTestTypeIdDetails)==null?void 0:s.length)>1&&g.toLowerCase()==="true")return!0;if(((n=d.ListTestTypeIdDetails)==null?void 0:n.length)>1&&g.toLowerCase()==="false")return!0}function W(e){let r=1,s=d.ListSubjectidDetails.filter(n=>n.Subject_Id===e).length;if(g.toLowerCase()==="true")return r=(ye()?s:0)+(s!==1&&1),r;if(g.toLowerCase()==="false")return r=s,r}function Ce(e){if(!Array.isArray(d.listTestidDetails))return"No Name Available";const r=d.listTestidDetails.filter(s=>s.Parent_Subject_Id===e);return r.length>=1&&r[0].Parent_Subject_Name?r[0].Parent_Subject_Name:"No Name Available"}function Re(e){var l,u;let r=1,s=d.listSubjectsDetails.filter(a=>a.Parent_Subject_Id===e),n=d==null?void 0:d.ListSubjectidDetails.filter(a=>{var o;return a.Subject_Id===((o=s[0])==null?void 0:o.Subject_Id)});if(g.toLowerCase()==="true")return((l=d.ListTestTypeIdDetails)==null?void 0:l.length)===1?(r=s.length+(((u=d.ListTestTypeIdDetails)==null?void 0:u.length)+1),r):(r=(s.length+1)*((n==null?void 0:n.length)+1),r);if(g.toLowerCase()==="false")return r=(s.length+1)*(n==null?void 0:n.length),r}function Ge(e){let r=d.listSubjectsDetails.filter(n=>n.Parent_Subject_Id===e);return d==null?void 0:d.ListSubjectidDetails.filter(n=>{var l;return n.Subject_Id===((l=r[0])==null?void 0:l.Subject_Id)})}function q(){var s;let e=[],r=[];return(s=d.listSubjectsDetails)==null||s.map(n=>{n.Parent_Subject_Id==="0"?r.push({...n,rowSpan:2,colSpan:W(n.Subject_Id)}):e.includes(n.Parent_Subject_Id)||(e.push(n.Parent_Subject_Id),r.push({...n,Subject_Name:Ce(n.Parent_Subject_Id),rowSpan:1,colSpan:Re(n.Parent_Subject_Id)}))}),r}function P(){var r;let e=(r=d.listSubjectsDetails)==null?void 0:r.map(s=>s.Parent_Subject_Id==="0"?{...s,Subject_Name:"",rowSpan:1,colSpan:W(s.Subject_Id)}:{...s,rowSpan:1,colSpan:W(s.Subject_Id)});return e.push({ID_Num:"54",Subject_Name:"",Subject_Id:"2365",Parent_Subject_Id:"0",Total_Consideration:"Y",Is_CoCurricularActivity:"False",Sort_Order:"7",rowSpan:1,colSpan:3}),e}const K={asSchoolId:Number(w),asAcadmeicYearId:Number(L),asStudentId:Number(C),asUserId:Number(V)},Fe={asSchoolId:Number(w)},De=async()=>{await f(ss(Fe)),f(re(K))};x.useEffect(()=>{De()},[g]),x.useEffect(()=>{f(ee(J))},[]);function Ne(e,r){var n;return(n=(r==="True"?z:H).find(l=>l.Grade_Name===e))==null?void 0:n.Marks_Grades_Configuration_Detail_ID}const Le=()=>{var s;let e="<SchoolWiseStudentTestMarksDetails>";const r=(s=S[0])==null?void 0:s.Id;return A.forEach(n=>{n.MarksArr.forEach(l=>{l!=null&&l.isEdit&&(l==null?void 0:l.IsAbsent)==="N"&&(e+='<SchoolWiseStudentTestMarksDetail School_Id="'+w+'" Academic_Year_Id="'+L+'" Student_Id="'+r+'" TestWise_Subject_Marks_Id="'+l.testwiseSubjectMarksId+'" SchoolWise_Student_Test_Marks_Id="'+l.schoolWiseStudentTestMarksId+'" TestType_Id="'+(l.testType!=="999"?l.testType:"1")+'" Marks_Scored="'+(l.MarksOrGrade==="M"?l.MarksScored:"")+'" Assigned_Grade_Id="'+(l.MarksOrGrade==="G"?Ne(l.MarksScored,l.isCoCurricular):"")+'" />')})}),e+="</SchoolWiseStudentTestMarksDetails>",e},J={asSchoolId:Number(w),asAcademicYearId:Number(L),asStudentsIds:[C],asStdDivId:Number(G),asWithGrace:1},ve=async()=>{const e={asschoolId:Number(w),asStudentMarkDetails:Le(),asUpdatedById:Number(V),asUseAvarageFinalResult:"Y"};await f(ts(e)),f(re(K)),ne(!0),f(ee(J))},[ls,We]=x.useState(null);x.useEffect(()=>{if((S==null?void 0:S.length)>0){const e=S.map((r,s)=>t.jsxs("b",{children:["Progress Report is not available for the student : ",r.Text2," - ",r.Text1,"."]},s));We(e)}},[S]),(()=>{let e=!0;return ie.map(r=>{r.Grade=="Absent"?e=!1:e=!0}),e})();const Pe=()=>{let e="";return S.map((r,s)=>{e=r.standardDivId}),e===""?G:e};function Ie(e){var n,l,u;let r,s=(n=d.ListDisplayNameDetails)==null?void 0:n.filter(a=>a.ShortName===e);return(s==null?void 0:s.length)>0&&(r=t.jsx("span",{style:{color:`${(l=s[0])==null?void 0:l.ForeColor}`,fontWeight:"bold"},children:(u=s[0])==null?void 0:u.DisplayName})),r}return x.useState("8"),t.jsxs(_,{px:2,children:[t.jsx(Ye,{navLinks:[{title:"Final Result",path:"/RITeSchool/Teacher/FinalResult/"+ze(Pe())},{title:"Generate/View Final Result",path:""}],rightActions:t.jsx(t.Fragment,{children:t.jsx(He,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:t.jsx(me,{item:!0,xs:12,sm:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:t.jsx(Ue,{title:'Edit marks of individual student and click on "Save".',children:t.jsx(Xe,{sx:{color:"white",backgroundColor:se[500],"&:hover":{backgroundColor:se[600]}},children:t.jsx(qe,{})})})})})})}),Y?t.jsx(te,{}):t.jsxs(t.Fragment,{children:[(h==null?void 0:h.ErrorMessage)!==""&&t.jsx(i,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:t.jsxs("b",{children:[" ",h==null?void 0:h.ErrorMessage]})}),(S==null?void 0:S.length)>0&&t.jsxs("div",{children:[N=="false"&&R&&t.jsxs("div",{children:[t.jsx(_,{sx:{background:"white"},children:t.jsxs(_,{children:[S.map((e,r)=>t.jsxs("div",{style:{border:"1px solid black"},children:[t.jsx(i,{variant:"h3",textAlign:"center",color:"primary",sx:{fontSize:{xs:"16px",sm:"18px",md:"20px",lg:"22px"}},children:e.School_Orgn_Name}),t.jsx("hr",{}),t.jsx(i,{variant:"h3",textAlign:"center",color:"black",mb:1,sx:{fontSize:{xs:"14px",sm:"16px",md:"18px",lg:"20px"}},children:e.School_Name}),t.jsx("hr",{}),t.jsx(i,{variant:"h3",textAlign:"center",color:"black",pb:1,sx:{fontSize:{xs:"12px",sm:"14px",md:"16px",lg:"18px"}},children:"Progress Report"})]},r)),t.jsxs(Ke,{component:Je,sx:{maxWidth:"100%",overflowX:"auto"},children:[t.jsx(I,{children:t.jsx($,{children:S.map((e,r)=>t.jsxs(b,{sx:{bgcolor:"#38548A",display:"flex",flexWrap:"nowrap"},children:[t.jsx(c,{sx:{flex:"0 0 200px",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:t.jsxs("b",{children:["Roll No : ",e.Text2]})}),t.jsx(c,{sx:{flex:{xs:"0 0 300px",sm:"0 0 500px",lg:"0 0 700px"},minWidth:{xs:"300px",sm:"500px",lg:"700px"},textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:t.jsxs("b",{children:["Name : ",e.Text1]})}),t.jsx(c,{sx:{flex:"1 1 auto",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:t.jsxs("b",{children:["Class : ",e.Text3," - ",e.Text4]})}),t.jsx(c,{sx:{flex:"1 1 auto",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:t.jsxs("b",{children:["Year : ",e.Text5]})})]},r))})}),t.jsx(I,{children:t.jsx($,{children:xe.length>0&&t.jsx(t.Fragment,{children:t.jsx(b,{sx:{bgcolor:"white",p:2},children:t.jsxs(c,{sx:{minWidth:"600px",whiteSpace:"nowrap"},children:[t.jsx("b",{children:" Legend : "})," ",t.jsx("span",{style:{color:"red"},children:"*"}),"   Subject marks not considered in total marks. "]})})})})})]}),t.jsx(_,{sx:{overflowX:"auto",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsxs(I,{children:[t.jsxs(Qe,{children:[U&&t.jsxs(t.Fragment,{children:[t.jsxs(b,{sx:{bgcolor:"#F0F0F0",textAlign:"center"},children:[t.jsxs(c,{rowSpan:3,sx:{border:e=>`1px solid ${e.palette.grey[400]}`},children:[t.jsx(i,{variant:"h3",textAlign:"center",color:"black",ml:6,children:"Subjects ▶"}),t.jsx(i,{variant:"h3",textAlign:"center",color:"black",children:"▼ Exam"})]}),q().map((e,r)=>t.jsx(c,{colSpan:e.Total_Consideration=="N"?1:e.colSpan,rowSpan:e.rowSpan,sx:{border:s=>`1px solid ${s.palette.grey[400]}`,textAlign:"center"},children:t.jsx(i,{color:"black",textAlign:"center",mr:0,children:t.jsxs("b",{style:{marginRight:"0px"},children:[e.Subject_Name,e.Is_CoCurricularActivity=="True"&&t.jsx("span",{style:{color:"red"},children:"*"})]})})},r)),g.toLowerCase()==="true"&&t.jsxs(t.Fragment,{children:[t.jsx(c,{rowSpan:3,sx:{border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:3,children:t.jsx("b",{children:"Total"})})}),t.jsx(c,{rowSpan:3,sx:{border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:1,children:t.jsx("b",{children:"%"})})}),t.jsx(c,{rowSpan:3,sx:{minWidth:"160px",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:0,children:t.jsx("b",{children:"Grade"})})})]}),((Z=S[0])==null?void 0:Z.IsFailCriteriaNotApplicable)==="N"&&g.toLowerCase()==="true"&&t.jsx(c,{rowSpan:3,sx:{py:1,minWidth:"140px",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"black",textAlign:"center",px:0,children:t.jsx("b",{children:"Result"})})}),m!=="0"&&g.toLowerCase()==="true"&&B&&t.jsx(c,{rowSpan:3,sx:{py:1,minWidth:"140px",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"black",textAlign:"center",px:0,children:t.jsx("b",{children:"Rank"})})})]}),t.jsx(b,{sx:{bgcolor:"#F0F0F0",textAlign:"center"},children:(O=P())==null?void 0:O.map((e,r)=>{var s,n;return t.jsxs(t.Fragment,{children:[r>0&&P()[r-1].Parent_Subject_Id!=="0"&&e.Parent_Subject_Id==="0"&&t.jsxs(t.Fragment,{children:[(n=Ge((s=P()[r-1])==null?void 0:s.Parent_Subject_Id))==null?void 0:n.map((l,u)=>t.jsxs(c,{rowSpan:2,sx:{minWidth:"140px",border:a=>`1px solid ${a.palette.grey[400]}`},children:["  ",t.jsxs(i,{textAlign:"center",mr:0,sx:{color:"#38548A",fontWeight:"800"},children:["Total ",l==null?void 0:l.ShortenTestType_Name]})]},u)),g.toLowerCase()==="true"&&t.jsxs(c,{rowSpan:2,sx:{minWidth:"140px",border:l=>`1px solid ${l.palette.grey[400]}`},children:["  ",t.jsx(i,{sx:{fontWeight:"800"},color:"#38548A",textAlign:"center",mr:4,children:"Total"})]})]}),e.Subject_Name!==""&&t.jsx(c,{colSpan:e.colSpan,rowSpan:e.rowSpan,sx:{border:l=>`1px solid ${l.palette.grey[400]}`,textAlign:"center"},children:t.jsx(i,{color:"black",textAlign:"center",mr:0,children:t.jsxs("b",{style:{marginRight:"5px"},children:[e.Subject_Name,e.Is_CoCurricularActivity=="True"&&t.jsx("span",{style:{color:"red"},children:"*"})]})})},r)]})})})]}),!U&&t.jsxs(b,{sx:{bgcolor:"#F0F0F0",textAlign:"center"},children:[t.jsxs(c,{rowSpan:2,sx:{py:1,border:e=>`1px solid ${e.palette.grey[400]}`},children:[t.jsx(i,{variant:"h3",textAlign:"center",color:"black",ml:5,children:"Subjects ▶"}),t.jsx(i,{variant:"h3",textAlign:"center",color:"black",ml:5,children:"▼ Exam"})]}),q().map((e,r)=>t.jsx(c,{colSpan:e.colSpan,sx:{py:1,border:s=>`1px solid ${s.palette.grey[400]}`,textAlign:"center",minWidth:"180px"},children:t.jsx(i,{color:"black",textAlign:"center",mr:0,children:t.jsxs("b",{style:{marginRight:"5px"},children:[e.Subject_Name,e.Total_Consideration=="N"&&t.jsx("span",{style:{color:"red"},children:"*"})]})})},r)),g.toLowerCase()==="true"&&t.jsxs(t.Fragment,{children:[t.jsx(c,{rowSpan:3,sx:{py:1,border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:3,children:t.jsx("b",{children:"Total"})})}),t.jsx(c,{rowSpan:3,sx:{py:1,border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:3,children:t.jsx("b",{children:"%"})})}),t.jsx(c,{rowSpan:3,sx:{py:1,border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:5,children:t.jsx("b",{children:"Grade"})})})]}),((M=S[0])==null?void 0:M.IsFailCriteriaNotApplicable)==="N"&&g.toLowerCase()==="true"&&t.jsx(c,{rowSpan:3,sx:{py:1,minWidth:"140px",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"black",textAlign:"center",px:0,children:t.jsx("b",{children:"Result"})})}),m!=="0"&&g.toLowerCase()==="true"&&B&&t.jsx(c,{rowSpan:3,sx:{py:1,minWidth:"140px",border:e=>`1px solid ${e.palette.grey[400]}`},children:t.jsx(i,{color:"black",textAlign:"center",px:0,children:t.jsx("b",{children:"Rank"})})})]}),t.jsx(b,{children:(k=d.listSubjectsDetails)==null?void 0:k.map((e,r)=>t.jsxs(t.Fragment,{children:[d.ListSubjectidDetails.map((s,n)=>t.jsx(t.Fragment,{children:e.Subject_Id===s.Subject_Id&&t.jsx(c,{sx:{py:1,alignItems:"center",minWidth:"120px",border:l=>`1px solid ${l.palette.grey[400]}`,backgroundColor:E[50]},children:t.jsx(i,{color:"#38548A",textAlign:"center",children:t.jsx("b",{style:{marginRight:"0px"},children:s.ShortenTestType_Name})})},n)})),g.toLowerCase()==="true"&&d.ListSubjectidDetails.filter(s=>s.Subject_Id===e.Subject_Id).length>1&&t.jsx(c,{sx:{py:1,border:s=>`1px solid ${s.palette.grey[400]}`,backgroundColor:E[50]},children:t.jsx(i,{color:"#38548A",textAlign:"center",px:2,children:t.jsx("b",{children:"Total"})})},`total-${r}`),(e==null?void 0:e.Is_CoCurricularActivity.toLowerCase())==="true"&&(e==null?void 0:e.Total_Consideration)==="N"&&!d.ListSubjectidDetails.find(s=>s.Subject_Id===e.Subject_Id)&&t.jsx(c,{sx:{py:1,border:s=>`1px solid ${s.palette.grey[400]}`,backgroundColor:E[50]},children:t.jsx(i,{color:"#38548A",textAlign:"center",mr:0,children:t.jsx("b",{children:"Grade"})})},r)]}))})]}),A.length>0&&A.map((e,r)=>t.jsx($,{sx:{backgroundColor:"#F0F0F0",alignItems:"center"},children:t.jsxs(b,{children:[t.jsx(c,{sx:{py:1,alignItems:"center",border:s=>`1px solid ${s.palette.grey[400]}`,maxWidth:"100%",minWidth:"300px"},children:t.jsxs("b",{children:[" ",e.TestName]})}),e.MarksArr.map(s=>{var n;return t.jsx(c,{sx:{py:1,alignItems:"center",fontWeight:r===A.length-1?"bold":"normal",textAlign:"center",backgroundColor:"white",border:l=>`1px solid ${l.palette.grey[200]}`,minWidth:"150px",width:"150px"},children:t.jsx("span",{style:{fontWeight:(s==null?void 0:s.IsGrades)==="Y"||r===A.length-1?"bold":"normal",display:"flex",justifyContent:"center",alignItems:"center",color:s!=null&&s.isResult?s==null?void 0:s.cellColor:"inherit"},children:s?(s==null?void 0:s.MarksScored)===void 0||(s==null?void 0:s.MarksScored)===null||(s==null?void 0:s.MarksScored)==="-"?"-":(s==null?void 0:s.IsAbsent)!=="N"?Ie(s.IsAbsent):(s==null?void 0:s.MarksScored)==null||(s==null?void 0:s.TotalMarks)==null||(s==null?void 0:s.MarksScored)==="-"?"-":t.jsxs(t.Fragment,{children:[s!=null&&s.isEdit&&r!==A.length-1?(s==null?void 0:s.MarksOrGrade)==="M"?t.jsx(Ze,{size:"small",value:s==null?void 0:s.MarksScored,inputProps:{maxLength:3,pattern:"[0-9]*"},onChange:l=>{const u=l.target.value.replace(/[^0-9]/g,"");u.length<=3&&fe(s.testId,s.schoolWiseStudentTestMarksId,s.testwiseSubjectMarksId,u,s.testType)},onBlur:l=>{l.target.value===""?_e(s.testId,s.schoolWiseStudentTestMarksId,s.testwiseSubjectMarksId,"0",s.testType):Number(l.target.value)>Number(s.TotalMarks)&&we(s.testId,s.schoolWiseStudentTestMarksId,s.testwiseSubjectMarksId,"0",s.testType)},sx:{width:"60px",marginRight:"8px"}}):t.jsx(Oe,{size:"small",value:(s==null?void 0:s.MarksScored)||"",onChange:l=>{Ae(s.testId,s.schoolWiseStudentTestMarksId,s.testwiseSubjectMarksId,l.target.value,s.testType)},sx:{width:"80px",marginRight:"8px"},children:(n=(s==null?void 0:s.isCoCurricular)==="True"?z:H)==null?void 0:n.map(l=>t.jsx(Me,{value:l.Grade_Name,children:l.Grade_Name},l.Marks_Grades_Configuration_Detail_ID))}):s.MarksScored,s.TotalMarks!=="-"&&` / ${s.TotalMarks}`]}):"-"})})})]})},r))]})})]})}),t.jsx(_,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:2},children:t.jsx(ke,{onClick:ve,sx:{color:"green","&:hover":{color:"green",backgroundColor:es[100]}},children:"Save & Generate Result"})})]}),Y&&t.jsx(te,{}),(le||R=="Y")&&F.length>0&&(F==null?void 0:F.map((e,r)=>t.jsx(t.Fragment,{children:t.jsx(rs,{stdFinalResult:e,IsTotalConsiderForProgressReport:g,ToppersCount:pe,isAllStdSelect:!1,showMarksRow:!ae},r)})))]}),!S&&t.jsx(_,{children:S.map((e,r)=>t.jsxs(i,{children:["Progress Report is not available for the student:",e.Text2," ",e.Text1]},r))})]})]})};export{is as default};
