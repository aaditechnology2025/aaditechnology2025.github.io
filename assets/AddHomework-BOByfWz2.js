import{w as Be,x as l,u as Re,A as Ge,r as s,c as h,t as ee,ji as We,jj as Me,jk as te,j as e,B as r,F as Oe,H as v,I as F,J as P,K as Ve,as as Ye,L as se,G as a,q as u,bR as _e,a8 as E,jl as Je,jm as $e,m as qe}from"./index-d5YOjbb6.js";import{d as ze}from"./Close-DJWwbmdJ.js";import{d as Ke}from"./CloudUpload-DJN1zp2n.js";import{d as Qe}from"./Save-Ckr0NoeK.js";import Xe from"./HomeworkSubjectList-C1NV4SK2.js";import{S as Ze}from"./SingleFile-BT4Sw5XK.js";import{S as et,U as tt}from"./UploadMultipleDialog-nxRImqxm.js";import st from"./AddUnpublish1-gm6dnPDH.js";import"./Delete-CrUR97S5.js";import"./ButtonStyle-DaPKUawX.js";import"./Link-CIF-2ERy.js";import"./Errormessage-RPRSgLGN.js";import"./tslib.es6-Bi47C8ZW.js";const At=()=>{let{ClassId:N,ClassName:x,TeacherId:b,TeacherName:j,SubjectName:g,subjectId:m,Id:I}=Be();N=l(N),x=l(x),b=l(b),j=l(j),g=l(g),m=l(m),I=l(I);const i=Re(),ae=Ge();s.useState("0"),s.useState([]),s.useState(""),s.useState("");const[S,B]=s.useState(m);s.useState("");const[R,at]=s.useState("");s.useState("");const[k,f]=s.useState(new Date().toISOString().split("T")[0]),[G,A]=s.useState(g+" : "+new Date().toISOString().split("T")[0]),[W,oe]=s.useState(""),[w,H]=s.useState(""),[ot,re]=s.useState(""),[rt,le]=s.useState(""),[D,C]=s.useState(""),[ie,M]=s.useState("");s.useState("");const[ne,ce]=s.useState(""),[de,ue]=s.useState([]);s.useState("");const[lt,he]=s.useState(""),[O,me]=s.useState("");s.useState("");const[V,Se]=s.useState(""),[it,pe]=s.useState(""),[Y,nt]=s.useState(""),[ct,xe]=s.useState("");s.useState([]);const[_,p]=s.useState(!1),[J,$]=s.useState(!1),[be,je]=s.useState("");s.useState("");const ge=[{Id:1,Header:" 	"},{Id:2,Header:"SR.No 	"},{Id:3,Header:"Subject"},{Id:4,Header:"Title"},{Id:5,Header:"Is Published? ",align:"center"},{Id:6,Header:"Complete By Date"}],Ie=()=>{p(!0)},ke=()=>{p(!1)},fe=["PDF","JPG","PNG","BMP","JPEG"],Ae=3e6,n=Number(localStorage.getItem("localSchoolId")),c=Number(sessionStorage.getItem("AcademicYearId")),L=Number(sessionStorage.getItem("StandardDivisionId"));localStorage.getItem("Id");const q=sessionStorage.getItem("TeacherId"),[T,z]=s.useState([]),K=localStorage.getItem("SiteURL");K.split("/")[K.split("/").length-1];const y=h(t=>t.AddHomework.ISSaveHomework),we=h(t=>t.AddHomework.Subjectlist),U=h(t=>t.AddHomework.AllPublishUnpublishHomework),o=h(t=>t.AddHomework.GetHomeworkDetail),Q=h(t=>t.AddHomework.SubjectListTeacher);s.useEffect(()=>{z(Q)},[Q]);const He={asSchoolId:n,aTeacherId:Number(q),asAcademicYearId:c,asStandardDivisionId:L};s.useEffect(()=>{U!=""&&ee.success(U),p(!1)},[U]);const De={asSchoolId:n,asAcademicYearId:c,asStandardDivisionId:L,asHomeWorkStatus:"All",asHomeworkTitle:"",asAssignedDate:"2023-04-18 00:00:00"};s.useEffect(()=>{i(We(De))},[]),s.useEffect(()=>{i(Me(He))},[]);const Ce=t=>{B(t)},Le=t=>{M(t.Name),Se(t.Value),je(t.Name)},Te={asTitle:G,asSubjectId:Number(m),asStandardDivisionId:L,asAttachmentPath:ie,asDetails:D,asAssignDate:k,asCompleteByDate:w,asSchoolId:n,asAcademicYearId:c,asInsertedById:Number(q),asSaveFeature:"Homework",asFolderName:"PPSN Website",asBase64String:V,additionalAttachmentFile:[{FileName:ne,Base64URL:Y}],AsId:0},ye=()=>{let t=!1;k==""?(oe("Field should not be blank"),t=!0):w==""?(re("Field should not be blank"),t=!0):V==""?(pe("Field should not be blank"),t=!0):Y==""?(xe("Field should not be blank"),t=!0):D==""&&(me("Field should not be blank"),t=!0),t||i(Je(Te)),t||Z()};s.useEffect(()=>{y!=""&&ee.success(y)},[y]);const X=t=>{const d={asSchoolId:n.toString(),asAcademicYearId:c.toString(),asHomeWorkLogId:Fe(),asUnpublishReason:"Yesss",asUpdatedById:b,IsPublished:t,IsSMSSent:1};i($e(d))},Ue=t=>{ae("/RITeSchool/Teacher/ViewHomework/"+qe(t),{state:{fromInternal:!0}})},ve=t=>{z(t)},Fe=()=>{let t="";return T.map(d=>{d.IsActive&&(t=t+","+d.Id)}),t},Z=()=>{B(""),A(""),f(""),H(""),M(""),ce(""),C("")},Pe=()=>{Z()},Ee=t=>{const d={asSchoolId:n,asAcademicyearId:c,asHomeworkId:Number(t)};i(te(d))};s.useEffect(()=>{const t={asSchoolId:n,asAcademicyearId:c,asHomeworkId:Number(I)};i(te(t))},[]),s.useEffect(()=>{o&&o.length>0&&(he(o.Id.toString),le(o[0].AttachmentPath),f(o[0].AssignedDate),H(o[0].CompleteByDate),A(o[0].Title),C(o[0].Details))},[o]);const Ne=T.filter(t=>t.Text1!==S);return s.useEffect(()=>{},[S,T]),e.jsx(e.Fragment,{children:e.jsxs(r,{sx:{px:2},children:[e.jsx(Oe,{navLinks:[{title:"Assign Homework",path:"/RITeSchool/Teacher/AssignHomework"},{title:"Add Homework",path:"/RITeSchool/Teacher/AddHomework"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(r,{children:e.jsx(v,{title:"Users can Add,Edit,Delete,Publish and Unpublish homework. And displays homework added by other teachers.",children:e.jsx(F,{sx:{color:"white",backgroundColor:P[500],height:"36px !important",":hover":{backgroundColor:P[600]}},children:e.jsx(Ve,{})})})}),e.jsx(r,{children:e.jsx(v,{title:"Cancel",children:e.jsx(F,{sx:{color:"white",backgroundColor:P[500],height:"36px !important",":hover":{backgroundColor:Ye[600]}},onClick:()=>Pe,children:e.jsx(ze,{})})})}),e.jsx(r,{children:e.jsx(v,{title:"Save HomeWork",children:e.jsx(F,{sx:{color:"white",backgroundColor:se[500],height:"36px !important",":hover":{backgroundColor:se[600]}},children:e.jsx(Qe,{onClick:ye})})})})]})}),e.jsx(r,{sx:{background:"white",p:2},children:e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:3,children:e.jsx(u,{fullWidth:!0,label:"Class",value:x})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(u,{fullWidth:!0,label:"Class Teacher",value:j})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(_e,{ItemList:we,onChange:Ce,defaultValue:S,sx:{minWidth:"100%"},label:"Select Subject"})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(u,{fullWidth:!0,value:G,onChange:t=>{A(t.target.value)},error:R!=="",helperText:R,label:e.jsxs("span",{children:["Title ",e.jsx("span",{style:{color:"red"},children:"*"})]})})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(u,{fullWidth:!0,label:e.jsxs("span",{children:["Assigned Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),InputLabelProps:{shrink:!0},inputProps:{type:"date"},value:k,onChange:t=>{f(t.target.value)},error:W!=="",helperText:W})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(u,{fullWidth:!0,InputLabelProps:{shrink:!0},label:e.jsxs("span",{children:["Complete By Date ",e.jsx("span",{style:{color:"red"},children:"*"})]}),inputProps:{type:"date"},value:w,onChange:t=>{H(t.target.value)}})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(Ze,{ValidFileTypes:fe,MaxfileSize:Ae,FileName:be,ChangeFile:Le,FileLabel:"Attachment",width:"100%",height:"52px",isMandatory:!1})}),e.jsx(a,{item:!0,xs:3,children:e.jsx(E,{startIcon:e.jsx(Ke,{}),fullWidth:!0,sx:{py:1.6},variant:"outlined",onClick:()=>$(!0),children:"Upload Multiple Attachments"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,label:e.jsxs("span",{children:["Details ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:3,value:D,onChange:t=>{C(t.target.value)},error:O!=="",helperText:O})})]})}),e.jsxs(r,{sx:{background:"white",p:2,mt:2},children:[e.jsx(Xe,{selectedSubjectId:S,clickEdit1:Ee}),e.jsx(r,{my:2,children:e.jsx(et,{ItemList:Ne,HeaderArray:ge,onChange:ve,clickchange:"",clickTitle:Ue})}),e.jsxs(r,{mt:2,sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:[e.jsx(E,{color:"primary",variant:"contained",onClick:()=>X(1),children:"PUBLISH ALL"}),e.jsx(E,{color:"primary",variant:"contained",onClick:Ie,children:"UNPUBLISH ALL"})]}),_&&e.jsx(st,{open:_,setOpen:p,ClickCloseDialogbox:ke,clickPublishUnpublish:X}),J&&e.jsx(tt,{open:J,MultipleFiles:de,setOpen:$,setMultipleFiles:ue})]})]})})};export{At as default};
