import{P as de,r as t,h as ce,s as he,S as v,j as e,B as d,T as o,cP as xe,H as me,cQ as ue,c as M,u as ge,fJ as pe,t as fe,fK as je,cI as Ae,G as n,aJ as C,fL as Se,fM as Ce}from"./index-d5YOjbb6.js";/* empty css                 */import{E as k}from"./Errormessage-RPRSgLGN.js";import{P as ye}from"./PageHeader-DqqjGq3-.js";import{B as be}from"./ButtonStyle-DaPKUawX.js";import{L as Ne}from"./CardStyle-B9qFmFtz.js";import"./Card-BrM9kpJu.js";G.propTypes={Note:de.string};function G({Note:r}){const[c,h]=t.useState(!1),x=()=>{h(l=>!l)},y=()=>{h(!1)};ce(),he("span")(({theme:l})=>`
          border-radius: 22px;
          width: ${l.spacing(1.5)};
          height: ${l.spacing(1.5)};
          display: inline-block;
          margin-right: ${l.spacing(1)};
          margin-top: -${l.spacing(.1)};
      `);const g=v();return e.jsx(e.Fragment,{children:e.jsx(d,{sx:{px:2},children:e.jsxs(d,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2,marginTop:"-27px"},children:[e.jsx(o,{variant:"body2",fontSize:"15px",children:e.jsx("br",{})})," ",e.jsx("br",{}),e.jsx(xe,{onClickAway:y,children:e.jsx(me,{PopperProps:{disablePortal:!0},onClose:x,open:c,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:r,arrow:!0,placement:"left",componentsProps:{tooltip:{sx:{marginLeft:"70px",transform:"translate3d(20px, 14.5px, 0px) !important",marginTop:"-10px"}}},children:e.jsx(ue,{type:"button",onClick:x,className:g.iIconExamSchedule})})})]})})})}function De(){const r=M(s=>s.AadharCardDetails.GetUserAadharCardDetails),c=M(s=>s.AadharCardDetails.SaveUserAadharCardDetails),h=ge(),[x,y]=t.useState(!0);localStorage.getItem("SchoolName");const g=t.useRef(null),[l,b]=t.useState(""),[O,N]=t.useState(!1),[$,J]=t.useState(""),[m,j]=t.useState(""),[p,E]=t.useState(""),[I,F]=t.useState(""),[H,Y]=t.useState(""),[z,A]=t.useState(!1),[V,P]=t.useState(!1),[w,U]=t.useState(""),[W,L]=t.useState(!1);t.useState(!1);const K=v(),D=["PDF","JPG","PNG","BMP","JPEG"],Q=3e6,[S,R]=t.useState(null),T=Number(localStorage.getItem("localSchoolId")),_=Number(sessionStorage.getItem("AcademicYearId")),B=Number(sessionStorage.getItem("Id")),q=sessionStorage.getItem("RoleId");let X=S!==null||r.AadharCardNo!==m;const Z=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;t.useEffect(()=>{h(pe(ee))},[c]),t.useEffect(()=>{j(r.AadharCardNo),E(r.NameOnAadharCard),F(r.MotherTounge),b(r.Email)},[r]),t.useEffect(()=>{c.Message!==void 0&&(fe.success(c.Message,{toastId:"success1"}),h(je()),R(null))},[c]);const ee={aiUserId:B,aiSchoolId:T,aiAcademicYrId:_},se={aiUserId:B,asSchoolId:T,asAadharCardNo:m,asAadharCardFileName:$,asUserRoleId:q,asAadharCardBase64String:H,asNameOnAadharCard:p,asMotherTongue:I,asEmailId:l},te=s=>{E(s),s.length>0&&P(!1)},ae=s=>{F(s)},re=s=>{b(s);const a=Z.test(s);a==!1&&s.length!==0&&N(!0),a==!0&&N(!1)},ie=s=>{const a=/^[0-9\b]+$/;s===""&&j(s),a.test(s)&&(s.length==0&&A(!0),s.length>0&&A(!1),s.length>=12&&L(!0),s.length<=12&&L(!1),j(s))},ne=async s=>{const a=s.target.files;let u="";for(let i=0;i<a.length;i++){const f=Se(a[i],D,Q);f==null?(J(a[i].name),R(s.target.files[i]),u=await le(a[i]),Y(u.slice(u.indexOf(",")+1)),U("")):(U(f),g.current.value=null)}},le=s=>new Promise((a,u)=>{const i=new FileReader;i.readAsDataURL(s),i.onload=()=>{a(i.result)},i.onerror=f=>{u(f)}}),oe=()=>{let s=r.AadharCardFileName.split("/"),a=s.length;a>0&&s[a-1],m.length===0&&A(!0),p.length===0?P(!0):m.length!==0&&p.length!==0&&h(Ce(se))};return e.jsxs(d,{sx:{px:2},children:[e.jsx(ye,{heading:"Update Profile",subheading:""}),e.jsx(Ae,{in:x,style:{transformOrigin:"0 0 1"},...x?{timeout:1500}:{},children:e.jsxs(Ne,{children:[e.jsxs(n,{container:!0,children:[e.jsx(n,{item:!0,xs:4,children:e.jsxs(o,{children:[" ",e.jsx("b",{children:"Name :"})," "]})}),e.jsx(n,{item:!0,xs:8,children:e.jsx(o,{children:r.Name})}),e.jsx(n,{item:!0,xs:4,children:e.jsxs(o,{children:[" ",e.jsx("b",{children:"Aadhaar Number : "})," "]})}),e.jsxs(n,{item:!0,xs:8,children:[e.jsx("input",{type:"text",value:m,onChange:s=>{ie(s.target.value)},maxLength:12}),e.jsx(C,{Error:z?"Please enter Aadhar Card Number.":" "}),e.jsx(C,{Error:W?"Number should not exceed 12 digit.":" "})]}),e.jsx(n,{item:!0,xs:4,children:e.jsxs(o,{children:[" ",e.jsx("b",{children:"Name Present On Aadhaar Card : "})]})}),e.jsxs(n,{item:!0,xs:8,mt:1,children:[e.jsx("input",{type:"text",value:p,onChange:s=>te(s.target.value)}),e.jsx(C,{Error:V?"Please enter Aadhar Card Name.":" "})]}),e.jsx(n,{item:!0,xs:4,children:e.jsxs(o,{sx:{mt:"5px"},children:[e.jsx("b",{children:"Email Id : "})," "]})}),e.jsxs(n,{item:!0,xs:8,children:[e.jsx("input",{type:"text",value:l,onChange:s=>{re(s.target.value)}}),O?e.jsx(d,{sx:{my:1},children:e.jsx(k,{Error:"Please enter valid email address"})}):null]}),e.jsx(n,{item:!0,xs:4,children:e.jsx(o,{sx:{mt:"5px"},children:e.jsx("b",{children:"Mother Tongue : "})})}),e.jsx(n,{item:!0,xs:8,children:e.jsx("input",{type:"text",value:I,onChange:s=>ae(s.target.value)})})]}),e.jsx(d,{sx:{my:"10px",textAlign:"center"},children:r.AadharCardFileName==="/RITeSchool/DOWNLOADS/Aadhar Cards/"?e.jsx("img",{style:{height:"150px",width:"150px"},src:"/imges/Adhar.png",alt:"adhar"}):e.jsx(e.Fragment,{children:S?e.jsx("img",{src:URL.createObjectURL(S),width:"150",height:"150",style:{border:"1px solid gray",padding:"1px"}}):e.jsx("img",{src:localStorage.getItem("SiteURL")+r.AadharCardFileName,width:"150",height:"150",style:{border:"1px solid gray",padding:"1px"}})})}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsx("input",{ref:g,type:"file",onChange:ne,style:{width:"200px"}})}),e.jsx(d,{className:K.iIconSupport,children:e.jsx(G,{Note:"Supports only "+D.join(", ")+" files types up to 3 MB"})}),w&&e.jsx(k,{Error:w}),e.jsx(be,{onClick:oe,fullWidth:!0,color:"primary",children:"Submit"})]})})]})}export{De as default};
