import{V as tt,W as et,j as e,A as at,j9 as ot,ag as nt,r as o,c as s,pD as st,B as i,F as rt,H as M,I as j,J as C,bv as F,G as k,T as Y}from"./index-d5YOjbb6.js";import{C as lt}from"./CardCalenderList-PUCKr_bi.js";import{Q as ct}from"./QuestionMark-C2Y4lgD8.js";import{C as dt}from"./Card-BrM9kpJu.js";import{C as it}from"./CardContent-CKN_wOTn.js";import"./DotLegendAttandaceCalender-DZhh8Pmk.js";import"./CardStyle-B9qFmFtz.js";import"./DotLegendStyled-B7Xptujc.js";var u={},ut=et;Object.defineProperty(u,"__esModule",{value:!0});var w=u.default=void 0,ht=ut(tt()),St=e,Dt=(0,ht.default)((0,St.jsx)("path",{d:"M17 10.43V2H7v8.43c0 .35.18.68.49.86l4.18 2.51-.99 2.34-3.41.29 2.59 2.24L9.07 22 12 20.23 14.93 22l-.78-3.33 2.59-2.24-3.41-.29-.99-2.34 4.18-2.51c.3-.18.48-.5.48-.86zm-4 1.8-1 .6-1-.6V3h2v9.23z"}),"MilitaryTech");w=u.default=Dt;const kt=()=>{var b;const _=at(),H=ot(),h=nt(),{StudentName:gt,StudentRollNo:mt,SchoolWiseStudentId:pt,YearWiseStudentId:N,StandardDivision:It,SchoolWiseStandardDivisionId:ft,StandardId:W,DivisionId:P}=h.state||{};console.log("⛑️LOcation StudentDetailsAttendance",h.state);const $=Number(localStorage.getItem("localSchoolId")),O=Number(sessionStorage.getItem("AcademicYearId"));Number(localStorage.getItem("UserId"));const[R,S]=o.useState([]),[V,xt]=o.useState(null),[L,D]=o.useState(new Date),l=t=>{if(!(t instanceof Date)||isNaN(t.getTime()))throw new Error("Invalid date provided");const a={month:"short",year:"numeric"};return t.toLocaleDateString("en-US",a)},[n,g]=o.useState(l(L)),E={Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},B=t=>{const a=t.split(" ")[0];return E[a]},[m,p]=o.useState(n?(b=B(n))==null?void 0:b.toString():void 0),[yt,I]=o.useState(new Date().getFullYear()),z=t=>{const[a,Z]=t.split("/");return`${Z}-${a.padStart(2,"0")}-01`},J=[{Id:1,Header:"Sun"},{Id:2,Header:"Mon"},{Id:3,Header:"Tue"},{Id:4,Header:"Wed"},{Id:5,Header:"Thu"},{Id:6,Header:"Fri"},{Id:7,Header:"Sat"}],c=s(t=>t.StudentDetails.ISStudentAttendanceCalender),f=s(t=>t.StudentDetails.ISPresentDays),x=s(t=>t.StudentDetails.ISTotalAttendanceDays),y=s(t=>t.StudentDetails.ISTotalWorkingDays),T=s(t=>t.StudentDetails.ISTotalDaysOfMonth);console.log("🎈StudentAttendanceCalender",c),console.log("🎈ISPresentDays",f),console.log("🎈ISTotalAttendanceDays",x),console.log("🎈ISTotalWorkingDays",y),console.log("🎈ISTotalDaysOfMonth",T);const r=(t,a)=>t.length>0?t[0][a]:0;r(y,"Total_Working_Days");const v=r(T,"Total_Days_OfMonth"),d=r(f,"Present_Days"),A=r(x,"Total_Attendance_Days"),q=A-d,G=[{label:"School working days",value:`${d} out of ${v}`},{label:"Total present days",value:`${d} out of ${A}`},{label:"Total absent days",value:`${q} out of ${v}`}];o.useEffect(()=>{S(c)},[c]);const Q={asSchoolId:$,asAcademicYearId:O,asStandardId:W,asDivisionId:P,asMonth:Number(m),asYear:new Date(z(n)).getFullYear(),asStudentId:N};o.useEffect(()=>{H(st(Q))},[m]);const U=t=>{S(t)},K=()=>{const t=new Date("01 "+n);t.setMonth(t.getMonth()-1),t.getMonth()===11&&t.setFullYear(t.getFullYear());const a=l(t);D(t),p(`${t.getMonth()+1}`),I(t.getFullYear()),g(a)},X=()=>{const t=new Date("01 "+n);t.setMonth(t.getMonth()+1),t.getMonth()===0&&t.setFullYear(t.getFullYear());const a=l(t);D(t),p(`${t.getMonth()+1}`),I(t.getFullYear()),g(a)};return e.jsxs(i,{px:2,children:[e.jsx(rt,{navLinks:[{title:"Student Details",path:"/RITeSchool/Teacher/StudentDetailsBaseScreen"},{title:"Attendance",path:"/RITeSchool/Teacher/StudentDetailsAttendance"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Your attendance for the current month with summary. You can change the month by clicking on month link on the top corners of the calender.",children:e.jsx(j,{sx:{color:"white",backgroundColor:C[500],"&:hover":{backgroundColor:C[600]}},children:e.jsx(ct,{})})}),e.jsx(M,{title:"Attendance Toppers",children:e.jsx(j,{sx:{color:"white",backgroundColor:F[500],"&:hover":{backgroundColor:F[600]}},onClick:()=>_("/RITeSchool/Teacher/AttendanceTopperspage",{state:{fromInternal:!0}}),children:e.jsx(w,{})})})]})}),e.jsx(i,{children:e.jsx(k,{container:!0,spacing:2,children:G.map((t,a)=>e.jsx(k,{item:!0,xs:12,sm:4,children:e.jsx(dt,{sx:{backgroundColor:"white",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",padding:0,textAlign:"center"},children:e.jsxs(it,{children:[e.jsx(Y,{sx:{fontSize:14,fontWeight:"bold",color:"#38548A"},children:t.label}),e.jsx(Y,{sx:{fontSize:16,fontWeight:"bold"},children:t.value})]})})},a))})}),e.jsx(i,{sx:{pl:0,pt:1},children:e.jsx(lt,{ItemList:R,ClickItem:U,handlePrevMonth:K,handleNextMonth:X,formattedDate:n,DefaultValue:V,ArrayList:J})})]})};export{kt as default};
