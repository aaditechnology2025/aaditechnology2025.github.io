import{j as s,T as v,ai as te,B as ae,aj as oe,ak as le,al as L,am as l,an as re,ab as ie,az as ne,u as R,A as E,r as a,w as ce,x as de,E as ue,c as x,jk as me,jn as he,jo as j,t as S,jp as xe,jq as be,p as ke,bR as Ie,q as y,I as pe,du as fe,a2 as je,a3 as ge,a5 as Se,a7 as we,a8 as U,jr as He,js as Te,m as z}from"./index-d5YOjbb6.js";import{d as De}from"./Delete-CrUR97S5.js";import{B as ye}from"./ButtonStyle-DaPKUawX.js";import{L as N}from"./Link-CIF-2ERy.js";const Ce=({ItemList:b,HeaderArray:n,clickDelete:o,clickEdit:k,clickAttachment:m,clickVisibilityIcon:c,clickpublish:d,clickView:r})=>s.jsxs("div",{children:[s.jsx(v,{variant:"h4",my:1,children:"Assigned homework for selected subject :"}),s.jsx(te,{component:ae,sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:s.jsxs(oe,{"aria-label":"simple table",children:[s.jsx(le,{children:s.jsx(L,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:n.map((t,h)=>s.jsx(l,{sx:{textTransform:"capitalize",color:u=>u.palette.common.white},children:s.jsx("b",{children:t.Header})},h))})}),s.jsx(re,{children:b.map((t,h)=>s.jsxs(L,{children:[s.jsx(l,{sx:{textTransform:"capitalize"},children:t.Text1}),s.jsx(l,{sx:{textTransform:"capitalize"},children:s.jsx(N,{href:"",onClick:()=>r(t.Id),children:t.Text2})}),s.jsx(l,{sx:{textTransform:"capitalize"},children:t.Text3}),s.jsx(l,{sx:{textTransform:"capitalize"},children:t.Text4}),s.jsx(l,{sx:{textTransform:"capitalize"},children:s.jsx(N,{href:"",onClick:()=>m(t.Text5),children:t.Text5})}),s.jsx(l,{sx:{textTransform:"capitalize"},align:"center",children:t.Text6==0?null:s.jsx(ie,{style:{color:"black"},onClick:()=>c(t.Id)})}),s.jsx(l,{sx:{textTransform:"capitalize"},children:s.jsx(ye,{onClick:()=>{d(t.Id)},children:t.Text7=="False"?"PUBLISH":"  UNPUBLISH"})}),s.jsx(l,{sx:{textTransform:"capitalize"},align:"center",children:t.Text7=="False"?s.jsx(ne,{style:{color:"black "},onClick:()=>k(t.Id)}):null}),s.jsx(l,{sx:{textTransform:"capitalize"},align:"center",children:t.Text7=="False"?s.jsx(De,{style:{color:"black "},onClick:()=>o(t.Id)}):null})]},h))})]})})]}),ze=({selectedSubjectId:b,clickEdit1:n})=>{const o=R(),k=E(),[m,c]=a.useState("0"),[d,r]=a.useState(""),[t,h]=a.useState("");a.useState(""),a.useState(""),a.useState(""),a.useState("");const u=Number(localStorage.getItem("localSchoolId")),I=Number(sessionStorage.getItem("AcademicYearId")),F=Number(sessionStorage.getItem("StandardDivisionId")),V=localStorage.getItem("Id"),G=sessionStorage.getItem("TeacherId");let{Id:g}=ce();g=de(g);const{showAlert:W,closeAlert:C}=a.useContext(ue),O=[{Id:1,Header:"Subject 	"},{Id:2,Header:" 	Title"},{Id:3,Header:"Assigned Date"},{Id:4,Header:" 	Complete By Date"},{Id:5,Header:" Attachment"},{Id:6,Header:"View"},{Id:7,Header:"Publish/Unpublish"},{Id:8,Header:"Edit"},{Id:9,Header:"Delete"}],Y=[{Id:"1",Name:"All",Value:"All"},{Id:"2",Name:"Assigned Date",Value:"AssignedDate"},{Id:"3",Name:"Complete By Date",Value:"CompleteByDate"}],p=x(e=>e.HomeworkSubjectList.SubjectListForTeacher),w=x(e=>e.HomeworkSubjectList.PublishUnPublishHomework);x(e=>e.HomeworkSubjectList.GetAllHomeworkDocuments);const H=x(e=>e.HomeworkSubjectList.DeleteHomework);x(e=>e.HomeworkSubjectList.GetHomeworkDetail);const f={asSchoolId:u,asAcademicYearId:I,asStandardDivisionId:F,asHomeWorkStatus:m,asHomeworkTitle:t,asAssignedDate:d},_={asSchoolId:u,asHomeworkId:Number(g),asAcademicyearId:I};a.useEffect(()=>{const e={asSchoolId:u,asAcademicyearId:I,asHomeworkId:Number(g)};o(me(e))},[]),a.useEffect(()=>{o(he(_))},[]),a.useEffect(()=>{const e=new Date().toISOString().split("T")[0];r(e),o(j(f))},[]);const $=e=>{n(e)};a.useState(!0);const[P,T]=a.useState(!1),[M,A]=a.useState(),q=e=>{let i=!0;return p.map(D=>{if(D.Id.toString()==e.toString())return i=D.Text7=="false",i}),i},B=e=>{let i=q(e);i==!1?(T(!0),A(e)):(T(!1),o(He({asSchoolId:u,asAcademicYearId:I,asHomeworkId:e,asReason:"",asUpdatedById:G,asIsPublish:i,asIsSMSSent:!0})))};a.useEffect(()=>{w!=""&&(S.success(w),o(xe()),o(j(f)))},[w]);const J=e=>{const i={asSchoolId:u,asAcademicYearId:I,asHomeworkId:e,asUpdatedById:Number(V)};W({title:"Please Confirm",message:"Are You Sure you want to delete The List? ",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{C()},onConfirm:()=>{o(Te(i)),C()}})};a.useEffect(()=>{H!=""&&(S.success(H),o(be()),o(j(f)))},[H]);const K=e=>{c(e),r(e),o(j(f))},Q=e=>{h(e)},X=e=>{typeof e=="string"&&e.trim()!==""&&(r(e),h(e)),p&&p.length===0&&S.success("No Records Found"),o(j(f))},Z=e=>{k("/RITeSchool/Teacher/HomeworkDocuments/"+z(e),{state:{fromInternal:!0}})},ee=e=>{e!==""&&window.open(localStorage.getItem("SiteURL")+"/RITeSchool/DOWNLOADS/Homework/"+e)},se=e=>{k("/RITeSchool/Teacher/ViewHomework/"+z(e),{state:{fromInternal:!0}})};return p.filter(e=>e.id===b),s.jsxs(s.Fragment,{children:[s.jsxs(ke,{direction:"row",alignItems:"center",justifyContent:"flex-end",gap:2,pb:1,children:[s.jsx(Ie,{sx:{minWidth:"250px"},ItemList:Y,onChange:K,defaultValue:m,label:"Select Homework Status",size:"small"}),s.jsx(y,{size:"small",sx:{with:"250px"},InputLabelProps:{shrink:!0},label:"Date",inputProps:{type:"date"},value:d,onChange:e=>{r(e.target.value)}}),s.jsx(y,{size:"small",sx:{with:"250px"},label:"Title",value:t,onChange:e=>{Q(e.target.value)}}),s.jsx(pe,{onClick:X,sx:{background:e=>e.palette.primary.main,color:"white"},children:s.jsx(fe,{})})]}),s.jsx(Ce,{ItemList:p,clickView:se,clickDelete:J,clickEdit:$,clickVisibilityIcon:Z,clickpublish:B,HeaderArray:O,clickAttachment:ee}),P&&s.jsx(Pe,{open:P,setOpen:T,publishId:M,setPublishId:A,clickPublishUnpublish:B})]})},Pe=({open:b,setOpen:n,publishId:o,setPublishId:k,clickPublishUnpublish:m})=>{R(),E();const[c,d]=a.useState("");Number(localStorage.getItem("localSchoolId")),Number(sessionStorage.getItem("AcademicYearId")),sessionStorage.getItem("TeacherId"),x(t=>t.AddHomework.PublishUnPublishHomework);const r=()=>{c!==""?(m(o,c),n(!1),d("")):S.error("Please provide a reason for unpublishing.")};return s.jsxs(je,{open:b,onClose:()=>{n(!1)},fullWidth:!0,maxWidth:"sm",children:[s.jsx(ge,{sx:{backgroundColor:t=>t.palette.primary.main,py:1}}),s.jsxs(Se,{dividers:!0,sx:{px:4},children:[s.jsx(v,{variant:"h4",sx:{mb:1},children:"Unpublish Reason"}),s.jsx(y,{size:"small",multiline:!0,rows:3,value:c,onChange:t=>{d(t.target.value)},sx:{width:"100%"}})]}),s.jsxs(we,{sx:{py:2,px:3},children:[s.jsx(U,{onClick:()=>{n(!1)},color:"error",children:"Cancel"}),s.jsx(U,{onClick:r,variant:"contained",children:"Confirm"})]})]})};export{ze as default};
