import{r as o,j as e,B as g,T as x,ai as ee,c8 as re,aj as f,an as A,al as j,am as n}from"./index-d5YOjbb6.js";const se=({stdFinalResult:d,key:D,IsTotalConsiderForProgressReport:h,ToppersCount:S,isAllStdSelect:_,showMarksRow:w=!1})=>{var T,k,N,G,$,I,W,M,V;const[a,z]=o.useState([]),[m,P]=o.useState([]),[R,E]=o.useState([]),[B,F]=o.useState([]),[u,Y]=o.useState([]),[c,X]=o.useState([]),[H,L]=o.useState([]),[q,J]=o.useState(),[y,K]=o.useState();o.useEffect(()=>{c&&K(c.some(r=>["1","2","3"].includes(r.rank)))},[c]),o.useEffect(()=>{d&&Q(d)},[d]),o.useEffect(()=>{if(m){const r=m.filter(s=>s.Total_Consideration==="N");L(r)}},[m]),o.useEffect(()=>{},[h,q]);const Q=r=>{var C;const s={data:r};let l=s.data.listStudentDetail.map((t,b)=>({Id:t.YearWise_Student_Id,Text1:t.Student_Name,Text2:t.Roll_No,Text3:t.Standard_Name,Text4:t.Division_Name,Text5:t.Academic_Year,Text6:t.School_Name,Text7:t.School_Orgn_Name,ShowOnlyGrades:t.ShowOnlyGrades,IsFailCriteriaNotApplicable:t.IsFailCriteriaNotApplicable}));z(l);let p=[];s.data.listSubjectDetails.map((t,b)=>{p.push({Id:t.Subject_Id,Name:t.Subject_Name,Value:t.Subject_Id,IsAbsent:t.IsAbsent,Total_Consideration:t.Total_Consideration})}),P(p);let i=[{Id:"0",Name:"Marks",Value:"0",IsAbsent:"0"}];s.data.listSubjectDetails.map((t,b)=>{const v=t.Marks_Scored.includes(".0")?parseFloat(t.Marks_Scored):t.Marks_Scored;i.push({Id:t.Subject_Id,Name:`${v} / ${t.Subject_Total_Marks}`,Value:t.Subject_Id,IsAbsent:t.IsAbsent})}),E(i);let O=[{Id:"0",Name:"Subject Grade",Value:"0",IsAbsent:"0"}];s.data.listSubjectDetails.map((t,b)=>{O.push({Id:t.Subject_Id,Name:t.Grade,Value:t.Subject_Id,IsAbsent:t.IsAbsent})}),F(O);let U=s.data.listMarksDetails.map((t,b)=>({TotalMarks:`${t.Total_Marks_Scored.includes(".0")?parseFloat(t.Total_Marks_Scored):t.Total_Marks_Scored} / ${t.Subjects_Total_Marks}`,GradeName:t.Grade_Name,Percentage:t.Percentage,Grade_id:t.Grade_id,Result:t.Result.trim()?t.Result.trim():"-",rank:t.rank.trim()?t.rank.trim():"-"})),Z=s.data.listParcentageDetails.map((t,b)=>({TotalMarks:t.Range,Grade:t.Grade,Remarks:t.Remarks,GradeConfId:t.Marks_Grades_Configuration_Detail_ID}));Y(Z),X(U),J(((C=a[0])==null?void 0:C.ShowOnlyGrades.trim())==="true")};return e.jsx(e.Fragment,{children:((T=d==null?void 0:d.listMarksDetails)==null?void 0:T.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(g,{sx:{mt:2,background:"white",border:"1px solid black"},children:e.jsxs(g,{children:[a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h4",textAlign:"center",color:"primary",mt:1,mb:1,sx:{fontSize:{xs:"16px",sm:"18px",md:"20px",lg:"22px"}},children:a[0].Text7}),e.jsx("hr",{}),e.jsx(x,{variant:"h3",textAlign:"center",color:"black",mb:1,sx:{fontSize:{xs:"14px",sm:"16px",md:"18px",lg:"20px"}},children:a[0].Text6}),e.jsx("hr",{}),e.jsx(x,{variant:"h4",textAlign:"center",color:"black",pb:1,sx:{fontSize:{xs:"12px",sm:"14px",md:"16px",lg:"18px"}},children:"Final Result"})]}),e.jsx(ee,{component:re,sx:{maxWidth:"100%",overflowX:"auto"},children:e.jsx(f,{children:e.jsx(A,{children:a.map((r,s)=>e.jsxs(j,{sx:{bgcolor:"#38548A",display:"flex",flexWrap:"nowrap"},children:[e.jsx(n,{sx:{flex:"0 0 200px",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:e.jsxs("b",{children:[" Roll No : ",r.Text2]})}),e.jsxs(n,{sx:{flex:"0 0 500px",minWidth:"500px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:[" ",e.jsxs("b",{children:[" Name : ",r.Text1]})]}),e.jsx(n,{sx:{flex:"1 1 auto",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:e.jsxs("b",{children:[" Class : ",r.Text3," - ",r.Text4]})}),e.jsx(n,{sx:{flex:"1 1 auto",minWidth:"200px",textAlign:"center",whiteSpace:"nowrap",color:"white",fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:e.jsxs("b",{children:["Year : ",r.Text5]})})]},s))})})}),e.jsx(f,{children:e.jsx(A,{children:H.length>0&&e.jsx(e.Fragment,{children:e.jsx(j,{sx:{bgcolor:"white",p:2},children:e.jsxs(n,{sx:{pl:10,py:1},children:[e.jsx("b",{children:" Legend : "})," ",e.jsx("span",{style:{color:"red"},children:"*"}),"   Subject marks not considered in total marks. "]})})})})}),e.jsx(g,{sx:{overflowX:"auto",border:r=>`1px solid ${r.palette.grey[400]}`},children:e.jsx(f,{sx:{},children:e.jsxs(A,{children:[e.jsxs(j,{sx:{bgcolor:"#F0F0F0"},children:[e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`},children:e.jsx(x,{variant:"h4",textAlign:"center",color:"black",ml:2,children:"Subjects"})}),m.map((r,s)=>e.jsxs(n,{sx:{py:1,textAlign:"center",border:l=>`1px solid ${l.palette.grey[400]}`},children:[e.jsxs("b",{children:[r.Name,"  "]}),r.Total_Consideration==="N"&&e.jsx("span",{style:{color:"red"},children:"*"})]},r.Subject_Id)),h==="True"&&((k=a[0])==null?void 0:k.ShowOnlyGrades.trim())!=="true"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Total"}),e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"%"})]}),h==="True"&&e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Grade"}),a.some(r=>(r==null?void 0:r.IsFailCriteriaNotApplicable)==="N")&&e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Result"}),S!==0&&y&&e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[400]}`,fontWeight:"bold",textAlign:"center"},children:"Rank"})]}),(w||!w&&((N=a[0])==null?void 0:N.ShowOnlyGrades.trim())!=="true")&&e.jsx(j,{children:e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[R.map((r,s)=>e.jsx(n,{sx:{py:1,border:l=>`1px solid ${l.palette.grey[300]}`,textAlign:"center"},children:r!=null&&r.Name?r.IsAbsent==="1"?"-":r.Name:"-"},s)),((G=a[0])==null?void 0:G.ShowOnlyGrades.trim())==="true"&&e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,textAlign:"center"},children:"-"})]}),(($=a[0])==null?void 0:$.ShowOnlyGrades.trim())!=="true"&&h==="True"&&c.map((r,s)=>{var l;if(s===0){const p=((l=u==null?void 0:u.find(i=>i.GradeConfId===r.Grade_id))==null?void 0:l.Remarks)||"";return e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{py:1,border:i=>`1px solid ${i.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:r.TotalMarks}),e.jsxs(n,{sx:{py:1,border:i=>`1px solid ${i.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:[r.Percentage,"%"]}),e.jsx(n,{sx:{py:1,border:i=>`1px solid ${i.palette.grey[300]}`,textAlign:"center"},children:e.jsxs(x,{variant:"body2",children:[e.jsx(x,{component:"span",fontWeight:"bold",children:r.GradeName}),p&&` (${p})`]})})]})}return null}),a.some(r=>r.IsFailCriteriaNotApplicable==="N")&&c.map((r,s)=>s===0?e.jsx(n,{sx:{py:1,border:l=>`1px solid ${l.palette.grey[300]}`,textAlign:"center",fontWeight:"bold",color:`${r.Result.trim()=="Pass"?"green":r.Result.trim()=="Fail"?"red":"inherit"}`},children:r.Result.trim()?r.Result.trim():"-"},s):null),S!==0&&y&&c.map((r,s)=>e.jsx(n,{sx:{color:"green",textAlign:"center",fontWeight:"bold"},children:r.rank.trim()?r.rank.trim():"-"},s))]})}),e.jsxs(j,{children:[B.map((r,s)=>e.jsxs(n,{sx:{py:1,border:l=>`1px solid ${l.palette.grey[300]}`,textAlign:"center"},children:[" ",r.IsAbsent==="1"?"-":r.Name]},s)),((I=a[0])==null?void 0:I.ShowOnlyGrades.trim())!=="true"&&h==="True"&&e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"}),e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"}),e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,fontWeight:"bold",textAlign:"center"},children:"-"})]}),((W=a[0])==null?void 0:W.ShowOnlyGrades.trim())==="true"&&h==="True"&&e.jsxs(e.Fragment,{children:[c.map((r,s)=>{var l;if(s===0){const p=((l=u.find(i=>i.GradeConfId===r.Grade_id))==null?void 0:l.Remarks)||"";return e.jsx(n,{sx:{py:1,border:i=>`1px solid ${i.palette.grey[300]}`,textAlign:"center"},children:e.jsxs(x,{variant:"body2",children:[e.jsx(x,{component:"span",fontWeight:"bold",children:r.GradeName}),p&&` (${p})`]})})}return null}),a.some(r=>r.IsFailCriteriaNotApplicable==="N")&&c.map((r,s)=>s===0?e.jsx(n,{sx:{py:1,border:l=>`1px solid ${l.palette.grey[300]}`,textAlign:"center",fontWeight:"bold",color:`${r.Result.trim()=="Pass"?"green":r.Result.trim()=="Fail"?"red":"inherit"}`},children:r.Result.trim()?r.Result.trim():"-"},s):null)]}),S!==0&&y&&e.jsx(n,{sx:{py:1,border:r=>`1px solid ${r.palette.grey[300]}`,textAlign:"center",fontWeight:"bold"},children:"-"})]})]})})})]})},D),_&&e.jsx(g,{sx:{width:"100%",my:4,borderTop:"2px dotted black",borderSpacing:"60px"}})]}):e.jsxs(e.Fragment,{children:[e.jsxs(x,{variant:"body1",fontWeight:"bold",sx:{backgroundColor:"#324b84",color:"white",padding:"8px 16px",mt:4,textAlign:"center"},children:["Result not generated for this student : ",(M=d==null?void 0:d.listStudentDetail[0])==null?void 0:M.Roll_No," - ",(V=d==null?void 0:d.listStudentDetail[0])==null?void 0:V.Student_Name]}),_&&e.jsx(g,{sx:{width:"100%",my:4,borderTop:"2px dotted black",borderSpacing:"60px"}})]})})};export{se as V};
