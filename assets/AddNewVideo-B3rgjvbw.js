import{V as Ae,W as Ee,j as e,B as n,G as o,q as U,aJ as b,a8 as H,bv as ke,aj as we,ak as Ue,al as K,am as g,an as De,I as k,as as re,H as w,u as Re,r,c as p,dp as Le,A as Te,w as Ge,x as Ne,aF as Z,t as Me,p2 as _e,oV as We,p3 as Fe,p4 as Oe,F as Pe,J as ee,L as v,M as Be,N as Ye,O as He,T as qe,Q as Xe,R as se,ce as B,bQ as Y,a9 as ze,p as Qe,p5 as Je}from"./index-d5YOjbb6.js";import{d as te}from"./Save-Ckr0NoeK.js";import{S as $e}from"./SelectListHierarchy-2EYf6pPL.js";import{Q as Ke}from"./QuestionMark-C2Y4lgD8.js";import{F as Ze}from"./FormGroup-XtcIGgvX.js";var q={},es=Ee;Object.defineProperty(q,"__esModule",{value:!0});var oe=q.default=void 0,ss=es(Ae()),ts=e,rs=(0,ss.default)((0,ts.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");oe=q.default=rs;const os=({TitleError:i,handleDelete:l,UrlSourceError:d,handleAddVideo:c,setVideoUrl:x,setTitle:D,videoList:C,title:V,videoUrl:y})=>e.jsxs(n,{sx:{pt:2},children:[e.jsxs(o,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(o,{item:!0,xs:12,sm:6,md:4,children:[e.jsx(U,{label:e.jsxs("span",{children:["Video URL",e.jsx("span",{style:{color:"red"},children:" *"})]}),variant:"outlined",fullWidth:!0,value:y,onChange:u=>x(u.target.value.slice(0,50))}),e.jsx(n,{children:e.jsx(b,{Error:d})})]}),e.jsxs(o,{item:!0,xs:12,sm:6,md:6,children:[e.jsx(U,{label:e.jsxs("span",{children:["Title",e.jsx("span",{style:{color:"red"},children:" *"})]}),variant:"outlined",fullWidth:!0,value:V,onChange:u=>D(u.target.value.slice(0,100))}),e.jsx(n,{children:e.jsx(b,{Error:i})})]}),e.jsx(o,{item:!0,xs:12,sm:6,md:2,children:e.jsx(H,{onClick:c,sx:{mt:1,color:"#38548A","&:hover":{color:"#38548A",backgroundColor:ke[100]}},children:"Add Videos"})})]}),C.length>0&&e.jsxs(we,{sx:{mt:3,border:1,borderColor:"grey.300"},children:[e.jsx(Ue,{children:e.jsxs(K,{children:[e.jsx(g,{children:e.jsx("strong",{children:"Video URL"})}),e.jsx(g,{children:e.jsx("strong",{children:"Title"})}),e.jsx(g,{children:e.jsx("strong",{children:"Cancel"})})]})}),e.jsx(De,{children:C.map((u,S)=>e.jsxs(K,{children:[e.jsx(g,{children:u.url}),e.jsx(g,{children:u.title}),e.jsx(g,{children:e.jsx(k,{onClick:()=>l(S),sx:{color:"#38548A	","&:hover":{color:"red",backgroundColor:re[100]}},children:e.jsx(w,{title:"Cancel",children:e.jsx(oe,{})})})})]},S))})]})]}),us=()=>{const i=Re(),[l,d]=r.useState([]),[c,x]=r.useState(""),[D,C]=r.useState(!1),[V,y]=r.useState([]);r.useState(null);const[u,S]=r.useState("YouTube"),[R,I]=r.useState(""),[le,L]=r.useState(""),[ae,f]=r.useState(""),[ie,T]=r.useState(""),[ne,G]=r.useState(""),[de,N]=r.useState(""),[ce,M]=r.useState(0),[_,A]=r.useState(""),[E,X]=r.useState([]),m=Number(localStorage.getItem("localSchoolId")),ue=Number(localStorage.getItem("UserId")),z=Number(sessionStorage.getItem("AcademicYearId")),he=p(s=>s.VideoNew.ISGetVideoDetails),Q=p(s=>s.ContactGroup.IGetUserRole),J=p(s=>s.Holidays.AllClassesAndDivisionss),xe=p(s=>s.Holidays.AllClassesAndDivisionss1),W=p(s=>s.PhotoGalllary.IInsertVideoGallaryMsg),j=p(s=>s.VideoNew.ISEditVideo),me={asSchoolId:m};r.useEffect(()=>{i(Le(me))},[]),Te();let{Video_Id:a}=Ge();a=Ne(a);const je={asSchoolId:m,asAcademicYearId:z,associatedStandard:""};r.useEffect(()=>{i(Z(je))},[]);const ge={asSchoolId:m,asSortExp:"ORDER BY Update_Date desc",asStartIndex:0,asPageSize:20,asIsFromExternalWebsite:0,asVideoNameFilter:""},F=String((()=>{let s=[];return V.map(t=>{t.IsActive&&s.push(t.Id)}),s.toString()})());r.useEffect(()=>{y(J)},[J]);const $=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),pe=()=>{let s='<ArrayOfSaveVideoDetails xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">';return E.forEach(t=>{s+="<SaveVideoDetails><VideoId>0</VideoId><Comment>"+$(t.title)+"</Comment><VideoURL>"+$(t.url)+"</VideoURL></SaveVideoDetails>"}),s+="</ArrayOfSaveVideoDetails>",s},O=async()=>{let s=!0;if(R.trim()||(L("Video name should not be blank."),s=!1),(!Array.isArray(l)||!l.length||l.every(h=>h===""))&&(T("At least one user role should be selected for video gallery."),s=!1),(!c||typeof c!="string"||!c.trim())&&(f("At least one video URL should be set."),s=!1),console.log(l,"pkplp"),F.trim()||(N("At least one class should be selected for video gallery."),s=!1),!s)return;const t={asSchoolId:m,asVideoId:Number(a||0),asVideoName:R,asVideoDetails:pe(),asStartDate:"2025-01-01 00:00:00",asEndDate:"2025-01-01 00:00:00",asUserRoleIds:l.toString(),asStandardDivIds:l.toString()==="3"?F:"",asSubjectId:0,asShowOnExternalWebsite:ce.toString(),asInsertedById:ue,asAddMoreSubjects:"0",asOldSubjectId:0,asId:0,asUrlSourceId:1};i(Je(t)),d([]),S("YouTube"),I(""),L(""),f(""),N(""),T(""),M(0),x(""),A("")};r.useEffect(()=>{W!==""&&(Me.success(W),i(_e()),i(We(ge)))},[l,F,W,he,a]);const Se=s=>{const t=s.target.checked;C(t),d(t?Q.map(h=>h.Value):[])},fe=s=>{const t=s.target.value;d(h=>h.includes(t)?h.filter(P=>P!==t):[...h,t])},ve=s=>{y(s)},be=s=>{I(s)},Ce=()=>{if(!c.trim()){f("At least one video URL should be set.");return}if(!_.trim()){G("Video title should not be blank if you set video URL for row(s) : 1.");return}X([...E,{url:c,title:_}]),x(""),A(""),G(""),f("")},Ve=s=>{const{checked:t}=s.target;M(t?1:0)},ye=()=>{d([]),S("YouTube"),I(""),L(""),f(""),N(""),T(""),M(0),x(""),A(""),G("")},Ie=s=>{const t=E.filter((h,P)=>P!==s);X(t)};return r.useEffect(()=>{if(a!=null){const s={asSchool_Id:Number(m),asVideoId:Number(a),asSubjectId:0,asUrlSourceId:1};i(Fe(s))}else i(Oe())},[]),r.useEffect(()=>{if(a!=null&&j.length>0&&j[0]!=null){const t=j[0];I(t.VideoName),x(t.Video_Url),d(t.StandardDivIds)}const s={asSchoolId:m,asAcademicYearId:z,associatedStandard:a==null||j.length==0?[]:j[0].AssociatedStandard};i(Z(s))},[j]),e.jsxs(n,{px:2,children:[e.jsx(Pe,{navLinks:[{title:"Photo/Video Gallery",path:"/RITeSchool/Teacher/PhotoVideoGalleryBaseScreen"},a?{title:"Update Gallery",path:"/RITeSchool/Teacher/EditGallery"}:{title:"Add Video Gallery",path:"/RITeSchool/Teacher/AddNewVideo"}],rightActions:e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Create new video galleries or add videos to existing gallery. You can also view all gallery videos by clicking on view.",children:e.jsx(k,{sx:{color:"white",backgroundColor:ee[500],"&:hover":{backgroundColor:ee[600]}},children:e.jsx(Ke,{})})}),a?e.jsx(e.Fragment,{children:e.jsx(w,{title:"Update",children:e.jsx(k,{sx:{color:"white",backgroundColor:v[500],"&:hover":{backgroundColor:v[600]}},onClick:O,children:e.jsx(te,{})})})}):e.jsx(w,{title:"Save",children:e.jsx(k,{sx:{color:"white",backgroundColor:v[500],"&:hover":{backgroundColor:v[600]}},onClick:O,children:e.jsx(te,{})})})]})}),e.jsx(n,{sx:{backgroundColor:"white",mb:1},children:e.jsxs(Be,{defaultExpanded:!0,children:[e.jsx(Ye,{expandIcon:e.jsx(He,{}),"aria-controls":"panel1-content",id:"panel1-header",children:e.jsx(qe,{style:{fontWeight:"bold",fontSize:"20px"},children:"Important Notes"})}),e.jsxs(Xe,{sx:{gap:.1,display:"flex",flexDirection:"column"},children:[e.jsxs(se,{variant:"filled",severity:"info",sx:{mb:1,mt:"0.1px"},children:["Video should be from ",e.jsx("strong",{children:"www.youtube.com"}),", URL Example: http://www.youtube.com/v/bAUT_Pux73w."]}),e.jsx(se,{variant:"filled",severity:"info",children:"When you edit any gallery, changes made to the gallery name, dates, user roles, and classes will be applied to all subjects of the respective gallery."})]})]})}),e.jsxs(n,{padding:2,sx:{backgroundColor:"white"},children:[e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{item:!0,xs:12,sm:4,children:[e.jsx(U,{fullWidth:!0,variant:"outlined",label:e.jsxs("span",{children:["Video Name ",e.jsx("span",{style:{color:"red"},children:" *"})]}),onChange:s=>{be(s.target.value.slice(0,50))},value:R})," ",e.jsx(n,{children:e.jsx(b,{Error:le})})]}),e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsx(U,{fullWidth:!0,label:"URL Source",value:u,InputProps:{readOnly:!0}})}),e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsx(B,{onChange:Ve,control:e.jsx(Y,{}),label:"Show On External Website? "})})]}),e.jsx(n,{children:e.jsx(os,{handleAddVideo:Ce,setVideoUrl:x,setTitle:A,videoList:E,title:_,videoUrl:c,TitleError:ne,UrlSourceError:ae,handleDelete:Ie})}),e.jsxs(n,{sx:{backgroundColor:"lightgrey",paddingLeft:1,mt:1},children:[e.jsx(B,{sx:{mr:0},control:e.jsx(Y,{checked:D,onChange:Se}),label:""}),e.jsx("strong",{children:" Associated User Roles  "})]}),e.jsx(o,{container:!0,spacing:2,alignItems:"center",pl:1,children:e.jsxs(o,{item:!0,xs:12,children:[e.jsx(Ze,{row:!0,children:e.jsx(ze,{component:"fieldset",children:e.jsx(o,{container:!0,direction:"row",alignItems:"center",spacing:2,children:Q.map((s,t)=>e.jsx(o,{item:!0,children:e.jsx(B,{control:e.jsx(Y,{value:s.Value,checked:l.includes(s.Value),onChange:fe}),label:s.Name})},t))})})}),e.jsx(b,{Error:ie})]})}),l.includes("3")&&e.jsxs(o,{item:!0,xs:12,md:12,mt:1,children:[e.jsx($e,{ItemList:V,ParentList:xe,ClickChild:ve}),e.jsx(b,{Error:de})]}),e.jsx(o,{item:!0,xs:12,md:12,mt:2,children:e.jsxs(Qe,{direction:"row",gap:2,alignItems:"center",children:[e.jsx(H,{onClick:ye,sx:{color:"red",":hover":{backgroundColor:re[100]}},children:"Clear"}),e.jsx(H,{onClick:O,sx:{color:"green",":hover":{backgroundColor:v[100]}},children:"Save"})]})})]})]})};export{us as default};
