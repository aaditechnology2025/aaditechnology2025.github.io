import{u as X,c as T,r as y,eX as q,eY as Q,j as e,B as h,F as U,H as Z,I as ee,J as G,K as te,T as m,n as se,ai as ne,c8 as re,aj as ae,ak as ie,al as v,am as i,an as oe}from"./index-d5YOjbb6.js";import{D as le}from"./Dropdown-Bt3qBn1S.js";const he=()=>{const k=X(),f=T(t=>t.StandardAndExamList.SelectStandard),S=T(t=>t.StandardAndExamList.ExamData),L=T(t=>t.StandardAndExamList.VeiwAllData),_=T(t=>t.StandardAndExamList.Loading),M=sessionStorage.getItem("AcademicYearId"),w=localStorage.getItem("localSchoolId"),N=sessionStorage.getItem("RoleId"),K=sessionStorage.getItem("StandardId"),[o,I]=y.useState("0"),[D,$]=y.useState(null),R=t=>{const s=t.split("-"),n=s[0],l=s[1],d=s[2],p=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(l,10)-1];return`${n} ${p} ${d}`},V={asAcademicYearId:M,asSchoolId:w},P={asSchoolId:w,asAcademicYearId:M,asStandardId:o};y.useEffect(()=>{k(q(V)),N==="3"&&I(K)},[]);const W=t=>{I(t),$(0)};y.useEffect(()=>{o!==""&&k(Q(P))},[o]),y.useEffect(()=>{f.length>0&&(I(f[0].id),$(0))},[f]);const x={};L.forEach(t=>{x[t.Standard_Name]||(x[t.Standard_Name]={}),x[t.Standard_Name][t.text1]=t.Instructions||"-"});const F=(t,s)=>{const n=g=>{const[p,j]=g.split(":");let A="AM",c=parseInt(p,10);return c>=12&&(A="PM",c-=12),c===0&&(c=12),`${c}:${j} ${A}`},l=n(t),d=n(s);return`${l} - ${d}`},Y=(t,s)=>{const n=u=>{const[C,J]=u.split(" ");let[b,O]=C.split(":").map(Number);return J==="PM"&&b!==12?b+=12:J==="AM"&&b===12&&(b=0),{hours:b,minutes:O}},{hours:l,minutes:d}=n(t),{hours:g,minutes:p}=n(s),j=new Date(0,0,0,l,d,0);let c=new Date(0,0,0,g,p,0).getTime()-j.getTime();c<0&&(c+=24*60*60*1e3);const r=Math.floor(c/(1e3*60*60)),a=Math.floor(c%(1e3*60*60)/(1e3*60));return r>0&&a>0?`${r}h ${a}m`:r>0?`${r}h`:a>0?`${a}m`:"-"},E=w==="122"?["Nursery","Junior KG","Senior KG",...Array.from({length:10},(t,s)=>`${s+1}`),"11 Sci","11 Com","12 Sci","12 Com","11 Art","12 Art"]:["Nursery","Junior KG","Senior KG",...Array.from({length:10},(t,s)=>`${s+1}`)],B=(t=>{const s={};return t.forEach(n=>{const l=`${n.text3}-${n.startTime}-${n.endTime}-${n.text1}`;s[l]||(s[l]=[]),s[l].push(n)}),s})(L),z=t=>{$(D===t?null:t)},H=()=>{let t="";return f.map(s=>{s.Value==o&&(t=s.Name)}),t};return e.jsxs(h,{sx:{px:2},children:[e.jsx(U,{navLinks:[{title:"Exam Schedule",path:""}],rightActions:e.jsxs(h,{sx:{display:"flex",alignItems:"center"},children:[N!=="3"&&e.jsxs(h,{sx:{width:"130px",mr:2,marginRight:"5px"},children:[" ",e.jsx(le,{Array:f,handleChange:W,label:"Select Standard",size:"small",variant:"outlined",defaultValue:o})]}),e.jsx(Z,{title:"Displays standardwise exam schedule.",children:e.jsx(ee,{sx:{color:"white",backgroundColor:G[500],"&:hover":{backgroundColor:G[600]}},children:e.jsx(te,{})})})]})}),S&&S.length>0&&S.map((t,s)=>e.jsxs(h,{children:[e.jsx(h,{sx:{mt:1,cursor:"pointer",backgroundColor:"whitesmoke",padding:"2px",border:"1px solid White",borderRadius:"2px",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},onClick:()=>z(s),children:e.jsxs(h,{sx:{display:"flex",alignItems:"center",pl:.5},children:[e.jsx(h,{sx:{width:"10px",height:"10px",p:.5,border:"1px solid black",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(m,{sx:{color:"Black",fontSize:"16px",fontWeight:"bold",p:1},children:D===s?"-":"+"})}),e.jsxs(h,{sx:{display:"flex"},children:[e.jsx(m,{variant:"h6",sx:{color:"red",ml:1},children:e.jsx("b",{children:t.Text1})}),e.jsx(m,{variant:"h6",sx:{ml:1},children:e.jsxs("b",{children:[R(t.Text3)," To ",R(t.Text4)]})})]})]})}),D===s&&e.jsx(h,{sx:{background:"white",p:1},children:_?e.jsx(se,{}):e.jsx(ne,{component:re,sx:{width:"100%",overflowX:"auto"},children:e.jsxs(ae,{sx:{minWidth:640},children:[e.jsx(ie,{sx:{background:"#19bed4","& > *":{color:"white",fontWeight:"bold",textAlign:"center"}},children:e.jsxs(v,{sx:{"& > *":{borderBottom:"1px solid white",textAlign:"center",color:"white"},"& > :not(:first-of-type)":{borderLeft:"1px solid white",color:"white",textAlign:"center"}},children:[e.jsx(i,{sx:{width:"14%",textAlign:"left",pl:1,color:"white"},children:"Date"}),e.jsx(i,{sx:{width:"10%",textAlign:"center"},children:"Time"}),e.jsx(i,{sx:{width:"6%",textAlign:"center"},children:"Duration"}),o==="0"&&E.map((n,l)=>e.jsx(i,{sx:{textAlign:"center",p:1},children:n},l)),o!=="0"&&e.jsx(i,{sx:{width:"8%",textAlign:"center"},children:"Subject"}),o!=="0"&&e.jsx(i,{sx:{width:"20%",textAlign:"center"},children:"Description"})]})}),e.jsxs(oe,{children:[Object.keys(B).map((n,l)=>{const d=B[n].filter(r=>r.text1===t.Text2),[g,p,j,A]=n.split("-"),c=new Set;return d.length>0?e.jsxs(v,{sx:{"& > *":{textAlign:"center",pl:0,pb:0,py:1}},children:[e.jsx(i,{sx:{textAlign:"left",pl:1,py:1},children:c.has(g)?"":g}),e.jsx(i,{sx:{textAlign:"center",py:1},children:F(p,j)||"-"}),e.jsx(i,{sx:{textAlign:"center",py:1},children:Y(p,j)||"-"}),o==="0"?E.map(r=>e.jsxs(i,{sx:{textAlign:"center",whiteSpace:"pre-line",py:1},children:[d.filter(a=>a.Standard_Name===r).map((a,u,C)=>e.jsxs("p",{children:[e.jsx("div",{children:a.header||"-"}),u!==C.length-1&&e.jsx("div",{style:{borderTop:"1px solid grey",margin:"5px "}})]},u)),d.filter(a=>a.Standard_Name===r).length===0&&"-"]},`${r}-${l}`)):e.jsxs(e.Fragment,{children:[e.jsx(i,{sx:{textAlign:"center",py:1},children:d.filter(r=>r.Standard_Name).map((r,a,u)=>e.jsxs("p",{children:[e.jsx("div",{children:r.header||"-"}),a!==u.length-1&&e.jsx("div",{style:{borderTop:"1px solid grey",margin:"4px 0"}})]},a))}),e.jsx(i,{sx:{textAlign:"center",py:1},children:d.length>0?d.map((r,a,u)=>e.jsxs("p",{children:[e.jsx("div",{children:r.Description||"-"}),a!==u.length-1&&e.jsx("div",{style:{borderTop:"1px solid grey",margin:"4px 0"}})]},a)):"-"})]})]},l):null}),e.jsxs(v,{children:[o==="0"&&e.jsx(i,{colSpan:3,sx:{py:1},children:e.jsx("b",{children:"Instructions : "})}),o!=="0"&&e.jsx(i,{colSpan:3,sx:{py:1},children:e.jsxs(m,{sx:{color:"darkblue"},children:[e.jsx("b",{children:"Instructions : "}),x[H()]==null?"":x[H()][t.Text2]]})}),o==="0"?E.map(n=>e.jsx(i,{sx:{textAlign:"center",py:1},children:e.jsx(m,{sx:{color:"blue"},children:x[n]&&x[n][t.Text2]||"-"})},n)):e.jsx(i,{colSpan:3,sx:{textAlign:"center",py:1},children:e.jsx(m,{sx:{color:"blue"},children:x[o]&&x[o][t.Text2]})})]})]})]})})})]},s)),!_&&S.length===0&&e.jsx(m,{variant:"body1",sx:{textAlign:"center",marginTop:4,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No exam has been scheduled."})})]})};export{he as default};
