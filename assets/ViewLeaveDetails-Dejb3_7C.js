import{cj as $,j as e,u as De,A as ge,w as Se,x as f,r as a,c as u,n2 as fe,n3 as Ee,n4 as Ie,n5 as Le,t as ye,n6 as Te,H as E,I,J as C,K as be,B as L,as as F,L as V,F as Re,c8 as we,M as ke,N as Ae,O as Be,T as Ne,Q as Ce,R as U,G as n,q as P,aJ as s,bR as Fe,iU as z,aB as G,n7 as O}from"./index-d5YOjbb6.js";import{D as W}from"./DatepickerLeave-CGcZeCDA.js";const Ve=$(e.jsx("path",{fillRule:"evenodd",d:"m9 17 3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m4.47 8.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"}),"HowToReg"),Ue=$(e.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4zm3 2v2h6v-2h-6zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z"}),"PersonRemove"),Ke=()=>{const l=De(),H=ge();let{LeaveDId:o,selectCategory:x,getSenderName:m}=Se();o=f(o),x=f(x),m=f(m);const i=Number(localStorage.getItem("localSchoolId")),y=sessionStorage.getItem("AcademicYearId"),h=Number(localStorage.getItem("UserId")),M=sessionStorage.getItem("StudentName"),[c,Y]=a.useState(Number(localStorage.getItem("UserId"))),[Pe,q]=a.useState(c==null?"0":M),[j,T]=a.useState(new Date().toISOString().split("T")[0]),[D,b]=a.useState(new Date().toISOString().split("T")[0]),[J,R]=a.useState(""),[_,w]=a.useState("0"),[K,ze]=a.useState(" "),[Q,k]=a.useState(""),[p,A]=a.useState(""),[X,v]=a.useState(""),[Z,Ge]=a.useState(""),[ee,Oe]=a.useState(""),[te,We]=a.useState(""),[ae,$e]=a.useState(""),[re,He]=a.useState(""),[se,Me]=a.useState(""),[oe,Ye]=a.useState(""),[ne,qe]=a.useState(""),r=u(t=>t.LeaveDetails.ViewLeaveDetails),le=u(t=>t.AddLeaveDetails.LeaveTypeDropdown),B=u(t=>t.AddLeaveDetails.LeaveBalanceNote);u(t=>t.AddLeaveDetails.SubmitLeave),u(t=>t.AddLeaveDetails.StartDateEndDateValidations);const g=u(t=>t.AddLeaveDetails.ApproveorReject),ie=[" If leave start date or end date is across the month, then the system will update leave for only the days that are in the upcoming salary publish month."];a.useEffect(()=>{if(o!=null&&r.length>0&&r[0]!=null){const t=r[0];q(t.Text1),T(t.Text2),b(t.Text3),R(t.Text4),w(t.LeaveType),k(t.Text5),Y(t.UserId),A(t.Text6)}},[r]),a.useEffect(()=>{if(o){const t={asSchoolId:i,asUserId:c,asId:Number(o)};l(fe(t))}},[o]);const ce=B.map((t,d)=>i===122?d===0||d===B.length-1?`${t.Text1} (${t.Text2})`:`${t.Text1} (Unpaid)`:`${t.Text1} (${t.Text2})`).join(", "),de={asSchoolId:i};a.useEffect(()=>{l(Ee(de))},[]),a.useEffect(()=>{c&&l(Ie({asSchoolId:i,asUserId:c}))},[c]),a.useEffect(()=>{l(Le({asSchoolId:i,aasStartDate:j,aasEndDate:D,asUserId:c,asLeaveConfigId:0}))},[j,D]);const ue=t=>{T(G(t))},pe=t=>{b(G(t))},xe=t=>{w(t)};a.useEffect(()=>{g!==""&&(ye.success(g),l(Te()),H("/RITeSchool/Teacher/LeaveDetails",{state:{fromInternal:!0}}))},[g]);const he=()=>{let t=!1;if(p===""?(v("Remark should not blank."),t=!0):v(""),!t){const d={asId:0,asUserLeaveDetailsId:Number(o),asReportingUserId:h,asRemark:p,asstatusId:3,asSchoolId:i,asAcademicYearId:Number(y),asInsertedById:h};l(O(d))}},ve=()=>{let t=!1;if(p===""?(v("Remark should not blank."),t=!0):v(""),!t){const d={asId:0,asUserLeaveDetailsId:Number(o),asReportingUserId:h,asRemark:p,asstatusId:4,asSchoolId:i,asAcademicYearId:Number(y),asInsertedById:h};l(O(d))}},S=()=>{let t=!1;return(x==="2"||x==="3")&&(t=!0),t},N=()=>{let t=!1;return r.length>0&&r[0].LeaveId!=null&&r[0].LeaveId!=0&&(t=!0),t},me=()=>r.length>0&&r[0].IsFinalApprover==="True"?"Final Approve":"Approve",je=e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Here you can apply for, approve, or reject leave requests.",children:e.jsx(I,{sx:{bgcolor:C[500],color:"white","&:hover":{bgcolor:C[600]}},children:e.jsx(be,{})})}),e.jsx(L,{children:S()&&N&&e.jsx(e.Fragment,{children:e.jsx(E,{title:"Reject",children:e.jsx("span",{children:e.jsx(I,{disabled:r.length>0&&r[0].Text6!="",sx:{backgroundColor:F[500],color:"white","&:hover":{backgroundColor:F[600]}},onClick:ve,children:e.jsx(Ue,{})})})})})}),S()&&N&&e.jsx(e.Fragment,{children:e.jsx(E,{title:me(),children:e.jsx("span",{children:e.jsx(I,{disabled:r.length>0&&r[0].Text6!="",sx:{backgroundColor:V[500],color:"white","&:hover":{backgroundColor:V[600]}},onClick:he,children:e.jsx(Ve,{})})})})})]});return e.jsxs(L,{sx:{px:2},children:[e.jsx(Re,{navLinks:[{title:"Leave Details",path:"/RITeSchool/Teacher/LeaveDetails"},o?{title:"Apply / Approve / Reject Leave page",path:"/RITeSchool/Teacher/ViewLeaveDetails/"}:{title:"Apply / Approve / Reject Leave page",path:"/RITeSchool/Teacher/ViewLeaveDetails"}],rightActions:je}),e.jsx(we,{sx:{mb:"10px"},children:e.jsxs(ke,{defaultExpanded:!0,children:[e.jsx(Ae,{expandIcon:e.jsx(Be,{}),"aria-controls":"panel1-content",id:"panel1-header",children:e.jsx(Ne,{style:{fontWeight:"bold",fontSize:"20px"},children:"Important Notes"})}),e.jsxs(Ce,{sx:{gap:.1,display:"flex",flexDirection:"column"},children:[e.jsxs(U,{variant:"filled",severity:"info",sx:{mb:1,mt:"0.1px"},children:[e.jsx("b",{children:"Note 1 :"})," ",e.jsx(e.Fragment,{children:"Leave balance "}),ce]}),e.jsxs(U,{variant:"filled",severity:"info",children:[e.jsx("b",{children:"Note 2 : "})," ",ie]})]})]})}),e.jsx(L,{sx:{p:2,background:"white"},children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(P,{fullWidth:!0,InputLabelProps:{shrink:!0},label:e.jsx(e.Fragment,{children:"Staff Name"}),sx:{bgcolor:"#F0F0F0"},InputProps:{readOnly:!0},value:m})}),e.jsxs(n,{item:!0,xs:12,md:4,children:[e.jsx(W,{DateValue:j,onDateChange:ue,label:"Start Date",size:"medium",disabled:!0}),e.jsx(s,{Error:te}),e.jsx(s,{Error:se}),e.jsx(s,{Error:Z})]}),e.jsxs(n,{item:!0,xs:12,md:4,children:[e.jsx(W,{DateValue:D,onDateChange:pe,label:"End Date",size:"medium",disabled:!0}),e.jsx(s,{Error:oe}),e.jsx(s,{Error:ae}),e.jsx(s,{Error:re}),e.jsx(s,{Error:ee})]}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(P,{label:e.jsxs(e.Fragment,{children:["Total Days ",e.jsx("span",{style:{color:"red"},children:"*"})]}),value:J,InputProps:{readOnly:!0},onChange:t=>R(t.target.value),fullWidth:!0,disabled:!0})}),e.jsxs(n,{item:!0,xs:12,md:4,children:[e.jsx(Fe,{sx:{minWidth:"20vw"},ItemList:le,onChange:xe,label:"Leave Type",defaultValue:_,mandatory:!0,disabled:!0}),e.jsx(s,{Error:K})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(z,{label:e.jsxs(e.Fragment,{children:["Description ",e.jsx("span",{style:{color:"red"},children:"*"})]}),multiline:!0,rows:3,value:Q,onChange:t=>k(t.target.value),fullWidth:!0,InputProps:{readOnly:!0}}),e.jsx(s,{Error:ne})]}),S()&&e.jsxs(n,{item:!0,xs:12,children:[e.jsx(z,{label:e.jsxs(e.Fragment,{children:["Remark ",e.jsx("span",{style:{color:"red"},children:"*"})]}),InputProps:{readOnly:r.length>0&&r[0].Text6!==""},multiline:!0,rows:3,value:p,onChange:t=>{A(t.target.value)},fullWidth:!0}),e.jsx(s,{Error:X})]})]})})]})};export{Ke as default};
