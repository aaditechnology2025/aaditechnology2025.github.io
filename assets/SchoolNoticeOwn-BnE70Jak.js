import{S as w,j as e,r,B as d,ai as y,aj as b,ak as k,al as p,am as a,an as C,I as T,h as E,u as U,c as g,i as O,k as P,l as N,m as f,F as W,n as _}from"./index-d5YOjbb6.js";import{B as H}from"./BackButton-BE5_8L9j.js";import{d as A}from"./FileDownloadOutlined-B-D7Fbww.js";import{d as V}from"./DoNotDisturbOn-SAoc4Fms.js";import{d as G}from"./RadioButtonUnchecked-DyWPxD5p.js";import{L as X}from"./List1-CMmC98bZ.js";import"./Attachment-DgcWq5kr.js";const F=({name:c,checked:i,value:l,onChange:t,IsAllDeactivated:x=!1,IsExamSubmitted:j=!1})=>{const m=()=>{t({name:c,value:l,checked:!i})};return w(),e.jsx(e.Fragment,{children:i?e.jsx(V,{sx:{color:"red"},onClick:m}):e.jsx(G,{sx:{color:"green"},onClick:m})})},Y=({itemList:c,downloadNotice:i,clickSingle:l})=>(r.useState(!0),e.jsx(e.Fragment,{children:e.jsx(d,{sx:{backgroundColor:"white",mb:2},children:e.jsx(y,{component:d,children:e.jsxs(b,{"aria-label":"simple table",sx:{py:1,border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(k,{children:e.jsxs(p,{sx:{background:t=>t.palette.secondary.main,py:1},children:[e.jsx(a,{sx:{color:"white",width:"480px"},children:"Checkbox"}),e.jsx(a,{sx:{color:"white"},children:"Notice Name"}),e.jsx(a,{sx:{color:"white",textAlign:"center",py:1},children:"Download"})]})}),e.jsx(C,{children:c.map((t,x)=>e.jsx(e.Fragment,{children:e.jsxs(p,{children:[e.jsx(a,{sx:{textTransform:"capitalize",py:.5,pl:3.5},children:e.jsx(F,{name:"",value:t.id,checked:t.isActive,onChange:l})}),e.jsx(a,{sx:{textTransform:"capitalize",py:.5},children:t.header}),e.jsx(a,{sx:{textTransform:"capitalize",py:.5,textAlign:"center",minWidth:"170px"},children:t.FileName?e.jsx(T,{onClick:()=>i(t.FileName,t.IsImageNotice),children:e.jsx(A,{})}):e.jsx("span",{children:"-"})})]})}))})]})})})})),q=({itemList:c,downloadNotice:i,clickSingle:l})=>(r.useState(!0),e.jsx(e.Fragment,{children:e.jsx(d,{sx:{backgroundColor:"white",mb:2},children:e.jsx(y,{component:d,children:e.jsxs(b,{"aria-label":"simple table",sx:{py:1,border:t=>`1px solid ${t.palette.grey[300]}`,overflow:"hidden"},children:[e.jsx(k,{children:e.jsxs(p,{sx:{background:t=>t.palette.secondary.main,py:1},children:[e.jsx(a,{sx:{color:"white",width:"480px"},children:"Checkbox"}),e.jsx(a,{sx:{color:"white",pl:3.5},children:"Notice Name"}),e.jsx(a,{sx:{color:"white",textAlign:"center",py:1},children:"Download"})]})}),e.jsx(C,{children:c.map((t,x)=>e.jsx(e.Fragment,{children:e.jsxs(p,{children:[e.jsx(a,{sx:{textTransform:"capitalize",py:.5,pl:3.5},children:e.jsx(F,{name:"",value:t.id,checked:t.isActive,onChange:l})}),e.jsx(a,{sx:{textTransform:"capitalize",py:.5,pl:3.5},children:t.header}),e.jsx(a,{sx:{textTransform:"capitalize",py:.5,textAlign:"center",minWidth:"125px"},children:t.FileName?e.jsx(T,{onClick:()=>i(t.FileName,t.IsImageNotice),children:e.jsx(A,{})}):e.jsx("span",{children:"-"})})]})}))})]})})})}));function se(){E(),w();const c=U(),i=g(o=>o.Schoolnotice.SchoolNoticeData),l=g(o=>o.SchoolNoticeBoard.AllActiveNotices),t=localStorage.getItem("localSchoolId"),x=sessionStorage.getItem("Id"),j=g(o=>o.Schoolnotice.Loading),m={asSchoolId:t,asNoticeId:0,asUserId:x},D={asSchoolId:t,asUserId:x};r.useEffect(()=>{sessionStorage.getItem("Id")!==null&&localStorage.setItem("url",window.location.pathname),c(O(m))},[]);const[L,J]=r.useState("");r.useEffect(()=>{c(P(D))},[]),l.filter((o,s)=>L==o.id?o.FileName:"");const v=i.map((o,s)=>{const n=o.Date,B=new Date(n).getDate(),R=new Date(n).toLocaleString("default",{month:"short"}),$=new Date(n).getFullYear(),z=`${B} ${R} ${$}`;return{id:s,header:N(o.Name),text1:z,text2:"",linkPath:"/Common/Viewschoolnotice/"+f(o.Id),FileName:o.FileName}}),[h,u]=r.useState([]);r.useEffect(()=>{let o=[];localStorage.getItem("ImportantNotices")!==null&&(o=localStorage.getItem("ImportantNotices").split(",")),u(l.filter(s=>!o.includes(s.Id)).map((s,n)=>({id:s.Id,header:N(s.Name),text2:"",linkPath:"/Common/Viewschoolnotice/"+f(s.Id),FileName:s.FileName,IsText:s.IsText,IsImageNotice:s.IsImageNotice,isActive:!1})))},[l]);const I=(o,s)=>{s?window.open(localStorage.getItem("SiteURL")+"RITeSchool/Images/"+o):window.open(localStorage.getItem("SiteURL")+"RITeSchool/DOWNLOADS/School Notices/"+o)},S=o=>{let s=[];localStorage.getItem("ImportantNotices")!==null&&(s=localStorage.getItem("ImportantNotices").split(",")),console.log(localStorage.getItem("ImportantNotices"),"ImportantNotices",s),o.checked?s.push(o.value):s=s.filter(n=>n!==o.value),localStorage.setItem("ImportantNotices",s.toString()),u(h.map(n=>n.id===o.value?{...n,isActive:o.checked}:n))};return e.jsxs(d,{sx:{px:2},children:[e.jsx(W,{navLinks:[{title:"School Notice",path:""}]}),e.jsxs(d,{sx:{background:"white",p:2},children:[l.length>0&&(t==="18"?h.length>0&&e.jsx(Y,{itemList:h,downloadNotice:I,clickSingle:S}):h.length>0&&e.jsx(q,{itemList:h,downloadNotice:I,clickSingle:S})),sessionStorage.getItem("Id")===null&&e.jsx(H,{FromRoute:"/schoolList"}),j?e.jsx(_,{}):e.jsx(e.Fragment,{children:e.jsx(X,{items:v})})]})]})}export{se as default};
