import{r as s,j as e,B as l,T as p,I as R,G as n,gP as De,A as Ie,w as Ae,x as U,u as be,c as g,hF as ve,cJ as Ee,hG as we,bX as Pe,b$ as Le,bY as Ce,bZ as ye,b_ as Me,a8 as $,m as Ne}from"./index-d5YOjbb6.js";import{d as Ye,a as ke}from"./ArrowRight-DTTKgIal.js";import{C as j}from"./Card-BrM9kpJu.js";import{D as I}from"./Dropdown-Bt3qBn1S.js";import{P as Be}from"./PageHeader-DqqjGq3-.js";import{I as Fe}from"./icon1-D1Tpz3V0.js";import{e as Ge}from"./CardStyle-B9qFmFtz.js";import{c as Te}from"./DotLegendStyled-B7Xptujc.js";import He from"./AddAnnualPlaner-Di_Jbkpa.js";import"./SingleFile-BT4Sw5XK.js";import"./CloudUpload-DJN1zp2n.js";import"./Errormessage-RPRSgLGN.js";import"./ButtonStyle-DaPKUawX.js";const Ve=({item:a,clickItem:r,DefaultValue:o,options:u=void 0})=>{s.useState(!1),s.useState([]);const c=h=>{a.IsClickable&&r(h)};return e.jsx("div",{children:e.jsxs(j,{component:l,py:1,sx:{height:"100px",width:"120px",cursor:"pointer",color:a.Value==o?"yellow":a.BackgroundColor,backgroundColor:"#BEDAE3"},onClick:()=>c(a.Value),style:{color:a.ForeColur},children:[e.jsx(p,{children:a.Name}),e.jsx("b",{children:e.jsx(l,{dangerouslySetInnerHTML:{__html:a.Text1}})})]})})},_e=({ItemList:a,ClickItem:r,ClickPreNext:o,formattedDate:u,DefaultValue:c,ArrayList:h=[]})=>{const m=x=>{let i;u.split(" ").length==2&&(i=new Date("1 "+u)),i=new Date(u),i.setMonth(i.getMonth()+x),o(De(i))};return e.jsxs(e.Fragment,{children:[e.jsx(l,{sx:{},children:e.jsxs(j,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#BEDAE3"},children:[e.jsx(R,{onClick:()=>m(-1),sx:{float:"left"},children:e.jsx(Ye,{})}),e.jsx(p,{sx:{fontWeight:"bold"},children:u}),e.jsx(R,{onClick:()=>m(1),sx:{float:"right"},children:e.jsx(ke,{})})]})}),e.jsxs(j,{component:l,p:2,mt:1.5,children:[e.jsx(n,{container:!0,columnSpacing:10,rowSpacing:1,children:h.map((x,i)=>e.jsx(e.Fragment,{children:e.jsx(n,{item:!0,xs:1.71,sx:{textAlign:"center"},children:e.jsx("b",{children:x.Header})},i)}))}),e.jsx("br",{}),e.jsx(n,{container:!0,columnSpacing:7,rowSpacing:1,children:a.map((x,i)=>e.jsx(n,{item:!0,lg:1.71,sx:{textAlign:"center"},children:e.jsx(Ve,{item:x,clickItem:()=>r(x.Value),DefaultValue:c})},i))})]})]})},k=({text:a,color:r})=>e.jsxs(l,{sx:{display:"flex"},children:[e.jsx(Te,{color:r}),e.jsxs(Ge,{children:[" ",a," "]}),e.jsx("br",{})]}),tt=()=>{const a=Ie();let{DateFrommon:r,DateFromyear:o}=Ae();r=U(r),o=U(o);const u=new Date(Number(o),Number(r)).getMonth(),c=be(),h=g(t=>t.AnnualPlanerBaseScreen.ISSelectStandardList),m=g(t=>t.AnnualPlanerBaseScreen.ISSelectDivisionList),x=g(t=>t.AnnualPlanerBaseScreen.ISSelectMonthList),i=g(t=>t.AnnualPlanerBaseScreen.ISSelectYearList),O=g(t=>t.AnnualPlanerBaseScreen.ISEventsDataList),W=g(t=>t.AnnualPlanerBaseScreen.IGetAssociatedStandardsP),B=g(t=>t.AddPlanner.getfile),J=new Date().getFullYear().toString(),X=(new Date().getMonth()+1).toString(),f=sessionStorage.getItem("AcademicYearId"),S=localStorage.getItem("localSchoolId"),F=sessionStorage.getItem("Id");sessionStorage.getItem("TeacherId"),sessionStorage.getItem("RoleId");const[w,P]=s.useState({selectedDate:null}),[Z,L]=s.useState(),[C,y]=s.useState(),[A,G]=s.useState(""),[b,T]=s.useState(""),[v,H]=s.useState(X),[E,V]=s.useState(J),[q,z]=s.useState("0"),K="These events may change due to unavoidable reasons without prior notice",Q=[{Id:1,Header:"Sun"},{Id:2,Header:"Mon"},{Id:3,Header:"Tue"},{Id:4,Header:"Wed"},{Id:5,Header:"Thu"},{Id:6,Header:"Fri"},{Id:7,Header:"Sat"}],ee=JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),te=()=>{let t="N";return ee.map(d=>{d.ScreenName==="Annual Planner"&&(t=d.IsFullAccess)}),t};function se(t){const d=t||new Date,M=new Date(d).toLocaleString("default",{month:"short"}),N=new Date(d).getMonth(),D=new Date(d).getFullYear(),Y=`${M} ${D}`;P({selectedDate:Y}),y(u),L(o),L(D),y(N+1)}s.useEffect(()=>{localStorage.setItem("url",window.location.pathname),se(),r!=null&&P({selectedDate:`${new Date(u+"/01/"+o).toLocaleString("default",{month:"short"})} ${o}`})},[]),s.useEffect(()=>{(r||o!=null)&&(y(r),L(o))},[r,o]),s.useEffect(()=>{C!==void 0&&c(ve(ae))},[C]),s.useEffect(()=>{c(Ee(ne))},[]);const ne={asSchoolId:Number(S),asAcademicYearId:Number(f)},ae={asMonth:C,asAcademicYearId:f,asSchoolId:S,asYear:Z,asUserId:F},re={asSchoolId:Number(S),asAcademicYearId:Number(f),asUserId:Number(F)},oe={asSchoolId:Number(S)},ce={asSchoolId:Number(S)},le={asSchoolId:Number(S),asAcademicYearId:Number(f),asStandardId:1062},ie={asSchoolId:Number(S),asAcademicYearId:Number(f),asMonthId:Number(v),asYear:Number(E),asStandardId:Number(A),asDivisionId:Number(b),asEventType:""},de={asSchoolId:18,asAcademicYearId:54};s.useEffect(()=>{c(we(de))},[]),s.useEffect(()=>{c(Pe(re))},[]),s.useEffect(()=>{c(Le(le))},[]),s.useEffect(()=>{c(Ce(oe))},[]),s.useEffect(()=>{c(ye(ce))},[]),s.useEffect(()=>{A!=""&&b!=""&&v!=""&&E!=""&&w!=""&&c(Me(ie))},[A,b,v,E,w]),s.useEffect(()=>{h.length>0&&m.length>0&&(G(h[0].Value),T(m[0].Value))},[h,m]);const ue=t=>{G(t)},he=t=>{z(t)},xe=t=>{T(t)},me=t=>{H(t)},Se=t=>{V(t)},ge=t=>{const d=t||new Date,M=new Date(d).toLocaleString("default",{month:"short"}),N=new Date(d).getMonth(),D=new Date(d).getFullYear(),Y=`${M} ${D}`;P({selectedDate:Y}),H(N.toString()),V(D.toString())},je=t=>{alert(t),a("/RITeSchool/Teacher/EventManegement/"+Ne(t),{state:{fromInternal:!0}})},pe=()=>{B!==""&&window.open(localStorage.getItem("SiteURL")+"/RITeSchool/DOWNLOADS/Event%20Planner/"+B[0].LinkUrl)},fe=t=>{a("/RITeSchool/common/EventOverview",{state:{fromInternal:!0}})},_=te()==="N"?0:null;return e.jsxs(l,{sx:{px:2},children:[e.jsx(Be,{heading:"Annual Planner",subheading:""}),e.jsx(l,{sx:{float:"right"},children:e.jsx(Fe,{Note:K})}),e.jsxs(n,{container:!0,spacing:12,children:[e.jsx(n,{item:!0,xs:2,children:e.jsxs(l,{sx:{display:"flex",gap:"20px"},children:[e.jsx(k,{color:"Holiday",text:"Holidays"}),e.jsx(k,{color:"Exam",text:"Exams"}),e.jsx(k,{color:"Events",text:"Events"})]})}),_?e.jsx(n,{item:!0,xs:2,children:e.jsx(He,{})}):e.jsx(n,{item:!0,xs:2,children:e.jsx($,{variant:"outlined",onClick:pe,children:"Annual Planner"})}),e.jsx(n,{item:!0,xs:2,children:e.jsx($,{variant:"outlined",onClick:fe,children:"Events Overview"})})]}),e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Std :"})})}),_?e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:W,handleChange:he,defaultValue:q})}):e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:h,handleChange:ue,defaultValue:A})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Div :"})})}),e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:m,handleChange:xe,defaultValue:b,label:"Select Division"})}),e.jsx(n,{item:!0,xs:1.2,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsxs(p,{component:l,p:.5,children:["Select Month :"," "]})})}),e.jsx(n,{item:!0,xs:1.8,children:e.jsx(I,{Array:x,handleChange:me,defaultValue:v,label:"Select Month"})}),e.jsx(n,{item:!0,xs:1,children:e.jsx(j,{sx:{backgroundColor:"#BEDAE3"},children:e.jsx(p,{component:l,p:.5,children:"Select Year :"})})}),e.jsx(n,{item:!0,xs:2,children:e.jsx(I,{Array:i,handleChange:Se,defaultValue:E,label:"Select Year"})})]}),e.jsx("br",{}),e.jsx(_e,{ItemList:O,ClickItem:je,ClickPreNext:ge,formattedDate:w.selectedDate,DefaultValue:!0,ArrayList:Q})]})};export{tt as default};
