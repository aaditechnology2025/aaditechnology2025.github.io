import{V as Me,W as Pe,j as e,r as n,B as b,bS as he,T as D,bt,I as B,H as R,as as Re,at as St,bN as _e,aB as Ct,gA as W,G as g,ae as Be,gB as jt,q as me,gC as At,gD as vt,gE as It,gF as Dt,h as yt,J as _,P as Ie,ce as kt,bQ as wt,u as Ye,A as We,c as w,b3 as Oe,a2 as Tt,a3 as Nt,K as Ve,bl as Lt,a5 as Ft,ai as Et,c8 as Mt,aj as Pt,ak as Rt,al as De,am as ye,an as _t,p as He,w as ke,S as Bt,E as Yt,x as we,ct as Te,gG as Wt,gH as ae,gI as Ot,gJ as Vt,gK as U,gL as re,t as Ne,gM as Ht,gN as Le,gO as zt,bv as E,bR as Gt,m as O,gP as xe,gQ as $t,L as Fe,gR as Jt,gS as Ut}from"./index-d5YOjbb6.js";import{d as qt}from"./Save-Ckr0NoeK.js";import{d as Qt}from"./ChevronRightTwoTone-BefBLSd_.js";import{D as q}from"./DotLegendAttandaceCalender-DZhh8Pmk.js";import{t as Xt,u as Kt}from"./CardStyle-B9qFmFtz.js";import{C as Zt}from"./CheckboxImg-DSBDgE-_.js";import{L as es}from"./ListHeaderCard3ColSel-CyrNazc1.js";import{T as ts}from"./TAttendanceCommonPageheader-Ba_1Sm6K.js";import"./DotLegendStyled-B7Xptujc.js";import"./Card-BrM9kpJu.js";import"./RadioButtonUnchecked-DyWPxD5p.js";import"./DoNotDisturbOn-SAoc4Fms.js";const ss={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},ns=ss;var ge={},as=Pe;Object.defineProperty(ge,"__esModule",{value:!0});var ze=ge.default=void 0,rs=as(Me()),os=e,is=(0,rs.default)((0,os.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");ze=ge.default=is;var pe={},ls=Pe;Object.defineProperty(pe,"__esModule",{value:!0});var Ge=pe.default=void 0,cs=ls(Me()),ds=e,us=(0,cs.default)((0,ds.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftTwoTone");Ge=pe.default=us;function Ee({item:s,clickItem:l,DefaultValue:u,options:r=void 0,assignedDate:x,color:C}){n.useState(!1);const h=a=>{s.IsClickable&&l(a)};return e.jsx("div",{children:e.jsxs(b,{sx:{height:"90px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",cursor:"pointer",backgroundColor:a=>{var d;return((d=s.Value)==null?void 0:d.replaceAll("-"," "))===x?(h(s.Value),he(a.palette.primary.main,.2)):C}},onClick:()=>h(s.Value),style:{color:s.ForeColur},children:[e.jsx(D,{children:s.Name}),e.jsx("b",{children:e.jsx(b,{dangerouslySetInnerHTML:{__html:s.Text1},sx:{fontSize:{xs:"9px",sm:"12px",md:"12px",lg:"13px"}}})})]})})}function xs({ItemList:s,ClickItem:l,formattedDate:u,DefaultValue:r,assignedDate:x,ArrayList:C=[],getAssignedDateStatus:h,ClickDeleteAttendance:a,clickNav:d,Standardid:T}){const m=s.map(c=>{const S=new Date(c.Value),i=new Date(u),I=i.getMonth(),y=i.getFullYear(),p=S.getMonth()===I&&S.getFullYear()===y;return{...c,isCurrentMonth:p}}),v=c=>{let S;u.split(" ").length===2?S=new Date("1 "+u):S=new Date(u);const i=S.getMonth()+c;c<0?S=new Date(S.getFullYear(),i,1):(S.setDate(1),S.setMonth(i));const I=new Date;S.getMonth()===I.getMonth()&&S.getFullYear()===I.getFullYear()&&(S=I),l(W(S))};let M=new Date(new Date(u).getFullYear(),new Date(u).getMonth(),1).getDay();const Y=n.useRef(null);return bt("sm"),e.jsxs(b,{p:2,children:[e.jsxs(b,{sx:{mt:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(b,{children:e.jsxs(D,{sx:{fontWeight:"normal !important",display:"flex",alignItems:"center",gap:1},variant:"h3",children:[e.jsxs("div",{style:{whiteSpace:"nowrap"},children:[e.jsx(B,{onClick:()=>v(-1),sx:{color:c=>c.palette.primary.main,backgroundColor:c=>he(c.palette.primary.main,.2),marginRight:"8px"},children:e.jsx(Ge,{})}),u," ",e.jsx(B,{onClick:()=>v(1),sx:{color:c=>c.palette.primary.main,backgroundColor:c=>he(c.palette.primary.main,.2),marginLeft:"8px"},children:e.jsx(Qt,{})})]}),e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",color:ns[500]}})]})}),e.jsxs(b,{sx:{display:"flex",alignItems:"center",gap:1},children:[h()=="Done"&&e.jsx(R,{title:"Delete",children:e.jsx(B,{sx:{color:"#223354","&:hover":{color:"red",backgroundColor:Re[100]}},onClick:()=>a(),children:e.jsx(St,{})})}),e.jsxs(B,{color:"primary",onClick:()=>{Y.current.showPicker()},children:[e.jsx(_e,{}),e.jsx("input",{ref:Y,style:{position:"absolute",visibility:"hidden"},type:"date",max:new Date().toISOString().split("T")[0],value:Ct(u),onChange:c=>{l(W(c.target.value))}})]}),"          "]})]}),e.jsx(g,{container:!0,sx:{mt:2},children:C.map((c,S)=>e.jsx(Be.Fragment,{children:e.jsx(g,{item:!0,xs:12/7,md:12/7,sx:{display:"flex",alignItems:"center",justifyContent:"center",py:1,border:i=>`1px solid ${i.palette.divider}`},children:e.jsxs(D,{sx:{textTransform:"capitalize"},children:[" ",e.jsx("b",{children:c.Header})]},S)})},S))}),e.jsxs(g,{container:!0,children:[e.jsx(g,{item:!0,md:12/7*M,xs:12/7*M,sx:{textAlign:"center",pt:0}}),m.map((c,S)=>{if(c.isCurrentMonth){let i;switch(jt(c.Text1)){case"Done":i="#00FF0020";break;case"Not Done":i="#9e9e9e20";break;case"Weekend":i="#FF000020";break;case"Holiday":i="#751b1b20";break;case"Outside Academic Year":i="#f0629220";break;default:i="#f0629220"}return e.jsx(g,{item:!0,xs:12/7,md:12/7,sx:{textAlign:"center",border:I=>`1px solid ${I.palette.divider}`,"&:hover":{backgroundColor:"rgba(128, 128, 128, 0.2)"}},children:e.jsx(Ee,{item:c,clickItem:()=>l(c.Value),DefaultValue:r,assignedDate:u,color:i})},S)}else return e.jsx(g,{item:!0,xs:12/7,md:12/7,sx:{textAlign:"center"},children:e.jsx(Ee,{item:{},clickItem:()=>l(),DefaultValue:"",assignedDate:"",color:void 0})})})]}),e.jsxs(g,{mt:2,item:!0,xs:12,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(q,{color:"primary",text:"Done "}),e.jsx(q,{color:"info",text:"Not Done"}),e.jsx(q,{color:"Holiday",text:"Holiday"}),e.jsx(q,{color:"Warning",text:"Weekend"}),e.jsx(q,{color:"Suceess",text:"Outside Academic Year"})]})]})}const hs=({name:s,textarray:l,validarray:u,changeText:r,getLabel:x,assignedDate:C})=>{const h="Absent Student "+s;let a="";const d=T=>{a="";let m=T.split(","),v=m[m.length-1];u.length===0?a="There is no "+s:v!==""?(Dt(v)||(a="Enter number only"),At(v,u)||(a="Invalid "+s)):m.length>1&&(m[m.length-2].length===0&&(a="Enter "+s),vt(m[m.length-2],m)||(a="Do not repeat "+s),It(m[m.length-2],u)||(a="Invalid "+s)),r(a===""?{text:T,getLabel:h}:{text:l,getLabel:a})};return e.jsx(b,{sx:{backgroundColor:"white",width:"100%"},children:e.jsx(me,{InputLabelProps:{shrink:!0},fullWidth:!0,value:l,error:x!==h,label:x,onChange:T=>d(T.target.value),InputProps:{readOnly:!0,sx:{height:"30px",padding:"0 0px","& .MuiOutlinedInput-root":{height:"30px","& fieldset":{top:0,height:"100%","& legend":{display:"none"}}},"& .MuiInputBase-input":{padding:"5px 14px",height:"20px",boxSizing:"border-box"}}},sx:{margin:"8px 0"}})})},ms=({Item:s,onChange:l,assignedDate:u})=>{s.joinDate;const r=s.joinDate.split(" ")[0].split("-");parseInt(r[0]),parseInt(r[1]),parseInt(r[2]);const x=s.joinDate.split(/[- :]/),C=new Date(x[2],x[1]-1,x[0],x[3],x[4],x[5]),h=new Date(u),a=C>h?"#e1bee7":"",d=C>h?"bold":"normal",T=yt();return s.text1==="49"&&s.text2==="Master Soham Bhagade"&&C>h,e.jsx(e.Fragment,{children:e.jsxs(b,{bgcolor:s.isActive?`${T.colors.gradients.selectedlistColor}`:`${T.colors.gradients.listColor}`,sx:{backgroundColor:a,display:"flex",alignItems:"center",justifyContent:"center",pb:"5px"},children:[e.jsx(g,{item:!0,xs:1,sx:{paddingLeft:"15px",display:"flex",alignItems:"center"},children:C>h?null:e.jsx(Zt,{name:s.text1,value:0,checked:s.isActive,onChange:l,IsExamSubmitted:s.IsExamSubmitted})}),e.jsx(g,{item:!0,xs:2.5,alignItems:"center",children:e.jsx(Xt,{children:e.jsx(D,{color:s.isError?"primary":"error",fontWeight:d,sx:{textAlign:"center"},children:s.text1})})}),e.jsx(g,{item:!0,xs:8.5,children:e.jsx(Kt,{children:e.jsx(D,{color:s.isError?"primary":"error",fontWeight:d,children:s.text2})})})]})})},gs=({Itemlist:s,refreshData:l,assignedDate:u,setIsDirty:r})=>{let x=s.filter(a=>!a.IsExamSubmitted).some(a=>a.isActive===!1)?s.filter(a=>!a.IsExamSubmitted).some(a=>a.isActive===!0)?2:0:1;const C=a=>{s=s.map(d=>({...d,isActive:d.IsExamSubmitted?!1:a})),l(s),r(!0)},h=a=>{s=s.map(d=>d.text1===a.name?{...d,isActive:a.checked}:d),l(s),r(!0)};return e.jsxs(b,{px:2,sx:{backgroundColor:"white",pb:2},children:[e.jsx(b,{sx:{height:"50px",backgroundColor:"white"},children:e.jsx(es,{Item:{text1:"Roll No.",text2:"Student Name",isActive:x},onChange:C})}),s.map((a,d)=>e.jsx(b,{sx:{border:`1px solid ${_[300]}`,backgroundColor:"white"},children:e.jsx(ms,{assignedDate:u,Item:a,onChange:h})},d))]})};$e.propTypes={Dataa:Ie.any,getAbsetNumber:Ie.any};function $e({Dataa:s,getAbsetNumber:l,assignedDate:u,sendmeassagestudent:r,handleCheckboxChange:x,setIsDirty:C}){const[h,a]=n.useState(""),[d,T]=n.useState("Absent Student Roll Number"),[m,v]=n.useState([]),[M,Y]=n.useState([]),c=i=>{let I=[],y=[];const p=new Date(u);i.forEach(j=>{const Q=j.joinDate.split(/[- :]/),o=new Date(Q[2],Q[1]-1,Q[0]);!j.isActive&&o<=p&&I.push(j.text1),o>p&&y.push(j.text1)}),a(I.join(",")),T("Absent Student Roll Number"),l(I.join(","),i),v(i),Y(y)};n.useEffect(()=>{c(s)},[s]);const S=i=>{a(i.text),T(i.getLabel),l(i.text);let I=i.text.split(",");v(m.map(y=>I.includes(y.text1)&&!y.IsExamSubmitted?{...y,isActive:!1}:{...y,isActive:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(b,{mr:2,children:e.jsxs(g,{container:!0,spacing:2,sx:{backgroundColor:"white",pb:1,m:0},children:[e.jsx(g,{item:!0,xs:12,sm:8,md:6,children:e.jsx(hs,{name:"Roll Number",textarray:h,validarray:m.map(i=>i.text1).filter(i=>!M.includes(i)),changeText:S,getLabel:d,assignedDate:u})}),e.jsx(g,{item:!0,xs:12,sm:4,md:6,sx:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:e.jsx(kt,{control:e.jsx(wt,{checked:r,onChange:i=>x(i.target.checked)}),label:"Send Message to Absent Student(s)"})})]})}),e.jsx(gs,{Itemlist:m,refreshData:c,assignedDate:u,setIsDirty:C})]})}const ps=({open:s,setOpen:l,ClickCloseDialogbox:u,Classname:r,Date:x,ClassId:C,saveResponseMessage:h})=>{const a=Ye();We();const[d,T]=n.useState(W(x)),[m,v]=n.useState(r),M=Number(localStorage.getItem("localSchoolId")),Y=Number(sessionStorage.getItem("AcademicYearId"));Number(localStorage.getItem("UserId"));const c=w(p=>p.AbsentStudentDetail.getlistAbsentStudentDetails),S=w(p=>p.AbsentStudent.IsGetSchoolSettings),i={asSchoolId:Number(M)};Number(M),Number(Y),Number(C),W(x),Number(S),n.useEffect(()=>{a(Oe(i))},[]);const I=[{id:"studentName",label:"Name",renderCell:p=>p.Text1}],y=()=>{l(!1)};return e.jsxs(Tt,{open:s,onClose:()=>l(!1),fullWidth:!0,maxWidth:"sm",PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsxs(Nt,{sx:{backgroundColor:"#324b84",position:"relative"},children:[e.jsx(R,{title:"Displays absent student details.",placement:"bottom-end",children:e.jsx(Ve,{sx:{color:"white",borderRadius:"10px",position:"absolute",top:"4px",right:"35px",cursor:"pointer","&:hover":{backgroundColor:_[600]}}})}),e.jsx(Lt,{onClick:y,sx:{color:"white",borderRadius:"7px",position:"absolute",top:"5px",right:"8px",cursor:"pointer","&:hover":{color:"red"}}})]}),e.jsx(D,{variant:"h3",sx:{pt:1,pl:2},children:"Absent Student Details"}),e.jsxs(Ft,{children:[e.jsxs(g,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(g,{item:!0,xs:12,sm:6,md:6,children:e.jsx(me,{sx:{minWidth:"15vw",bgcolor:"#F0F0F0","& .MuiInputBase-input":{cursor:"default"}},label:"Class Name",fullWidth:!0,size:"small",value:m,InputProps:{readOnly:!0}})}),e.jsx(g,{item:!0,xs:12,sm:6,md:6,children:e.jsx(me,{sx:{minWidth:"15vw",bgcolor:"#F0F0F0","& .MuiInputBase-input":{cursor:"default"}},label:"Date",fullWidth:!0,size:"small",value:d,InputProps:{readOnly:!0}})})]}),e.jsxs(b,{sx:{backgroundColor:p=>p.palette.info.main,color:p=>"#0A0A0A",padding:"10px 18px",boxShadow:"none",fontSize:"14px",mt:1},children:["Student(s) is absent for ",S," or more working days."]}),c&&c.length>0?e.jsxs(b,{mt:1,sx:{justifyContent:"center"},children:[e.jsx(D,{sx:{mt:1,mb:1},children:"Absent Student(s) :"}),e.jsx(Et,{component:Mt,children:e.jsxs(Pt,{"aria-label":"simple table",sx:{border:p=>`1px solid ${p.palette.divider}`,width:"100%",textAlign:"center"},children:[e.jsx(Rt,{children:e.jsx(De,{sx:{background:p=>p.palette.secondary.main,color:p=>p.palette.common.white},children:I.map((p,j)=>e.jsx(ye,{sx:{py:1,textTransform:"capitalize",color:"white",textAlign:"left",whiteSpace:"nowrap"},children:e.jsx("strong",{children:p.label})},p.id))})}),e.jsx(_t,{children:c.map(p=>e.jsx(Be.Fragment,{children:e.jsx(De,{children:I.map(j=>e.jsx(ye,{sx:{py:1,textAlign:"left"},children:j.renderCell(p)},j.id))})},p.Id))})]})})]}):e.jsx(b,{sx:{backgroundColor:"#D2FDFC"},children:e.jsx(D,{variant:"h6",align:"center",sx:{textAlign:"center",marginTop:1,backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:"No record found."})})]})]})},fs=({SummaryCountforAttendance:s,assignedDate:l})=>e.jsx(g,{container:!0,spacing:1,children:s.map((u,r)=>e.jsx(g,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(b,{sx:{background:x=>x.palette.common.white,p:{xs:1,sm:2},textAlign:"center"},children:[e.jsx(D,{variant:"h6",color:u.Color,sx:{marginBottom:0,fontSize:{xs:"16px",sm:"16px",md:"18px"},textTransform:"capitalize"},children:u.Name}),e.jsx(He,{direction:"row",gap:2,alignItems:"center",justifyContent:"space-between",children:e.jsx(g,{container:!0,spacing:1,children:u.Values.map((x,C)=>e.jsxs(g,{item:!0,xs:4,sm:4,children:[e.jsx(D,{variant:"subtitle2",sx:{fontSize:{xs:"12px",sm:"14px",md:"16px"}},children:x.Name}),e.jsx(b,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(D,{variant:"body1",textAlign:"center",sx:{fontSize:{xs:"14px",sm:"16px",md:"18px"}},children:x.Value})})]},C))})})]})}))}),Ps=()=>{ke();const[s,l]=n.useState(!1),u=[{Id:1,Header:"Sun"},{Id:2,Header:"Mon"},{Id:3,Header:"Tue"},{Id:4,Header:"Wed"},{Id:5,Header:"Thu"},{Id:6,Header:"Fri"},{Id:7,Header:"Sat"}],r=Ye(),x=We();Bt();const{showAlert:C,closeAlert:h}=n.useContext(Yt);let{SelectClasstecahernew:a,AssignedDate:d}=ke();a&&d&&(d=d?we(d):void 0,a=a?we(a):void 0);const T=sessionStorage.getItem("StandardDivisionId"),m=localStorage.getItem("localSchoolId"),v=sessionStorage.getItem("AcademicYearId");let[M,Y]=n.useState("0"),c=sessionStorage.getItem("IsClassTeacher");sessionStorage.getItem("StandardDivisionId");const S=sessionStorage.getItem("TeacherId");n.useState(!0),n.useState(!1);const[i,I]=n.useState(!1);n.useState(T);const[y,p]=n.useState(),[j,Q]=n.useState(""),[o,fe]=n.useState(d);n.useState(!1);const[X,K]=n.useState(!1),[bs,be]=n.useState("none"),[Ss,Je]=n.useState("");n.useState(new Date().toISOString());const[Ue,Cs]=n.useState(),[f,Z]=n.useState(a),[js,oe]=n.useState(""),[z,ie]=n.useState(""),[qe,Qe]=n.useState([]),Se=JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),le=w(t=>t.AbsentStudentDetail.getlistAbsentStudentDetails),ce=w(t=>t.AbsentStudent.IsGetSchoolSettings),ee=w(t=>t.StandardAttendance.stdlist),Xe=w(t=>t.AttendanceList.StudentList);w(t=>t.AttendanceList.StudentAbsent);const k=w(t=>t.AttendanceList.AttendanceStatus),te=w(t=>t.AttendanceList.SaveResponse);let Ke=w(t=>t.AttendanceList.AYStatus);const L=w(t=>t.AttendanceList.ISGetSummaryCountforAttendance),G=w(t=>t.AttendanceList.listAttendanceCalender),de=w(t=>t.AttendanceList.DeleteAttendance),N=w(t=>t.AttendanceList.ISClassTeacherList),se=w(t=>t.AttendanceList.GetAcademicDates),Ze=()=>{let t=G.filter(A=>A.Value==o);return t.length>0?t[0].Text3:""},V=()=>{let t="N";return Se&&Se.map(A=>{A.ScreenName==="Attendance"&&(t=A.IsFullAccess)}),t},[Ce,je]=n.useState(!0),$={asStdDivId:f,asDate:o,asAcademicYearId:v,asSchoolId:m},et={asSchoolId:Number(m),asAcademicYearId:Number(v),asStandardDivId:Number(f)},ne={asSchoolId:Number(m),asAcademicYearId:Number(v),asStandardDivisionId:Number(f),asAttendanceDate:o,asUserId:Ue},tt={asSchoolId:Number(m),asAttendanceDate:o,asAcademicYearId:Number(v),asStdDivId:Number(f),asUserId:Number(S)},Ae={asSchoolId:Number(m),asAcademicYearId:Number(v),asStandardDivId:Number(f),asSelectedDate:o,asMaxDaysLimit:Number(ce)},st=()=>{let t="";return N.map(A=>{A.Value==f&&(t=A.StandardDivision)}),t},nt=n.useCallback(Te(t=>{r(Wt(t))},500),[r]);n.useEffect(()=>{r(ae());const t={asSchoolId:Number(m),asAcadmicYearId:Number(v),asTeacher_id:V()==="Y"?0:Number(sessionStorage.getItem("TeacherId"))};nt(t)},[]),n.useEffect(()=>{N.length>0&&a==null&&Z(N[0].Value)},[N]),n.useEffect(()=>{if(N&&N.length>0&&a==null&&d==null)if(V()==="Y")Z(N[0].Value);else{const t=sessionStorage.getItem("StandardDivisionId");t!==null&&Z(t)}},[N]);const at=n.useCallback(Te(t=>{r(Ot(t))},500),[r]);n.useEffect(()=>{at(et)},[f,o]),n.useEffect(()=>{const t=JSON.parse(sessionStorage.getItem("ScreensAccessPermission"));let A="N",H=sessionStorage.getItem("TeacherId"),P=sessionStorage.getItem("ClassName");t==null||t.map(ve=>{ve.ScreenName==="Attendance"&&(A=ve.IsFullAccess)}),c=="Y"&&P.length>1&&A!="Y"&&Y(H!=null&&H!=""?H:"0"),r(Vt({asSchoolId:m,asAcademicyearId:v,asTeacherId:M})),d==null&&ot(new Date),(d!=null||a!=null)&&be("")},[]),n.useEffect(()=>{o!=null&&o!=""&&(r(U($)),r(re(ne)))},[y,o,f,se]);const rt=()=>{l(!0),C({title:"Please Confirm",message:"Are you sure you want to delete attendance of date  : "+W(o),variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{h()},onConfirm:()=>{r(Jt(tt)),h()}})};n.useEffect(()=>{o!=null&&o!=""&&(r(U($)),r(re(ne)))},[y,o,f]);const ot=t=>{fe(W(t))},it=(t,A)=>{let H=A.filter(P=>!P.IsExamSubmitted).some(P=>P.isActive===!1)?A.filter(P=>!P.IsExamSubmitted).some(P=>P.isActive===!0)?2:0:1;ie(H===1?"P":H===0?"N":""),oe(t),Qe(A)},lt=()=>{let t="";return qe.map(A=>{t=t+'<SchoolWiseAttendance school_id="'+m+'" attendance_date="'+o+'" Student_Id="'+A.StudentId+'" is_present="'+(A.isActive?"Y":"N")+'" is_halfdaypresent="N" Standard_Division_Id="'+f+'" Academic_Year_Id="'+v+'" />'}),"<Attendance>"+t+"</Attendance>"},ct=sessionStorage.getItem("Id"),J=()=>{const t={asSchoolId:Number(m),asInsertedById:Number(ct),asStudentsAttendanceXML:lt(),asAttendanceDate:o,asStandardDivisionId:Number(f),asSendMessage:i};r(Ut(t))},dt={asSchoolId:Number(m)};n.useEffect(()=>{r(Oe(dt))},[]),n.useEffect(()=>{de!=""&&(Ne.success(de),r(Ht()),r(U($)),r(re(ne)))},[de]),n.useEffect(()=>{ee.length==1&&(Je(ee[0].Name),p(ee[0].Value),be(""))},[ee]);const ut=()=>{if(r(ae()),!Ce||!s)return;const t=k.toLowerCase();let A="";t==="selected date is holiday."||t==="selected date is weekend."?(t==="selected date is holiday."?A="Are you sure to mark attendance on selected holiday?":t==="selected date is weekend."&&(A="Are you sure to mark attendance on selected weekend?"),C({title:"Please Confirm",message:A,variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{h()},onConfirm:()=>{oe(""),h(),z==="P"?C({title:"Please Confirm",message:"All the students are marked as present. Are you sure you want to save the attendance?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{h()},onConfirm:()=>{J(),h(),l(!1)}}):z==="N"?C({title:"Please Confirm",message:"All the students are marked as absent. Are you sure you want to save the attendance?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{h()},onConfirm:()=>{J(),h(),l(!1)}}):(J(),l(!1))}})):z==="P"||z==="N"?C({title:"Please Confirm",message:"All the students are marked as "+(z==="P"?"present":"absent")+". Are you sure you want to save the attendance?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:()=>{h()},onConfirm:()=>{J(),h(),l(!1)}}):(oe(""),J(),h(),l(!1))};n.useEffect(()=>{te!=""&&(r(U($)),r(Le(Ae)),Ne.success(te,{toastId:"success1"}),r(zt()),r(re(ne)))},[te]),n.useEffect(()=>{console.log(ce,"ListAbsent  Students",le),le.length>0&&K(!0)},[le]),n.useEffect(()=>{X==!1&&r(ae())},[X]);const xt=()=>{K(!0),r(Le(Ae))},ht=()=>{K(!1),r(ae())},mt=t=>{x(`/${location.pathname.split("/")[1]}/Teacher/TAttendance/`+O(t),{state:{fromInternal:!0}})},ue=()=>{x("/RITeSchool/Teacher/SchoolAttendanceOverview/"+O(f)+"/"+O(xe(o)),{state:{fromInternal:!0}})},gt=t=>{l(!0),fe(t)},pt=t=>{l(!0),Z(t),r(U($))},ft=t=>{l(!0),I(t)};n.useEffect(()=>{G.length>0&&o!=""&&G.map((t,A)=>{t.Value===o&&(t.Text1.includes("Outside")||new Date(o)>new Date?je(!1):je(!0))})},[G,o]);const F=t=>t?new Date(t)>new Date:!1;return e.jsxs(b,{sx:{px:2},children:[e.jsx(ts,{navLinks:[{title:"Attendance",path:"/RITeSchool/Teacher/TAttendance"}],rightActions:e.jsxs(He,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(g,{item:!0,xs:12,sm:12,md:12,lg:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:f&&f!=="0"?e.jsxs(e.Fragment,{children:[e.jsx(D,{color:j||F(o)&&V()==="N"?_[500]:E[500],fontWeight:"bold",sx:{cursor:j||F(o)&&V()==="N"?"not-allowed":"pointer",mt:{xs:"4px",sm:"7px"}},onClick:()=>{!j&&!F(o)&&V()==="Y"&&ue()},children:"Overview"}),e.jsx(D,{color:j||F(o)?_[500]:E[500],fontWeight:"bold",sx:{alignItems:"center",mt:{xs:"4px",sm:"7px"}},children:"-"}),e.jsx(D,{color:j||F(o)?_[500]:E[500],sx:{cursor:j||F(o)?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:1},fontWeight:"bold",onClick:()=>{!j&&!F(o)&&ue()},children:e.jsx(R,{title:"Present Students / Total Students",children:e.jsx(b,{children:L==null?void 0:L.TotalStudents})})}),e.jsx(b,{sx:{height:"25px",border:"1px solid grey"}}),e.jsx(D,{color:j||F(o)?_[500]:E[500],sx:{cursor:j||F(o)?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:1},fontWeight:"bold",onClick:()=>{!j&&!F(o)&&ue()},children:e.jsx(R,{title:"Attendance marked Divisions / Total Divisions",children:e.jsx(b,{children:L==null?void 0:L.TotalDivisions})})})]}):e.jsx(D,{color:_[500],fontWeight:"bold",children:e.jsx("span",{})})}),e.jsx(g,{item:!0,xs:12,sm:6,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:e.jsx(Gt,{label:"",sx:{mb:{xs:"10px",sm:"0px"},minWidth:{xs:"35vh",sm:"17vw"}},ItemList:N,onChange:pt,defaultValue:f,size:"small",DisableClearable:V()==="N",disabled:N.length===1})}),e.jsxs(g,{item:!0,xs:12,sm:6,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},children:[e.jsx(R,{title:'Mark attendance of each student from your class for the select date. Click on "Delete" button to delete attendance of selected date. Delete facility will be available only if user have "Edit" facility.',children:e.jsx("span",{children:e.jsx(B,{sx:{color:"white",backgroundColor:_[500],height:"36px !important",":hover":{backgroundColor:_[600]}},children:e.jsx(Ve,{})})})}),e.jsx(R,{title:"Individual Attendance",children:e.jsx("span",{children:e.jsx(B,{onClick:()=>x("/RITeSchool/Teacher/IndidualAttendance/"+O(f)+"/"+O(xe(o)),{state:{fromInternal:!0}}),sx:{color:"white",backgroundColor:E[500],"&:hover":{backgroundColor:E[600]}},disabled:f===""||f==="0",children:e.jsx(ze,{})})})}),e.jsx(R,{title:"Month Wise Attendance",children:e.jsx("span",{children:e.jsx(B,{onClick:()=>x("/RITeSchool/Teacher/MonthwiseAttendance/"+O(f)+"/"+O(xe(o)),{state:{fromInternal:!0}}),sx:{color:"white",backgroundColor:E[500],"&:hover":{backgroundColor:E[600]}},disabled:f===""||f==="0",children:e.jsx(_e,{})})})}),ce!=="0"&&f!=="0"&&e.jsx(R,{title:"Absent Student Details",children:e.jsx("span",{children:e.jsx(B,{onClick:xt,sx:{backgroundColor:E[500],color:"white","&:hover":{backgroundColor:E[600]}},disabled:f===""||f==="0",children:e.jsx($t,{})})})}),e.jsx(R,{title:"Save Attendance",children:e.jsx("span",{children:e.jsx(B,{onClick:ut,sx:{color:"white",backgroundColor:Fe[500],"&:hover":{backgroundColor:Fe[600]}},disabled:f===""||f==="0",children:e.jsx(qt,{})})})})]})]})}),(L==null?void 0:L.GetSummaryCountList.length)>0&&e.jsx(fs,{assignedDate:o,SummaryCountforAttendance:L.GetSummaryCountList}),e.jsxs(g,{container:!0,spacing:1,mt:0,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(b,{sx:{backgroundColor:"white",pt:2},children:e.jsx(g,{justifyContent:"center",children:e.jsxs(b,{sx:{backgroundColor:"white"},children:[j?e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",color:Re[500],background:"#FFCCCC",marginTop:"12px",marginLeft:"10px",marginBottom:"0px",padding:"5px",border:j?"1px solid black":"none"},children:j}):null,!j&&k&&e.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",marginTop:"12px",marginLeft:"10px",marginRight:"10px",color:k.includes("Attendance not yet marked.")||k.includes("Attendance date should be within current academic year")||k.includes("Term Start & End dates have not been configured")?"red":k.includes("Attendance is already marked")?"green":"red",backgroundColor:k.includes("Attendance not yet marked.")||k.includes("Attendance date should be within current academic year")||k.includes("Term Start & End dates have not been configured")?"#FFCCCC":k.includes("Attendance is already marked")?"#CCFFCC":"#FFCCCC",border:(k.includes("Attendance not yet marked.")||k.includes("Attendance date should be within current academic year")||k.includes("Term Start & End dates have not been configured")||k.includes("Attendance is already marked"),"1px solid black"),padding:"5px"},children:k}),e.jsx(xs,{ItemList:G,ClickItem:gt,formattedDate:W(o),DefaultValue:!0,assignedDate:W(o),ArrayList:u,ClickDeleteAttendance:rt,Standardid:y,clickNav:mt,getAssignedDateStatus:Ze})]})})})}),Ce?e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(b,{children:N?e.jsx(b,{sx:{display:Ke},children:se&&se.StartDate&&se.EndDate&&e.jsx(b,{sx:{mb:{xs:5,md:0}},children:e.jsx($e,{sendmeassagestudent:i,handleCheckboxChange:ft,Dataa:Xe,getAbsetNumber:it,assignedDate:o,setIsDirty:l})})}):null})}):e.jsx(g,{item:!0,xs:12,md:6})]}),e.jsx(b,{sx:{display:"flex",justifyContent:"flex-start",gap:"8px"},children:X&&e.jsx(ps,{open:X,setOpen:K,ClickCloseDialogbox:ht,Classname:st(),Date:o,ClassId:f,saveResponseMessage:te})})]})};export{Ps as default};
