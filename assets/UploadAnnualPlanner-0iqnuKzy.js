import{j as e,B as p,H as E,I as v,u as L,r as o,E as R,c as h,cJ as g,t as A,cK as T,cL as w,a2 as G,a3 as Y,bl as H,a5 as M,T as W,a7 as J,a8 as N,L as O,cM as V,cN as z}from"./index-d5YOjbb6.js";import{S as K}from"./SingleFile-BT4Sw5XK.js";const X=({IconList:r,ClickIcon:l})=>e.jsx(e.Fragment,{children:r.map((s,t)=>e.jsx(p,{children:e.jsx(E,{title:s.Title,children:e.jsx(v,{sx:s.sx,onClick:()=>{l(s.Action)},children:s.Icon})})},t))}),Z=({openAnnualPlannerDialog:r,setOpenAnnualPlannerDialog:l})=>{const s=L(),[t,f]=o.useState(""),[c,I]=o.useState(""),i=sessionStorage.getItem("AcademicYearId"),b=localStorage.getItem("FolderName"),d=localStorage.getItem("localSchoolId"),S=sessionStorage.getItem("Id"),j=["PDF","JPG","PNG","BMP","JPEG"],C=3e6,{showAlert:D,closeAlert:F}=o.useContext(R),n=h(a=>a.AddPlanner.getfile),u=h(a=>a.AddPlanner.AddAnnual),m=h(a=>a.AddPlanner.deletefile),P=()=>{if(t&&c){const a={asSchoolId:Number(d),asAcademicYearId:Number(i),asSaveFeature:"Event Planner",asFileName:t,asFolderName:b,asBase64String:c,asUpdatedById:Number(S)};s(V(a))}},B={asSchoolId:Number(d),asAcademicYearId:Number(i),asUserId:Number(S)},x={asSchoolId:Number(d),asAcademicYearId:Number(i)};o.useEffect(()=>{s(g(x))},[]);const U=()=>{D({title:"Please Confirm",message:"Are you sure you want to delete the current annual planner file?",variant:"warning",confirmButtonText:"Confirm",cancelButtonText:"Cancel",onCancel:F,onConfirm:()=>{s(z(B)),F()}})};o.useEffect(()=>{u!=""&&(A.success(u),s(g(x)),s(T()),f(""),I(""))},[u]),o.useEffect(()=>{m!=""&&(A.success(m),s(g(x)),s(w()))},[m]);const k=a=>{f(a.Name),I(a.Value)},y=()=>{n!==""&&window.open(localStorage.getItem("SiteURL")+"RITESCHOOL/DOWNLOADS/Event%20Planner/"+n[0].LinkUrl)};return e.jsxs(e.Fragment,{children:[" ",e.jsxs(G,{open:r,maxWidth:"sm",fullWidth:!0,onClose:()=>l(!1),PaperProps:{sx:{borderRadius:"15px"}},children:[e.jsx(Y,{sx:{bgcolor:"#223354",color:a=>a.palette.common.white},children:e.jsx(H,{onClick:()=>{l(!1)},sx:{color:"White",borderRadius:"7px",position:"absolute",top:"5px",right:"5px",cursor:"pointer","&:hover":{color:"red"}}})}),e.jsx(M,{dividers:!0,children:e.jsxs(p,{children:[e.jsx(W,{variant:"h3",children:"Upload Annual Planner"}),e.jsx(p,{sx:{mt:2},children:e.jsx(K,{ValidFileTypes:j,MaxfileSize:C,ChangeFile:k,errorMessage:"",FileName:t,viewIcon:!0,deleteIcon:!0,FilePath:n.length>0?n[0].LinkUrl:"",clickDelete:U,clickFileName:y,width:"100%"})})]})}),e.jsxs(J,{sx:{py:2,px:3},children:[e.jsx(N,{color:"error",onClick:()=>{l(!1)},children:"Cancel"}),e.jsx(N,{disabled:!(t.length!==0&&c.length!==0),onClick:P,sx:{color:"green","&:hover":{color:"green",backgroundColor:O[100]}},children:"Save"})]})]})]})};export{X as H,Z as U};
