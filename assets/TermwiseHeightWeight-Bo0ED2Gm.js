import{j as e,ai as Q,B as j,aj as G,ak as Z,al as D,am as T,an as ee,T as I,q as L,u as te,A as se,w as ae,x as k,r as o,c as p,au as re,S as ne,hN as ie,hO as oe,hP as H,hQ as le,t as F,hR as R,F as de,m as z,p as B,G as v,bR as E,H as N,I as W,J as A,K as ce,L as U,hS as he}from"./index-d5YOjbb6.js";import{d as xe}from"./PriorityHigh-Co3aw9FH.js";import{b as ge,D as ue}from"./DotLegendStyled-B7Xptujc.js";import{d as me}from"./Save-Ckr0NoeK.js";const fe=({ItemList:r,onTextChange:g,onTextChange2:u,HeaderArray:c,IsPublishedStatus:h})=>{const S=t=>{r=r.map(n=>n.Id===t.Id?{...n,Text3:t.Value}:n),u(r)},f=t=>{r=r.map(n=>n.Id===t.Id?{...n,Text4:t.Value}:n),u(r)},x=(t,n)=>{if(h=="0"){let a=t.target.value;if(!/^\d*\.?\d*$/.test(a))return;const i=a.split(".");if(i[0].length>4||i[1]&&i[1].length>2)return;S({Value:a,Id:n.Text1})}},m=(t,n)=>{if(h=="0"){let a=t.target.value;if(!/^\d*\.?\d*$/.test(a))return;const i=a.split(".");if(i[0].length>4||i[1]&&i[1].length>2)return;f({Value:a,Id:n.Text1})}};return e.jsx(e.Fragment,{children:e.jsx(Q,{component:j,sx:{border:t=>`1px solid ${t.palette.grey[300]}`},children:e.jsxs(G,{"aria-label":"simple table",children:[e.jsx(Z,{children:e.jsx(D,{sx:{background:t=>t.palette.secondary.main,color:t=>t.palette.common.white},children:c.map((t,n)=>e.jsx(T,{sx:{textTransform:"capitalize",color:a=>a.palette.common.white},align:t.align?t.align:"left",children:e.jsx("b",{children:t.Header})},n))})}),e.jsx(ee,{children:r.map((t,n)=>e.jsxs(D,{children:[e.jsx(T,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(I,{variant:"subtitle1",style:{color:t.IsLeftStudent==="1"?"red":"inherit"},children:t.Text1})}),e.jsx(T,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(I,{variant:"subtitle1",style:{color:t.IsLeftStudent==="1"?"red":"inherit"},children:t.Text2})}),e.jsx(T,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(L,{size:"small",id:"outlined-basic",value:t.Text3,variant:"outlined",onChange:a=>{x(a,t)},disabled:h=="1"})}),e.jsx(T,{size:"small",sx:{textTransform:"capitalize"},children:e.jsx(L,{size:"small",id:"outlined-basic",value:t.Text4,variant:"outlined",onChange:a=>{m(a,t)},disabled:h=="1"})})]},n))})]})})})},we=()=>{const r=te();se();let{ParamsStandardDivisionId:g,ParamsTestId:u}=ae();g=k(g),u=k(u);const[c,h]=o.useState(0),[S,f]=o.useState([]),x=Number(localStorage.getItem("localSchoolId")),m=Number(sessionStorage.getItem("AcademicYearId"));Number(sessionStorage.getItem("StandardDivisionId"));const t=Number(localStorage.getItem("UserId"));Number(sessionStorage.getItem("UserId"));const n=p(s=>s.TermwiseHtWt.ClassTeacherList);console.log(g,"ParamsStandardDivisionId");let a=re(247);const[i,V]=o.useState(g||(a=="Y"?"0":"")),b=p(s=>s.TermwiseHtWt.TermwiseTermList),C=p(s=>s.TermwiseHtWt.Student),w=p(s=>s.TermwiseHtWt.UpdateStudent),l=p(s=>s.TermwiseHtWt.FinalPublishedExamStatus);JSON.parse(sessionStorage.getItem("ScreensAccessPermission")),l.ShowFlag;const _=["User can not change or update any data once summative exam is published."],P=ne(),Y=[{Id:1,Header:"Roll No."},{Id:2,Header:"Student Name"},{Id:3,Header:"Height (In Centimeters)"},{Id:4,Header:"Weight (In Kilograms)"}];o.useEffect(()=>{r(ie({asSchoolId:x,asAcademicYearId:m}))},[]),o.useEffect(()=>{r(oe({asSchoolId:x}))},[]),o.useEffect(()=>{b.length>0&&h(b[0].Id)},[b]);const y={asStdDivId:Number(i),asAcademic_Year_Id:m,asSchoolId:x,asTerm_Id:c};o.useEffect(()=>{r(H(y)),r(le($))},[i,c]),o.useEffect(()=>{f(C)},[C]);const $={asStandardDivId:Number(i),asTerm_Id:c,asSchoolId:x,asAcademicYearId:m};o.useState(""),o.useState("");const M=()=>{let s="<ArrayOfStudentInfoForHeightWeight xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>";return S.map(d=>{s=s+"<StudentInfoForHeightWeight><RollNo>"+d.Text1+"</RollNo><YearWiseStudentId>"+d.Text6+"</YearWiseStudentId><Height>"+(d.Text3===""?"0":d.Text3)+"</Height><Weight>"+(d.Text4===""?"0":d.Text4)+"</Weight><IsLeftStudent>"+d.Text5+"</IsLeftStudent></StudentInfoForHeightWeight>"}),s=s+"</ArrayOfStudentInfoForHeightWeight>",s},O=s=>{V(s)},X=s=>{h(s)},J=s=>{(s===""||/^[0-9\b]+$/.test(s)&&s.length<=2)&&f(s)},K=s=>{f(s)},q=()=>{const s={asSchoolId:x,asAcademicYearId:m,asTermId:c,asStandardDivisionId:Number(i),aiUserId:t,StudentHeightWeightDetailsXML:M()};r(he(s))};return o.useEffect(()=>{w=="Students height-weight not saved."&&(F.error("Students height-weight not saved."),r(R()),r(H(y)))},[w]),o.useEffect(()=>{w=="Students height-weight saved successfully."&&(F.success("Students height-weight saved successfully."),r(R()),r(H(y)))},[w]),e.jsxs(j,{sx:{px:2},children:[e.jsx(de,{navLinks:[{title:"Exam Results",path:"/RITeSchool/Teacher/ExamResultBase/"+z(i)+"/"+z(u)},{title:"Termwise Height-Weight",path:"/RITeSchool/Teacher/TermwiseHeightWeight"}],rightActions:e.jsx(e.Fragment,{children:e.jsxs(B,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"left",gap:1,sx:{mt:{xs:0,sm:0},flexWrap:{xs:"nowrap",sm:"nowrap"}},children:[e.jsx(v,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(E,{sx:{width:{xs:"70vw",sm:"20vw"},bgcolor:a=="N"?"#F0F0F0":"inherit"},ItemList:n,onChange:O,label:"Class Teacher",defaultValue:i,mandatory:!0,size:"small",DisableClearable:a=="N",disabled:a=="N"})}),e.jsx(v,{item:!0,xs:12,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:e.jsx(E,{sx:{width:{xs:"40vw",sm:"15vw"}},ItemList:b,onChange:X,label:"Term",defaultValue:c.toString(),mandatory:!0,size:"small"})}),e.jsxs(v,{item:!0,xs:12,gap:1,display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start"},children:[e.jsx(N,{title:_,children:e.jsx(W,{sx:{color:"white",backgroundColor:"#fbc02d","&:hover":{backgroundColor:"#e1ac28"}},children:e.jsx(xe,{})})}),e.jsx(N,{title:"Capture termwise student's height and weight.",children:e.jsx(W,{sx:{color:"white",backgroundColor:A[500],"&:hover":{backgroundColor:A[600]}},children:e.jsx(ce,{})})}),Number(i)>0&&e.jsx(N,{title:((l==null?void 0:l.ShowFlag)=="1","Save"),children:e.jsx("span",{children:e.jsx(W,{sx:{color:"white",backgroundColor:U[500],"&:hover":{backgroundColor:U[600]}},disabled:(l==null?void 0:l.ShowFlag)=="1",onClick:q,children:e.jsx(me,{})})})})]})]})})}),e.jsx(j,{sx:{backgroundColor:"white",mb:2,p:2},children:e.jsxs(B,{direction:"row",gap:1,alignItems:"center",mb:0,children:[e.jsx(I,{variant:"h4",mb:0,children:"Legend"}),e.jsxs(ge,{sx:{alignItems:"center",display:"flex",mt:"0px"},children:[e.jsx(ue,{className:P.border,style:{background:"red"}}),"Left Students"]})]})}),e.jsx(j,{sx:{background:"white",p:2},children:C.length>0?e.jsx(e.Fragment,{children:e.jsx(fe,{ItemList:S,onTextChange:J,onTextChange2:K,HeaderArray:Y,IsPublishedStatus:l.IsPublishedStatus})}):e.jsx(I,{variant:"body1",sx:{textAlign:"center",backgroundColor:"#324b84",padding:1,borderRadius:2,color:"white"},children:e.jsx("b",{children:"No record found."})})})]})};export{we as default};
